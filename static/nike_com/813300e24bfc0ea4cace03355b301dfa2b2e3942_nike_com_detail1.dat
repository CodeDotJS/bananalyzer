/* Nike -- marketing-automation.optimization-client -- 1.1.4 */
(()=>{"use strict";var e=function(e){this._locations=[],e&&(this._locations=e)},n=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},t=function(e,n){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},o=function(){return n(void 0,void 0,void 0,(function(){var e,n;return t(this,(function(t){switch(t.label){case 0:return[4,null===(n=window.webShellClient)||void 0===n?void 0:n.identity.getUserProfile()];case 1:return[2,{userId:null==(e=t.sent())?void 0:e.upmId,loggedIn:!!(null==e?void 0:e.upmId)}]}}))}))},i=function(){return i=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},i.apply(this,arguments)},r="nikecom";var a,l=function(e){var n,t,o,a,l,c,u,s,d,v;try{var p=function(e){var n,t,o,i,r,a=e.location.href,l={"/t/":"pdp","/t-dark/":"pdp","/u-dark/":"pdp","/u/":"pdp","/w/":"pw","/w-dark/":"pw","/cart":"cart","/checkout":"checkout","/member":"member","/help":"help","/w?q":"onsite search"};if(a){var c=!1;Object.keys(l).forEach((function(e){!c&&a.includes(e)&&(c=!0,r=l[e])}))}if(!r)try{r=null===(i=null===(o=null===(t=null===(n=e.__NEXT_DATA__)||void 0===n?void 0:n.props)||void 0===t?void 0:t.pageProps)||void 0===o?void 0:o.navConfig)||void 0===i?void 0:i.analyticsPageType}catch(e){}return r}(e),f=function(e,n){var t,o,i,r,a,l,c,u,s,d,v,p,f,h,w,g,b,y,m,_,T,A,I,P,O,N,k,E,C=(null===(t=e.location)||void 0===t?void 0:t.pathname)||"";switch(n){case"pdp":E=null===(o=document.querySelector("#pdp_product_title"))||void 0===o?void 0:o.innerText.toLowerCase();break;case"pw":E=null===(s=null===(u=null===(c=null===(l=null===(a=null===(r=null===(i=e.__NEXT_DATA__)||void 0===i?void 0:i.props)||void 0===r?void 0:r.pageProps)||void 0===a?void 0:a.initialState)||void 0===l?void 0:l.Wall)||void 0===c?void 0:c.facetNav)||void 0===u?void 0:u.analytics)||void 0===s?void 0:s.legacyPageName.toLowerCase();break;case"homepage":E=k=null===(f=null===(p=null===(v=null===(d=e.__NEXT_DATA__)||void 0===d?void 0:d.props)||void 0===v?void 0:v.pageProps)||void 0===p?void 0:p.navConfig)||void 0===f?void 0:f.pageDetail;break;case"landing page":k=null===(b=null===(g=null===(w=null===(h=e.__NEXT_DATA__)||void 0===h?void 0:h.props)||void 0===w?void 0:w.pageProps)||void 0===g?void 0:g.navConfig)||void 0===b?void 0:b.globalNavPageName,E=null===(T=null===(_=null===(m=null===(y=e.__NEXT_DATA__)||void 0===y?void 0:y.props)||void 0===m?void 0:m.pageProps)||void 0===_?void 0:_.navConfig)||void 0===T?void 0:T.pageDetail;break;case"cart":k="cart",E="view";break;case"help":k="help";var x=C.split("/");2===x.length?E="home":C.includes("/search/")?E="search":C.includes("/a/")&&(E="article>".concat(x[x.length-1]));break;case"checkout":E="shipping";break;case"onsite search":E=(null===(N=null===(O=null===(P=null===(I=null===(A=e.__NEXT_DATA__)||void 0===A?void 0:A.props)||void 0===I?void 0:I.pageProps)||void 0===P?void 0:P.initialState)||void 0===O?void 0:O.Wall)||void 0===N?void 0:N.products.length)?"results found":"no search results";break;case"member":k="member",E=["inbox","profile","settings"].find((function(e){return C.includes(e)}))}return{pageName:k,pageDetail:E}}(e,p),h=f.pageName,w=f.pageDetail,g=function(e){var n;switch(e){case"pdp":case"homepage":case"landing page":case"cart":case"checkout":n=e;break;case"pw":n="product wall"}return n}(p),b=null===(o=null===(t=null===(n=null==e?void 0:e.webShellClient)||void 0===n?void 0:n.locale)||void 0===t?void 0:t.get())||void 0===o?void 0:o.currency,y=i({domain:"www.nike.com",backendPlatform:"cloud"},(v=g)&&{name:v}),m=function(e,n,t){var o=i(i({experienceType:r},n&&{pageType:n}),t&&{pageDetail:t});return i(i({},o),"landing page"===n||"homepage"===n?e&&{pageName:"".concat(r,">").concat(e)}:t&&{pageName:"".concat(r,">").concat(n,">").concat(t)})}(h,p,w),_=function(e){return{language:(null==e?void 0:e.language)||"en",country:(null==e?void 0:e.country)||"us"}}(null===(l=null===(a=e.webShellClient)||void 0===a?void 0:a.locale)||void 0===l?void 0:l.get());return i(i({app:y,view:m},b&&{currency:b}),{language:(null===(s=null===(u=null===(c=e.webShellClient)||void 0===c?void 0:c.locale)||void 0===u?void 0:u.get())||void 0===s?void 0:s.langRegion)||"en_US",locale:_})}catch(n){return e.newrelic&&e.newrelic.addPageAction("OPTIMIZATION_CLIENT_COMMON_PROPERTIES_ERROR",{host:e.location.host,errorName:n.name,errorMessage:n.message,stackTrace:null!==(d=n.stack)&&void 0!==d?d:""}),console.error("Failed to get common properties: ".concat(n.message)),{app:{backendPlatform:"",domain:"",name:"",version:""},view:{experienceType:"",pageName:"",pageType:"",pageDetail:""},language:"",locale:{country:"",language:""},currency:""}}},c=function(){return c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},c.apply(this,arguments)};!function(e){e[e.CONTINUE=0]="CONTINUE",e[e.STOP=1]="STOP"}(a||(a={}));var u,s=function(){function e(){this.maxAttempts=10,this.interval=50,this.exponentRate=1.5}return e.run=function(e){var n=function(t){if(void 0===t&&(t=0),function(n){try{return e.onTick(n)}catch(n){return e.onError(n),a.STOP}}(t)!==a.STOP)if(t+1>=e.maxAttempts)e.onTimeout();else{var o=e.interval*Math.pow(t+1,e.exponentRate);setTimeout((function(){return n(t+1)}),o)}};return n(),e},e.runAsync=function(n){return new Promise((function(t,o){e.run(c(c({},new e),{onTick:function(){var e=n();return e?(t(e),a.STOP):a.CONTINUE},onError:o,onTimeout:function(){return t(null)}}))}))},e}(),d=(u=function(e,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},u(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}u(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),v=function(){return v=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},v.apply(this,arguments)},p=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},f=function(e,n){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},h=function(e,n,t){if(t||2===arguments.length)for(var o,i=0,r=n.length;i<r;i++)!o&&i in n||(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return e.concat(o||Array.prototype.slice.call(n))},w="adtargeting_behavioralevents",g="performance",b=function(e){function n(n){var t,i=e.call(this,n)||this;return i.getLocations=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return p(i,h([e],n,!0),void 0,(function(e,n){var t,i,r,a,l,c,u,s,d,v,p,h,b,y,m,_,T;return void 0===n&&(n=!1),f(this,(function(f){switch(f.label){case 0:return t=null!==(s=null==e?void 0:e.locations)&&void 0!==s?s:this._locations,[4,this.getAdobeATSdk()];case 1:if(!(null==(i=f.sent())?void 0:i.target))return console.warn("Optimization client is unable to find Adobe Target. Please check that your application is configured correctly."),[2];if(0===t.length)return console.error("Locations must be provided either via a function argument or as a part of the Optimization configuration"),null===(d=window.newrelic)||void 0===d||d.addPageAction("EXP_OPTIMIZATION_CLIENT_NO_LOCATIONS",{errorMessage:"Locations must be provided."}),[2];I=t,(P=new URL(window.location.href).searchParams.get("atLocation"))&&(I[0].name=P),A=t,new URL(window.location.href).searchParams.forEach((function(e,n){if(n.indexOf("mbox:")>=0){var t=n.split(":")[1];A[0].parameters[t]=e}})),f.label=2;case 2:return f.trys.push([2,6,,7]),[4,o()];case 3:return r=f.sent(),a=this.getOptions(t),[4,null===(v=window.analyticsClient)||void 0===v?void 0:v.isInitialized()];case 4:return f.sent(),l=null===(h=null===(p=null===window||void 0===window?void 0:window.NikePrivacy)||void 0===p?void 0:p.permissions.get())||void 0===h?void 0:h.map((function(e){var n=e.category;return e.isEnabled?n:null})).filter(Boolean),[w,g].every((function(e){return null==l?void 0:l.includes(e)}))?(window.Visitor&&this.setCustomerIDs(r),[4,window.adobe.target.getOffers(a)]):(console.warn("Appropriate UGP permissions have not been given. Cannot fetch Adobe Target locations."),null===(b=window.newrelic)||void 0===b||b.addPageAction("EXP_OPTIMIZATION_CLIENT_NO_UGP_PERMISSION",{errorMessage:"Appropriate UGP permissions have not been given.",locations:t}),[2]);case 5:return c=f.sent(),null===(y=window.newrelic)||void 0===y||y.addPageAction("EXP_OPTIMIZATION_CLIENT_SUCCESS",{locations:t}),[2,this.transformAdobeOffersToGetLocationsResult(c,n)];case 6:return u=f.sent(),(null===(m=window.newrelic)||void 0===m?void 0:m.noticeError)&&(null===(_=window.newrelic)||void 0===_||_.addPageAction("EXP_OPTIMIZATION_CLIENT_ERROR",{host:window.location.host,errorName:u.name,errorMessage:u.message,stackTrace:null!==(T=u.stack)&&void 0!==T?T:"",locations:t.length?t:null})),console.error("Failed to find locations: ".concat(u.message)),[3,7];case 7:return[2]}var A,I,P}))}))},i.getOptions=function(e){return{request:{context:{channel:"web"},experienceCloud:{analytics:{logging:"client_side"}},property:{token:(n=new URL(window.location.href).searchParams.get("atProperty"),n||"ae0ecea9-920a-26c9-5042-3a3aab0ff68b")},execute:{mboxes:e.map((function(e,n){return{name:e.name,index:n,parameters:e.parameters}}))}}};var n},i.transformAdobeOffersToGetLocationsResult=function(e,n){for(var t,o,r,a,l,c=[],u=function(e){var u={name:e.name,analytics:null===(t=e.analytics)||void 0===t?void 0:t.payload.tnta,content:null===(r=null===(o=null==e?void 0:e.options)||void 0===o?void 0:o[0])||void 0===r?void 0:r.content,responseTokens:null===(l=null===(a=null==e?void 0:e.options)||void 0===a?void 0:a[0])||void 0===l?void 0:l.responseTokens,experimentActivatedCallback:function(){}};if(u.analytics){var s=function(){var n;try{return i.sendAdobeAnalyticsEvent(e),!0}catch(e){return window.newrelic&&window.newrelic.addPageAction("OPTIMIZATION_CLIENT_ANALTICS_SEND_ERROR",{host:window.location.host,errorName:e.name,errorMessage:e.message,stackTrace:null!==(n=e.stack)&&void 0!==n?n:""}),console.error("Failed to send Analytics: ".concat(e.message)),!1}finally{u.experimentActivatedCallback=function(){}}};n?u.experimentActivatedCallback=s:s()}c.push(u)},s=0,d=e.execute.mboxes;s<d.length;s++){u(d[s])}if(c&&c.length>0)return{locations:c}},null===(t=window.newrelic)||void 0===t||t.addPageAction("EXP_OPTIMIZATION_CLIENT_INITIALIZED",{}),i}return d(n,e),n.prototype.setCustomerIDs=function(e){var n=window.Visitor.getInstance("F0935E09512D2C270A490D4D@AdobeOrg");n.setCustomerIDs({customerecid:{id:n.getMarketingCloudVisitorID(),authState:e.loggedIn?window.Visitor.AuthState.AUTHENTICATED:window.Visitor.AuthState.UNKNOWN}})},n.prototype.validExperiment=function(e){return void 0!==e.content},n.prototype.sendAdobeAnalyticsEvent=function(e){var n,t,o,i,r,a=l(window);window.webShellClient.analytics.track("Experiment Activated",v({"experience.name":null===(t=null===(n=null==e?void 0:e.options)||void 0===n?void 0:n[0])||void 0===t?void 0:t.responseTokens["experience.name"],"activity.name":null===(i=null===(o=null==e?void 0:e.options)||void 0===o?void 0:o[0])||void 0===i?void 0:i.responseTokens["activity.name"],abTest:{analytics:null===(r=e.analytics)||void 0===r?void 0:r.payload.tnta}},a),{writeKey:"2iv4Qa7rFEipAs4iE850BkBpTYQvlAFZ"})},n.prototype.getAdobeATSdk=function(){return p(this,void 0,void 0,(function(){return f(this,(function(e){return[2,s.runAsync((function(){return window.adobe}))]}))}))},n}(e),y=function(){function e(e){var n=this;this.generateGlobalMbox=function(){o().then((function(e){var t,o,i,r=e.loggedIn,a=e.userId,l={appCountry:null===(o=null===(t=n._window.webShellClient)||void 0===t?void 0:t.locale.get().country)||void 0===o?void 0:o.toUpperCase(),appLanguage:null===(i=n._window.webShellClient)||void 0===i?void 0:i.locale.get().language,browserWidth:n._window.innerWidth};n._window.targetPageParamsAll=function(){return l.profile={loggedIn:r,userId:a},l}})).catch((function(e){var t;console.warn({error:e,cmsg:"Global mbox param init is failed.."}),null===(t=n._window.newrelic)||void 0===t||t.addPageAction("EXP_OPTIMIZATION_CLIENT_ERROR",{errorMessage:"Global mbox param init is failed."})}))},this._window=e}return e.prototype.init=function(){this.generateGlobalMbox()},e}(),m=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))},_=function(e,n){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(t=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(e){l=[6,e],o=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function T(e){return m(this,void 0,void 0,(function(){function n(){return m(this,void 0,void 0,(function(){return _(this,(function(e){return o.optimization.getLocations=t,o.optimization.__WS_UNSTABLE__.getLocations=t,[2]}))}))}var t,o,i;return _(this,(function(r){switch(r.label){case 0:return t=new b([]).getLocations,new y(e).init(),o=e.webShellClient,void 0!==e&&(null===(i=e.newrelic)||void 0===i||i.addPageAction("OPTIMIZATION_CLIENT_INITIALIZED",{})),[4,n()];case 1:return r.sent(),[2]}}))}))}!function(e){m(this,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return e.webShellClient?[4,T(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}(window)})();