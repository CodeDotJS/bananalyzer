"use strict";(self.webpackChunk_nike_shop_components=self.webpackChunk_nike_shop_components||[]).push([[4586],{1427:(e,r,t)=>{t.d(r,{A:()=>u});var n=t(1843),o=t(408),i=t(3807),l=t(1597);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}const u=function(e){var r;return(0,o.Ay)(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({fetchClient:i.A,url:"https://api.nike.com/cic/grand/v1/graphql",callerId:null===(r=window.NikeShop)||void 0===r?void 0:r.getVersion(),appId:l.DOTCOM_UX_ID},e))}},6408:(e,r,t)=>{t.d(r,{A:()=>o});var n=t(9204);function o(){var e=(0,n.A)().country;return"us"===e||"gb"===e?"mi":"km"}},8854:(e,r,t)=>{t.d(r,{A:()=>n});const n=function(e,r){return null==e?void 0:e.filter((function(e){return"PICKUP"!==e||Boolean(r)}))}},2147:(e,r,t)=>{t.r(r),t.d(r,{default:()=>k});var n=t(4531),o=t(7419),i=t.n(o),l=t(1843),a=t(2535),u=t(1630),c=t(8900),d=t(9422),s=t(1427),f=t(3714),p=t(8854),v=t(6408),y=t(4285),g=t(9204);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){(0,l.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function b(e){var r=e.appName,t=e.cloudStack,o=e.distance,l=void 0===o?u.Rq:o,m=e.email,b=e.isCached,h=e.isSearch,O=e.locationId,C=e.locationType,k=void 0===C?u.cD.store:C,P=e.offeringTypes,j=e.productId;return function(){var e=(0,n.A)(i().mark((function e(n){var o,u,C,A,S,D,I,T,x,U,N,_,E,K,R,F,q,B,z,M,V,Z,L,Q,W,X,$,G,H,J;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I=b?a._T:a.F$,e.next=3,null===(o=window)||void 0===o||null===(o=o.webShellClient)||void 0===o?void 0:o.identity.getVisitData();case 3:return T=e.sent,e.next=6,null===(u=window)||void 0===u||null===(u=u.webShellClient)||void 0===u?void 0:u.identity.getAccessToken();case 6:return x=e.sent,e.next=9,null===(C=window)||void 0===C||null===(C=C.webShellClient)||void 0===C?void 0:C.identity.getUserProfile();case 9:if(U=e.sent,N=null==U?void 0:U.userType,_=O||(null===(A=window.NikeShop)||void 0===A||null===(A=A.get())||void 0===A?void 0:A.locationId),E=null===(S=window.NikeShop)||void 0===S||null===(S=S.get())||void 0===S?void 0:S.postalCode,K=Date.now(),R=null===(D=window.NikeShop)||void 0===D||null===(D=D.get())||void 0===D?void 0:D.fulfillmentTypes,F=(0,p.A)(P||R,E),q="getfulfillmenttypesofferings/v4",R&&(q="getfulfillmentofferings/v5"),!b){e.next=42;break}return B=(0,g.A)(),z=null==B?void 0:B.country.toUpperCase(),M=null==B?void 0:B.currency,V=null==B?void 0:B.hreflang,Z={radiusUnitOfMeasure:(0,v.A)(),radiusDistance:l},L=w({countryCode:z,currency:M,locale:V,locationId:_,locationType:k,offeringTypes:F,postalCode:E,productId:j,userType:null==N?void 0:N.toUpperCase()},(null==F?void 0:F.includes("PICKUP"))&&Z),n({type:c.cv,meta:{service:I},payload:L}),e.prev=26,e.next=29,(0,s.A)({versionedQuery:q,operationType:"query",token:x,visitorId:null==T?void 0:T.visitorId,visitId:null==T?void 0:T.visitId,variables:L});case 29:return G=e.sent,n({type:c.PB,meta:{service:I},payload:{availableFulfillmentTypes:null==G||null===(Q=G.data)||void 0===Q?void 0:Q.availableFulfillmentTypes,fulfillmentOfferings:w({country:z},(null==G||null===(W=G.data)||void 0===W?void 0:W.fulfillmentOfferings)||{})}}),(0,f.A)("nike-shop-foffs-fetched",null,{telemetryData:{country:z,isCached:b,msSinceRequest:Date.now()-K},usePageAction:!0}),H=null!=G&&null!==(X=G.data)&&void 0!==X&&X.fulfillmentOfferings?G:{data:{fulfillmentOfferings:null==G||null===($=G.data)||void 0===$||null===($=$.availableFulfillmentTypes)||void 0===$?void 0:$.fulfillmentOfferings}},e.abrupt("return",H);case 36:return e.prev=36,e.t0=e.catch(26),Boolean(null===e.t0||void 0===e.t0||null===(J=e.t0.errors)||void 0===J||null===(J=J.filter((function(e){return"postalCode"===(null==e?void 0:e.field)})))||void 0===J?void 0:J.length)&&n({type:y.f,payload:{postalCode:""}}),n((0,d.u)({service:I,error:e.t0})),e.abrupt("return",e.t0);case 42:return e.abrupt("return",window.NikeShop.getFulfillmentOfferingsCartReviews({appName:r,cloudStack:t,email:m,isSearch:h,postalCode:E,offeringTypes:P}));case 43:case"end":return e.stop()}}),e,null,[[26,36]])})));return function(r){return e.apply(this,arguments)}}()}var h=t(1946),O=t(4208),C="kpsdk-ready";function k(){return P.apply(this,arguments)}function P(){return P=(0,n.A)(i().mark((function e(){var r,t,o,l=this,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},o=function(){var e=(0,n.A)(i().mark((function e(r){var t,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.internalStore.dispatch(b(r));case 2:return o=e.sent,(0,h.A)((0,O.A)(null===(t=l.get())||void 0===t||null===(t=t.events)||void 0===t?void 0:t.sharedDataUpdated,{bubbles:!1,detail:{offeringItems:null===(n=l.get())||void 0===n?void 0:n.offeringItems}})),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),window.KPSDK&&(null===(r=window.KPSDK)||void 0===r||!r.isReady())){e.next=8;break}return e.next=5,o(t);case 5:return e.abrupt("return",e.sent);case 8:window.addEventListener(C,(0,n.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}},9422:(e,r,t)=>{t.d(r,{u:()=>a});var n=t(8578),o=t(8900),i=t(1630),l=function(e){var r=e.service,t=e.message,n=e.crcCode,i=e.data,l=e.code,a=e.field,u=e.itemId;return{type:o.Oh,meta:{service:r},error:!0,payload:{message:t,crcCode:n,data:i,code:l,field:a,itemId:u}}},a=function(e){var r=e.service,t=e.error,a=e.response;return function(e,u){var c=t.errors,d=t.data;return c&&c.length?c.forEach((function(c){var s=c.message,f=c.crcCode,p=c.code,v=c.field;if(f&&p!==i.lU){var y,g;if(r===n.CN)return e(function(e){var r=e.error,t=e.crcCode,o=e.data,i=e.code;return{type:n.y3,meta:{service:n.CN},error:!0,payload:{error:r,crcCode:t,data:o,code:i}}}({code:p,error:{message:s,field:v},crcCode:f})),a;var m=u(),w=null===(y=m[o.Zl])||void 0===y||null===(y=y.normalized)||void 0===y||null===(y=y.result)||void 0===y?void 0:y.cart,b=(null===(g=m[o.Zl])||void 0===g||null===(g=g.normalized)||void 0===g||null===(g=g.cart)||void 0===g||null===(g=g[w])||void 0===g?void 0:g.items)||[],h=b[1===b.length?0:null==v?void 0:v.split("/")[2]];return e(l({service:r,code:p,crcCode:f,field:v,itemId:h,data:d,message:s}))}return p===i.lU?e({type:i.lU,payload:c}):e({type:"UNKNOWN_ERROR",payload:{service:r,error:t}})})):e(l({service:r,message:(null==t?void 0:t.message)||"Unknown failure",code:null==t?void 0:t.code,crcCode:null==t?void 0:t.crcCode,data:d}))}}}}]);
//# sourceMappingURL=getFulfillmentOfferings.chunk.33c4d3.js.map