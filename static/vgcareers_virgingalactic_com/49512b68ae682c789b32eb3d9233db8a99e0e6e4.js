define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-global-search-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"globalSearchV3",ddoKeyEvent:"globalSearchEventV3",landingpageddoKey:"getBusinessRules",ddoKeyMOSSEARCH:"globalSearchMOSTitles",ddoKeyGlobalSearchConfig:"globalSearchConfig",ddoKeyAgp:"getAgpMetaData",ddoKeyEagerLoad:"eagerLoadRefineSearch"}},t.globalSearchConfig={globalSearchFeature:{mobileSearch:!0,militarySearch:!1,mobileSearchWithHeaderIcon:!1}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e,this.params={}}return e.prototype.getSearchResults=function(e,t,o){var i=this.params;return o&&o.searchValue&&(delete i.field,delete i.sub_field,i.keywords=o.searchValue,i.category="category",i.location="location"),o&&o.condition&&o.condition.length&&(i.condition=o.condition),"globalSearchV3"==t&&(i.field="category",i.sub_field="internalCategoryId",i.location_size=2,i.category_size=2,i.job_size=3),this.commonService.getDDO(e,t,i).then(function(e){var o=e[t];if(o.jobLocations&&o.jobLocations.locations){var i=o.jobLocations.locations,a={};for(var r in i){var s=[];if(i.hasOwnProperty(r)){var n=i[r];for(var c in n){var l=n[c];l.location=l.name,l.field=r,s.push(l)}}a[r]=s}o[t]={locations:a}}return o})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getMOSSearchResults=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDOrequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.GlobalSearchService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-global-search-config","./ph-global-search-service"],function(e,t,o,i,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=".ph-header-search-icon",c=".ph-a11y-search-box, input",l=["allCategories","suggestedJobs","suggestedLocations","suggestedCategories","suggestedRecentSearches","suggestedKeywords"],h=function(e){function t(t,o,i,a,r,s){var c=e.call(this,t,o,h.elementTag)||this;return c.element=t,c.commonService=o,c.globalSearchService=i,c.eventAggregator=a,c.localStorage=r,c.WidgetConfig=s,c.placeholderText="Enter job title",c.showTitle=!0,c.showCaption=!0,c.searchValue="",c.arrowNavigation=!0,c.mosVisibleCategories=!1,c.isEmptyredirection=!1,c.reloadOnClear=!1,c.checkValidation=!1,c.searchUrl="search-results",c.isLandingPage=0,c.categoryColumnCount=2,c.inlineSearch=!0,c.preFillSearchedKey=!0,c.showDropDown=!1,c.showAllJobCategories=!0,c.showJobSuggestions=!0,c.showRecentSearches=!0,c.isDisabled=!0,c.recentlySearchedKeys=c.localStorage.getItem("globalSearch"),c.recentSearchStorage=[],c.itemSBHasFocus=!1,c.isEnterClick=!0,c.keywordsSearched=[],c.suggestedJobResults=[],c.suggestedJobResultsNames=[],c.suggestedMOSKeywords=[],c.gsFeature={},c.isMobileEnabled=!1,c.isMilitarySearch=!1,c.isMOSSearchEnabled=!0,c.isMOSClick=!1,c.mosCode="",c.showError=!1,c.suggestedKeywords=[],c.copyMOSKeywords=[],c.gsClrTxt=0,c.isSearchInFocus=!1,c.subscriptions=[],c.resultsUpdated=!1,c.searchBoxBackdrop=!1,c.isHeadSearchEnabled=!1,c.enableSuggestionResults=[],c.agpData={},c.avoidInitialValueChanged=!1,c.allSuggestions=c.getAllJobSuggestions(),c.handleInputFocus=function(e){if(c.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){c.element.firstElementChild.classList.add("ph-mobile-search-enabled");var t=e&&e.target&&e.target.closest(".ph-search-group"),o=c.element.querySelector(".form-group");if(t&&o&&c.isMobileEnabled&&(o.classList.contains("ph-mobile-search")||o.classList.add("ph-mobile-search"),t.classList.contains("ph-mobile-search")||t.classList.add("ph-mobile-search")),document.body.scrollTop=0,document.body.style.overflow="hidden",c.element.querySelector(n)&&c.gsFeature.mobileSearchWithHeaderIcon){c.isHeadSearchEnabled=!0;var i=c.element.querySelector("input.ph-input-search");i&&i.focus()}}},c}return __extends(t,e),h=t,t.prototype.getAllJobSuggestions=function(){this.showDropDown=!1;var e=this.isFull;return{show:null,updateShow:function(){var t={jobs:e(this.jobs),locations:e(this.locations),categories:e(this.categories),keywords:e(this.keywords),searched:e(this.searched),all:!1};for(var o in t)if(t.hasOwnProperty(o)&&1==t[o]){t.all=!0;break}return t},jobs:null,locations:null,categories:null,keywords:null,searched:null,boundaries:null}},t.prototype.created=function(){this.showDropDown=!1,this.fetchResultsConfig()},t.prototype.attached=function(){var t=this;if(e.prototype.attached.call(this),!this.hasFeature&&!this.hasFeature("auto-complete","a11y")){var o=this.handleActionOutsideScope.bind(this);document.addEventListener("mouseup",o,!1),document.addEventListener("keyup",this.keyUpCallback.bind(this),!1)}if(this.isMilitarySearch=!(!this.element||!this.element.getAttribute("ph-mos-search")),this.gsFeature=this.commonService.getSiteSettings("globalSearchFeature")||{},this.isMOSSearchEnabled=this.isMilitarySearch||this.gsFeature.militarySearch,2==this.categoryColumnCount&&this.gsFeature&&this.gsFeature.categoryColumnCount&&(this.categoryColumnCount=this.gsFeature.categoryColumnCount),this.isDisabled=!!this.isMilitarySearch||this.checkValidation,this.preFillSearchedKey&&(this.searchValue=e.prototype.getSearchKeyword.call(this)||""),this.isLandingPage&&(this.rk=this.rk?this.rk:this.commonService.phenomAppManager.getSessionParams("rk"),this.rk&&this.rk.length>0)){var i={},a={};return a.landingPageKeys=[this.rk],i.pageIdentifier=a,this.globalSearchService.getLandingpageKey(h.elementTag,r.WidgetConfig[h.version].landingpageddoKey,i).then(function(e){e&&e.data&&e.data[t.rk]&&(t.condition=e.data[t.rk].condition)})}var s=this.commonService.getSiteSettings("globalSearchFeature");s&&Object.keys(s).length&&s.mobileSearch&&setTimeout(function(){window.addEventListener("resize",function(){t.eventAggregator.publish("globalsearchv3resize",{})}),t.handleSearchOnWindowResize()},500),this.subscriptions.push(this.eventAggregator.subscribe("globalsearchv3resize",function(e){t.handleSearchOnWindowResize()})),setTimeout(function(){var e=t.element.querySelector(c);e&&e.addEventListener("focus",function(){t.searchBoxBackdrop=!0})},100),this.fetchAgpFilterBasedJobs()},t.prototype.fetchAgpFilterBasedJobs=function(){var e=this.commonService.getCachedDDO(r.WidgetConfig[h.version][h.ddoKeyAgp]),t=this.commonService.getCachedDDO(r.WidgetConfig[h.version][h.ddoKeyEagerLoad]);if(e&&e.data&&e.data.lpKeyData&&t){this.agpData={totalHits:t.totalHits,bannerText:e.data.lpKeyData.bannerText};var o=window.location.pathname;o&&(this.searchUrl=o.replace("/",""))}},t.prototype.fetchResultsConfig=function(){var e=this;this.globalSearchService.makeDDOrequest(h.elementTag,r.WidgetConfig[h.version][h.ddoKeyGlobalSearchConfig],{}).then(function(t){t&&t.data&&t.data.configured?e.enableSuggestionResults=t.data.data||[]:e.enableSuggestionResults=l},function(t){e.enableSuggestionResults=l,new Error(t)})},t.prototype.isSuggestionVisible=function(e){return-1==this.enableSuggestionResults.indexOf(e)},t.prototype.handleSearchOnWindowResize=function(){var e=document.querySelector(n),t=window.innerWidth;if(e&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon)this.isMobileEnabled=!0,t<=767?e.addEventListener("click",this.handleInputFocus):(this.isMobileEnabled=!1,e.removeEventListener("click",this.handleInputFocus),this.clearBackdrop());else if(t<=767){this.isMobileEnabled=!0;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].addEventListener("focusin",this.handleInputFocus)}else{this.isMobileEnabled=!1;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].removeEventListener("focusin",this.handleInputFocus);this.clearBackdrop()}},t.prototype.handleSelection=function(e){if(this.inlineSearch)for(var t=e.target;t!=this;){if("A"==t.nodeName){var o=t.getAttribute("data-option-title");return void(o?this.searchValue=o:console.warn("value not found"))}t=t.parentNode}},t.prototype.handleActionOutsideScope=function(e){var t=e.target;if(13===e.keyCode||void 0==e.keyCode){for(var o=!0,i=void 0;t;)if(t=t.parentElement,i=t&&t.className){if(null==t||-1==i.indexOf("phs-global-search"))o=!0;else if(i.indexOf("phs-global-search")>=0){o=!1;break}}else t||(o=!0);o&&this.handleBlur()}else 27!=e.keyCode&&9!=e.keyCode||this.handleBlur()},t.prototype.handleBlur=function(){this.showDropDown=this.showAllJobCategories=this.showJobSuggestions=!1},t.prototype.handleSuggestedKeysArrowKeysData=function(){function e(){return t=document.querySelectorAll(".phs-keyword-suggestions li a"),o=t.length-1,i>=o?i=o:i<0&&(i=0),t[i]}var t,o,i=-1;return{next:function(){return i+=1,e()},prev:function(){return i-=1,e()}}},t.prototype.handleCategoryArrowKeysData=function(){function e(e){a=0==e&&0==a?s:0,i=o==i+1?0:i+1,s=t[i]?t[i].length-1:s}var t=this.allJobCategories,o=t.length,i=0,a=-1,r=1,s=t[i].length-1;return{next:function(){return r=1,a==s?e(r):a++,{column:i,delta:a}},prev:function(){return r=0,0==a?e(r):a--,{column:i,delta:a}},reset:function(){a=r?a-1:a+1}}},t.prototype.searchValueChanged=function(t){var o=e.prototype.getSearchKeyword.call(this);if(this.preFillSearchedKey&&!this.avoidInitialValueChanged&&this.searchValue==o)return void(this.avoidInitialValueChanged=!0);var i=this,a=i.searchValue||"",r=a&&a.length>0;r&&(i.showDropDown=!0),i.showDropDown&&(r?(i.showAllJobCategories||i.showJobSuggestions)&&(this.isMilitarySearch?(this.fetchMilitaryJobSuggestions(),this.mosVisibleCategories&&i.fetchJobSuggestions()):i.fetchJobSuggestions()):i.fetchJobCategories()),i.isDisabled=!r},t.prototype.handleCategoryOptions=function(e,t){var o,i;switch(e.keyCode){case 37:case 39:break;case 38:this.arrowNavigation&&(i=t.prev(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus());break;case 40:this.arrowNavigation&&(i=t.next(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus())}},t.prototype.handleSuggestedKeyOptions=function(e,t){var o;switch(e.keyCode){case 38:this.arrowNavigation&&(o=t.prev())&&o.focus();break;case 40:this.arrowNavigation&&(o=t.next())&&o.focus()}},t.prototype.keyUpCallback=function(e){if(9===e.keyCode){var t=document.querySelectorAll(".ph-suggestion-focus-block");if(t.length)for(var o=0,i=t;o<i.length;o++){var a=i[o],r=a&&a.contains(document.activeElement);r?this.itemSBHasFocus=!0:(this.handleBlur(),this.itemSBHasFocus=!1)}}if(27===e.keyCode)return this.handleBlur(),!0},t.prototype.arrowKeyUp=function(e){var t=null;if(13===e.keyCode&&!1===this.itemSBHasFocus){var o=e.target&&e.target.href||"";""===o&&this.handleSubmitClick(o)}else 1==this.showJobSuggestions?(t=this.allSuggestions.boundaries,this.handleSuggestedKeyOptions(e,t)):1==this.showAllJobCategories&&(t=this.allJobCategories.boundaries,this.handleCategoryOptions(e,t))},t.prototype.handleItemFocus=function(e){switch(e.type){case"focus":console.info("hello")}},t.prototype.clearBackdrop=function(e){var t=this.element.querySelectorAll(".ph-search-group"),o=this.element.querySelector(".form-group"),i=this.element.querySelector(".ph-mobile-search-enabled");if(t&&o&&i){i.classList.remove("ph-mobile-search-enabled"),o.classList.contains("ph-mobile-search")&&o.classList.remove("ph-mobile-search");for(var a=0;a<t.length;a++)t[a].classList.contains("ph-mobile-search")&&t[a].classList.remove("ph-mobile-search");if(this.showDropDown=!1,document.body.style.overflow="",e&&e.target){var r=document.querySelector(n),s=this.element.querySelector(".phs-search-submit");r&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon?s=r:document.body.style.overflow="initial",s&&s.focus()}}},t.prototype.handleFocus=function(e){var t=this,o=t.searchValue||"";switch(e.type){case"focus":o.length>0?t.isMilitarySearch?t.fetchMilitaryJobSuggestions():t.fetchJobSuggestions():t.isMilitarySearch?this.mosVisibleCategories&&t.isMilitarySearch&&t.fetchJobCategories():t.fetchJobCategories()}var i=document.querySelector("#searchSuggest").classList;i.contains("hide")&&(i.remove("hide"),i.add("show"))},t.prototype.isFull=function(e){return null!=e&&"object"==typeof e&&Object.keys(e).length>0},t.prototype.clearSearch=function(e){var t=this;if(this.reloadOnClear){var o=window.location.origin+window.location.pathname;window.location.assign(o)}else this.isDisabled=!0,this.showDropDown=!1,this.searchValue="",this.gsClrTxt=1,this.element.querySelector(c)&&(this.element.querySelector(c).focus(),setTimeout(function(){t.searchBoxBackdrop=!0},100))},t.prototype.isEmpty=function(e){return!e||0==e.length},t.prototype.fetchJobSuggestions=function(){var e=this,t={},o=this.allSuggestions;t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition);var i=this.fetchMilitaryJobSuggestions(!0),a=this.globalSearchService.getSearchResults(h.elementTag,r.WidgetConfig[h.version][h.ddoKeyEvent],t).then(function(t){if(e.suggestedJobs=t.jobTitles.data.titles,e.suggestedKeywords=t.jobTitles.data.suggestions||[],o.keywords=e.suggestedKeywords,e.suggestedJobs){for(var i=0;i<e.suggestedJobs.length;i++){var a=e.suggestedJobs[i].title.replace(/<em>/g,"");a=a.replace(/<\/em>/g,"")}o.jobs=e.suggestedJobs}if(t.jobLocations&&t.jobLocations.locations){if(e.suggestedLocations=[],t.jobLocations.locations.city)for(var r=0;r<t.jobLocations.locations.city.length;r++)e.suggestedLocations.push(t.jobLocations.locations.city[r]);if(t.jobLocations.locations.country)for(var r=0;r<t.jobLocations.locations.country.length;r++)e.suggestedLocations.push(t.jobLocations.locations.country[r]);if(t.jobLocations.locations.state)for(var r=0;r<t.jobLocations.locations.state.length;r++)e.suggestedLocations.push(t.jobLocations.locations.state[r]);o.locations=t.jobLocations.locations}if(e.suggestedCategories=t.jobCategories.data.agg,e.suggestedCategories){for(var r=0;r<e.suggestedCategories.length;r++)e.suggestedCategories[r].key=e.suggestedCategories[r].category;o.categories=e.suggestedCategories}return e.populateRecentSearches(),document.activeElement===e.element.querySelector(c)&&(e.showDropDown=!0),e.showAllJobCategories=!1,e.showJobSuggestions=!0,o.show=o.updateShow(),e.isEmpty(e.suggestedJobs)&&e.isEmpty(e.suggestedLocations)&&e.isEmpty(e.suggestedCategories)&&!(e.keywordsSearched&&e.keywordsSearched.length>0)&&e.isEmpty(e.suggestedKeywords)||(e.element.querySelector(".job-filter"),e.element.querySelector(".phs-keywords"),e.element.querySelectorAll(".phs-keyword-suggestions li")),e.suggestedJobResults=[],e.suggestedJobResultsNames.length&&e.suggestedJobResultsNames.map(function(t){e.suggestedJobResults="keywordsSearched"==t?e.suggestedJobResults.concat(e[t].slice(0,3)):e.suggestedJobResults.concat(e[t])}),e.allSuggestions.searched&&(e.suggestedJobResults=e.suggestedJobResults.concat(e.allSuggestions.searched.slice(0,3))),e.suggestedJobResults},function(e){new Error(e)});return Promise.all([a,i]).then(function(t){return e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),t[0].concat(t[1])})},t.prototype.setMOSKeyword=function(e,t){this.setMOSKeywordValue(e,t),t&&"click"==t.type&&this.handleSubmitClick()},t.prototype.setMOSKeywordValue=function(e,t){if(e){var o="";e.title&&(o=e.title),this.isDisabled=!1,this.searchValue=o.replace(/<(?:.|\n)*?>/gm,""),this.mosCode=e.mos_code}},t.prototype.setMOSFocusField=function(e){-1==e&&(e=0);var t=!1;if(!this.isMOSClick&&this.searchValue.length&&this.suggestedMOSKeywords&&this.suggestedMOSKeywords.length){this.showDropDown=!1;for(var o=0;o<this.suggestedMOSKeywords.length;o++)this.searchValue==this.suggestedMOSKeywords[o]&&(t=!0);t||(e=e||0==e?e:0,this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].title&&this.suggestedMOSKeywords[e].title.length&&(this.searchValue=this.suggestedMOSKeywords[e].title),this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].mos_code&&(this.mosCode=this.suggestedMOSKeywords[e].mos_code))}},t.prototype.fetchMilitaryJobSuggestions=function(e){var t=this;if(!this.isMOSSearchEnabled)return new Promise(function(e,t){e([])});"undefined"!=typeof event&&"object"==typeof event&&(this.focusedElement=event&&event.target),this.isMOSClick=!1;var o=(this.allSuggestions,{});return o.size=3,o.keywords=this.searchValue,this.isMilitarySearch&&(o.size=5),this.condition&&this.condition.length>0&&(o.condition=this.condition),this.globalSearchService.getMOSSearchResults(h.elementTag,r.WidgetConfig[h.version][h.ddoKeyMOSSEARCH],o).then(function(o){return o=o&&o.data||{},o&&o.results&&o.results.length?(t.suggestedMOSKeywords=o.results,t.isDisabled=!1):o.searchConfig&&(t.suggestedMOSKeywords=[],t.isDisabled=!0,t.isMOSSearchEnabled=o.searchConfig.isMOSSearchEnabled),document.activeElement===t.element.querySelector(c)&&(t.showDropDown=!0),e||(t.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3)),t.suggestedMOSKeywords})},t.prototype.fetchJobCategories=function(){var e=this,t={};return t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition),this.globalSearchService.getSearchResults(h.elementTag,r.WidgetConfig[h.version][h.ddoKey],t).then(function(t){return t.data.category&&t.data.category.forEach(function(e){e.key||(e.key=e.category)}),document.activeElement===e.element.querySelector(c)&&(e.showDropDown=!0),e.populateRecentSearches(),e.allJobCategories=e.singleArrayChunk(t.data.category,e.categoryColumnCount),e.showAllJobCategories=!0,e.showJobSuggestions=!1,e.suggestedJobResults=[],e.keywordsSearched=e.keywordsSearched.slice(0,3),e.suggestedJobResults=e.suggestedJobResults.concat(t.data.category),e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),e.allJobCategories},function(e){new Error(e)})},t.prototype.onError=function(e){i.logger.debug("ph-global-search: error..."+e)},t.prototype.chunk=function(e,t){var o,i=[],a=t,r=Math.floor(e.length/a),s=e.length%a,n=0;for(s>0&&(r+=1);a;)o=1==a?e.length:n+r,i.push(e.slice(n,o)),n=o,a--;return i},t.prototype.handleSubmitClick=function(t){var o=this;if(this.isMilitarySearch){if(!this.suggestedMOSKeywords.length&&!this.isEmptyredirection)return;if(this.suggestedMOSKeywords.length){var a=!1;this.suggestedMOSKeywords.forEach(function(e){e.title==o.searchValue&&(!o.mosCode&&e.mos_code&&(o.mosCode=e.mos_code),a=!0)}),a||(this.searchValue=this.suggestedMOSKeywords[0].title,this.mosCode=this.suggestedMOSKeywords[0].mos_code)}}if(this.showError=!1,this.searchValue&&this.isEnterClick||!this.checkValidation){this.checkValidation=!1,this.isEnterClick=!1,this.mosCode||(this.updateLocalStrWithRecentSearchDetails(this.searchValue,!0),this.storeKeywordsForRecommendation());var r={};r.trait6=this.searchValue;try{this.commonService.processTrackingEvent("page_search",void 0,r)}catch(e){i.logger.debug(e.message)}var s=void 0,n="";if(this.mosCode&&(n="&ms=true&moscode="+this.mosCode),"search-results"==this.searchUrl)s=e.prototype.getUrl.call(this,null,this.searchUrl,{},"keywords="+this.searchValue+n);else{var c=-1==this.searchUrl.indexOf("?")?"?keywords=":"&keywords=";s=this.commonService.getBaseUrl()+this.searchUrl+c+this.searchValue+n}window.location.assign(s)}else this.showError=!0},t.prototype.updateLocalStorage=function(){var e=this.localStorage.getItem("globalSearch")||[];-1==e.indexOf(this.searchValue)&&(e.push(this.searchValue),this.localStorage.setItem("globalSearch",e)),this.recentSearchStorage=e},t.prototype.populateRecentSearches=function(){null!=this.commonService.getSpecificTrackCtx(h.globalSearchKeywords)?(this.allSuggestions.searched=this.commonService.getSpecificTrackCtx(h.globalSearchKeywords),this.showRecentSearches=!0):this.showRecentSearches=!1},t.prototype.getCategoryUrl=function(e){return"/us/en/c/"+e.toLowerCase()+"-jobs"},t.prototype.updateLocalStrWithRecentSearchDetails=function(e,t){if(!0===t||!1===this.inlineSearch){null!=e&&e.length>0&&(this.searchValue=e);var o=[];null!=this.commonService.getSpecificTrackCtx(h.globalSearchKeywords)&&(o=this.commonService.getSpecificTrackCtx(h.globalSearchKeywords)),this.searchValue&&this.searchValue.length&&(-1==o.indexOf(this.searchValue)?o.unshift(this.searchValue):(o.splice(o.indexOf(this.searchValue),1),o.unshift(this.searchValue)),this.commonService.setSpecificTrackCtx(h.globalSearchKeywords,o))}return!0},t.prototype.storeKeywordsForRecommendation=function(){var e=[];if(null!=this.commonService.getSpecificTrackCtx(h.searchKeywords)&&(e=this.commonService.getSpecificTrackCtx(h.searchKeywords)),this.searchValue&&this.searchValue.length){if(null!=e){for(var t in e)if(e[t].keyword==this.searchValue){e.splice(t,1);break}}else e=[];e.unshift({keyword:this.searchValue,timeStamp:(new Date).toUTCString()}),this.commonService.setSpecificTrackCtx(h.searchKeywords,e)}},t.prototype.detached=function(){if(this.element.firstElementChild&&this.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){window.removeEventListener("resize",this.handleSearchOnWindowResize);for(var e=this.element.querySelectorAll("input.ph-input-search"),t=0;t<e.length;t++)e[t].removeEventListener("focusin",this.handleInputFocus)}this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getWidgetBundleValue=function(e,t,o){return this.widgetBundle&&this.widgetBundle[e]?this.widgetBundle[e]:o?o.getAttribute(t):void 0},t.prototype.singleArrayChunk=function(e,t){window.innerWidth<=767&&(t=1);for(var o=[],i=[],a=Math.floor(e.length/t),r=e.length%t,s=0;s<t;s++){for(var n=[],c=0;c<a;c++){var l=c+s*a;n.push(e[l])}r>=1&&(n.push(e[e.length-(s+1)]),r-=1),o.push(n)}if(o.length){for(var h=0;h<o[0].length;h++)for(var d=0;d<o.length;d++)o[d][h]&&i.push(o[d][h]);o=i}return o},t.prototype.setKeywordSuggested=function(e){this.suggestedJobResultsNames=e},t.prototype.getFieldOptions=function(e){var t=this;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.fetchMilitaryJobSuggestions():this.fetchJobSuggestions():(this.isSearchInFocus=!0,this.isMilitarySearch?(this.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3),[]):this.fetchJobCategories())}},t.prototype.setFieldValue=function(e,t){switch(e){case"typehead":if(this.searchValue.length){if(this.isMilitarySearch){if(this.suggestedMOSKeywords.length&&this.suggestedMOSKeywords[t]){this.setMOSKeyword(this.suggestedMOSKeywords[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}else if(this.suggestedMOSKeywords.length&&-1==t){this.setMOSKeyword(this.suggestedMOSKeywords[0]),this.mosCode=this.suggestedMOSKeywords[0].mos_code,this.isMOSClick=!0;var o=this.element.querySelectorAll(".phs-suggested-mos-keywords-list li a");this.fireClick(o[0])}}else if(this.suggestedJobResults.length&&this.suggestedJobResults[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.isMilitarySearch){if(this.allSuggestions.searched.length&&this.allSuggestions.searched[t]){this.setMOSKeyword(this.allSuggestions.searched[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.allJobCategories.length&&this.allJobCategories[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}},t.prototype.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},t.prototype.getActiveIndex=function(e){var t=this,o=-1;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.suggestedMOSKeywords.forEach(function(e,i){e.title==t.searchValue&&(o=i)}):this.suggestedJobResults.forEach(function(e,i){var a=e&&e.key||e&&e.category;a&&a==t.searchValue&&(o=i)}):this.allJobCategories&&this.allJobCategories.length&&this.allJobCategories.forEach(function(e,i){e.key==t.searchValue&&(o=i)}),o}return o},t.prototype.clearFieldValue=function(e){},t.prototype.getActiveIndexOnBlur=function(e,t){this.gsClrTxt=0,this.isSearchInFocus=!1,this.element.querySelector(c)!=document.activeElement&&(this.searchBoxBackdrop=!1),this.showDropDown=!1,this.isMilitarySearch&&this.setMOSFocusField(e)},t.prototype.setFocusField=function(e,t){this.focusedField=e,t?(this.focusedField=void 0,this.showDropDown=!1):this.isMilitarySearch&&this.searchValue.length>0&&0==this.suggestedMOSKeywords.length?this.handleBlur():document.activeElement===this.element.querySelector(c)&&(this.showDropDown=!0)},t.prototype.getUrl=function(t,o,i,a,r){if(this.partnerUrl){var s=this.commonService.getParam("partnersUrl")||"",n=e.prototype.getUrl.call(this,t,o,i,a,r);return n=n.replace(this.commonService.getBaseUrl(),s)}if("job"==o||"search-results"==this.searchUrl||"category"==o){if(this.rk&&this.rk.length&&"job"!=o&&(a="&rk="+this.rk),"category"==o&&"search-results"!=this.searchUrl){a=a+"&category="+encodeURIComponent(i.key||i.name||"");var c=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),l=-1==this.searchUrl.indexOf("?")?"?":"&",n=this.commonService.getBaseUrl()+this.searchUrl+l+c;return n}return e.prototype.getUrl.call(this,t,o,i,a,r)}var c=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),l=-1==this.searchUrl.indexOf("?")?"?":"&",n=this.commonService.getBaseUrl()+this.searchUrl+l+c;return n},t.version="v3",t.ddoKey="ddoKey",t.ddoKeyEvent="ddoKeyEvent",t.ddoKeyMOSSEARCH="ddoKeyMOSSEARCH",t.ddoKeyGlobalSearchConfig="ddoKeyGlobalSearchConfig",t.elementTag="ph-global-search-"+h.version,t.globalSearchKeywords="globalSearch_keywords",t.searchKeywords="keywords",t.ddoKeyAgp="ddoKeyAgp",t.ddoKeyEagerLoad="ddoKeyEagerLoad",__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"placeholderText",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showCaption",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"searchValue",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"arrowNavigation",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"mosVisibleCategories",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"isEmptyredirection",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"reloadOnClear",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"checkValidation",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"searchUrl",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"isLandingPage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"rk",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"categoryColumnCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"partnerUrl",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"inlineSearch",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"preFillSearchedKey",void 0),t=h=__decorate([o.customElement(h.elementTag),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(d=void 0!==i.CommonService&&i.CommonService)&&d||Object,s.GlobalSearchService,a.EventAggregator,"function"==typeof(p=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&p||Object,Object])],t);var h,d,p}(i.PhenomWidget);t.GlobalSearch=h}),define("text!v3/ph-global-search.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-social-share-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobDetails",ddoKey2:"googleShortUrl",ddoKeyShareDetails:"getSocialSharingDetails",ddoShareOption:"jobsharewidgetsettings",ddoBaseUrls:"baseUrls"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share-service",["require","exports","aurelia-framework","ph-common","./ph-social-share-config"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,o){this.commonService=e,this.WidgetConfig=t,this.serviceRequest=o,this.hashtagsText=""}return e.prototype.getShortUrl=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e.googleShortUrl&&e.googleShortUrl.status&&"failed"==e.googleShortUrl.status?"#":encodeURIComponent(e.googleShortUrl.shortUrl)})},e.prototype.getSocialUrls=function(e,t,o,i){var r=this;if(this.jobDetails=t,"internal"!=this.commonService.getSiteType()){var s=this.commonService.getUrl("job",t);return s=this.removeLastCharIfExists(s,"/"),s+="/?",this.getShareUrl(e,"googleShortUrl",s,o).then(function(e){return e})}var n={jobSeqNo:t.jobSeqNo,jobId:t.jobId,medium:"social-share",campaign:"social",source:o.name};i&&(n.siteType=i);var c=a.WidgetConfig.v3.ddoKeyShareDetails;return this.commonService.getDDO(e,c,n).then(function(t){if(t&&t[c]&&t[c].status&&"SUCCESS"==t[c].status.toUpperCase()&&t[c].data&&t[c].data.jdUrl){var i=t[c].data.jdUrl;return i=r.removeLastCharIfExists(i,"/"),i+="/?",
t[c].data.referrerToken&&(i+="referrerToken="+t[c].data.referrerToken+"&"),r.getShareUrl(e,"googleShortUrl",i,o).then(function(e){return e})}return console.info("Error getting url"),"#"})},e.prototype.getShareUrl=function(e,t,o,i){var a=this;o+="utm_source="+i.name+"&utm_campaign=job-share&utm_medium=social-share";var r={url:o};return"whatsapp"!=i.name?this.getShortUrl(e,t,r).then(function(e){return a.updateReqParamsToUrl(i,e)}):new Promise(function(e,t){e(a.updateReqParamsToUrl(i,a.shareInfoText+" "+o))})},e.prototype.updateReqParamsToUrl=function(e,t){var o=""+e.baseUrl+t;if(e.settings.params){var i=e.settings.params;i.hasOwnProperty("media")&&(this.tagValue=this.getTagValue());for(var a in i)i.hasOwnProperty(a)&&this[i[a]]&&(o+="&"+a+"="+this[i[a]]);return o}return o},e.prototype.removeLastCharIfExists=function(e,t){return e.length&&e[e.length-1]==t&&(e=e.substring(0,e.length-1)),e},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e?e[t]:{}})},e.prototype.getTagValue=function(){return document.querySelector("meta[property='og:image']").content},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object,Object,"function"==typeof(r=void 0!==i.ServiceRequest&&i.ServiceRequest)&&r||Object])],e);var t,r}();t.SocialShareService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share",["require","exports","aurelia-framework","ph-common","./ph-social-share-config","./ph-social-share-service","aurelia-event-aggregator"],function(e,t,o,i,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-social-share-v3",c=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.element=t,r.commonService=o,r.socialShareService=i,r.eventAggregator=a,r.currentJobObj={},r.showMailTo=!1,r.isErrorMsgReqd=!1,r.isShareIcon=!0,r.isPopup=!1,r.showTitle=!0,r.detailObj={},r.loadingText="Loading ...",r.replaceJobSeqNo=!1,r.showCopySuccessMessage=!1,r.shareObj={},r.showErrorMsg=!1,r.sociaurl=[],r.showEmailView=!1,r.shareInfoText="Interesting Job Posting at {{category}}, {{location}}, {{title}}",r.isPopupOpened=!1,r.jobLink="",r.selectedPopup="",r.showCopySuccess=!1,r.isEmailClientEnabled=!1,r}return __extends(t,e),t.prototype.attached=function(){if(e.prototype.hideLoader.call(this),e.prototype.attached.call(this),this.fetchJobObj(),"e"==e.prototype.getQueryParam.call(this,"vt")&&(this.siteType="external"),this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.configureShare(),this.showMailTo){var t=encodeURIComponent(window.location.href);this.strMailtoProto="mailto:?subject=Check out this job!&body=Hi,%0A%0AI noticed a Job Opportunity at "+t+"%0A%0A"}},t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(o){(!t.jobSeqNo||o.jobSeqNo&&t.jobSeqNo!=o.jobSeqNo)&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo&&(o.jobSeqNo=o.jobId),t.currentJobObj=o,t.jobSeqNo=t.currentJobObj.jobSeqNo,t.category=t.currentJobObj.category)})},t.prototype.fetchJobObj=function(){Object.keys(this.detailObj)&&Object.keys(this.detailObj).length?this.currentJobObj=this.detailObj:this.currentJobObj=this.commonService.getCachedDDO("jobDetail"),this.currentJobObj&&this.currentJobObj.data&&(this.currentJobObj=this.currentJobObj.data.job,this.currentJobObj&&(this.jobSeqNo=this.currentJobObj.jobSeqNo,this.category=this.currentJobObj.category))},t.prototype.configureShare=function(){var t=this;try{this.shareOption=this.shareOption?JSON.parse(this.shareOption):{};var o=!0;this.shareOption&&this.shareOption.options&&this.shareOption.options.length||(o=!1,this.socialShareService.makeDDORequest(n,a.WidgetConfig.v3.ddoShareOption,{}).then(function(o){e.prototype.hideLoader.call(t),o&&o.data?(t.shareOption=o.data||{},t.shareOption.options=t.shareOption.options||[]):t.shareOption.options=[],t.checkEmailExists()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})),o&&this.checkEmailExists()}catch(e){}},t.prototype.checkEmailExists=function(){this.isShareEmailFound=this.shareOption.options.findIndex(function(e){return"email"==e.name}),this.isShareEmailFound=-1!=this.isShareEmailFound},t.prototype.closeShareJob=function(e,t){var o=this;t||this.isPopupOpened?(this.shareTimer&&clearTimeout(this.shareTimer),this.isShareIcon=!0,this.currentJobObj&&(this.currentJobObj.toggleOpen=!0)):(this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=setTimeout(function(){o.isShareIcon=!1,o.currentJobObj&&(o.currentJobObj.toggleOpen=!1)},300))},t.prototype.handlePopup=function(t){var o=this;this.widgetBundle.shareInfoText&&(this.shareInfoText=this.widgetBundle.shareInfoText),this.shareInfoText=this.shareInfoText.replace("{{categoryName}}","{{category}}"),this.socialShareService.shareInfoText=this.commonService.getTranslation(this.shareInfoText,this.currentJobObj,!0),this.socialShareService.shareInfoText=this.socialShareService.shareInfoText.replace(/%250A/g,"%0A"),this.socialShareService.hashtagsText=this.widgetBundle.hashtagsText,e.prototype.unhideLoader.call(this);var i={},a={};if(i.trait5=this.jobSeqNo,i.trait14=this.category,t.eventName&&this.commonService.processTrackingEvent(t.eventName,void 0,i),"email"==t.name)if(this.isEmailClientEnabled)this.handleEmailClientOrJob();else{this.showEmailView=!this.showEmailView,i.params={toggle:this.showEmailView};var r=document.querySelector('[as-element^="ph-email-job"]');if(r){if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var s=window.pageYOffset,c=this.commonService.getNearestSectionElemOffsetTop(r);s<c?this.commonService.smoothScroll(s,c,!0,30):this.commonService.smoothScroll(s,c,!1,30)}else r.scrollIntoView(!1);if(r.au&&r.au.controller&&r.au.controller.viewModel&&!r.au.controller.viewModel.isPopupReqd){var l=r.au.controller.viewModel,h=l.element.querySelector(".ph-a11y-email-job-heading");h&&h.focus()}}this.showEmailView&&e.prototype.raiseEvent.call(this,"show-email-job",{})}else"copylink"==t.name?this.handelCopyJobLink():(a=window.open("","",t.settings.popUpParams),this.isPopupOpened=!0,setTimeout(function(){o.isPopupOpened=!1},100));"email"!=t.name&&"copylink"!=t.name&&(a.document.body.innerHTML=this.loadingText,this.socialShareService.getSocialUrls(n,this.currentJobObj,t,this.siteType).then(function(t){e.prototype.hideLoader.call(o),a.location.href=t},function(t){new Error(t),e.prototype.hideLoader.call(o),o.handleError("")}))},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{"google-plus":"google-plus",facebook:"facebook",linkedin:"linkedin",twitter:"twitter",email:"share via mail",xing:"xing",pinterest:"pinterest",vk:"vk",whatsapp:"whatsapp",weibo:"weibo"}},t.prototype.handleEmailClientOrJob=function(){var t=this.widgetBundle.emailClientBody||"Check out this job:";try{t=decodeURIComponent(t)}catch(e){i.logger.error(e)}var o=this.widgetBundle.emailClientSubject||"{{title}} at {{companyName}}",a=this.commonService.getTranslation(o,this.currentJobObj),r=this.commonService.getTranslation(t,this.currentJobObj),s=e.prototype.getUrl.call(this,"","job",this.currentJobObj);s&&s.length&&(s=s.replace("/i/","/")),window.location.href="mailto:?subject="+encodeURIComponent(a)+"&body="+encodeURIComponent(r)+s},t.prototype.handelCopyJobLink=function(){this.jobLink=this.commonService.getUrl("job",this.currentJobObj),this.selectedPopup="copyLinkPopup";var t=this.element.querySelector(".ph-a11y-popup-selector"),o=this.element.querySelector(".ph-a11y-popup-selector"),i=this.element.querySelector("ph-a11y-copyLinkClose-popup");e.prototype.openDialogPopup.call(this,t,i,o),this.element.querySelector(".input-copy-link").value=this.jobLink},t.prototype.copyLink=function(){var e=this;this.element.querySelector(".input-copy-link").select(),document.execCommand("copy"),this.showCopySuccessMessage&&(this.showCopySuccess=!0,setTimeout(function(){e.showCopySuccess=!1},5e3))},t.prototype.copyLinkCancelAction=function(){this.showCopySuccess=!1,e.prototype.closeDialogPopup.call(this)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObj",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showMailTo",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"shareOption",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isShareIcon",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showTitle",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"detailObj",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadingText",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showCopySuccessMessage",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,r.SocialShareService,s.EventAggregator])],t);var c}(i.PhenomWidget);t.SocialShare=c}),define("text!v3/ph-social-share.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-social-share-v3/default/view.html",["module"],function(e){e.exports='<template>\n<div class="phs-share-job-area ph-widget-box" role="region" key-role="regionRole" aria-label="Social share" key-aria-label="socialShare">\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="widget-container">\n        <div class="phs-widget-heading">\n            <h2>\n                <ppc-content key="socialShareHeading" data-ph-at-id="heading-text">Share this Opportunity</ppc-content>\n            </h2>\n        </div>\n        <div class="content-block">\n            <ul data-ph-at-id="share-options-list">\n               \n                <li repeat.for="eachIndicator of shareOption">\n                    <a class="${eachIndicator}" click.trigger="handlePopup(eachIndicator)" aria-label="Share via ${eachIndicator}" key-aria-label="share${eachIndicator}"\n                        href="javascript:void(0)" data-ph-at-id="share-${eachIndicator}-link" title="Share via ${eachIndicator}"  \n                        key-title="share${eachIndicator}Title" target="_blank" blur.trigger="closeShareJob($event, true)">\n                        <i class="icon icon-${eachIndicator}"></i> ${widgetBundle[eachIndicator] | pht}\n                        <span class="sr-only">\n                            <ppc-content key="share${eachIndicator}Text" data-ph-at-id="share-${eachIndicator}s-text">  ${widgetBundle[eachIndicator] | pht}</ppc-content>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-consent-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-consent-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.ConsentPopupService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-consent-popup",["require","exports","aurelia-framework","ph-common","./ph-consent-popup-service"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-consent-popup-v1",s=function(e){function t(t,o,i){var a=e.call(this,t,o,r)||this;return a.element=t,a.consentPopupService=i,a.isDisabled=!1,a.showConsentPopup=!1,a.submitData=!1,a.hiddenOverflow=!1,a}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.widgetContext&&(this.widgetContext.triggerPopup=this.triggerConsentPopup.bind(this))},t.prototype.hasPopup=function(e,t){var o=t||this.element&&this.element.parentElement;return o&&e>0?o.classList&&o.classList.contains("modal-dialog")?o:this.hasPopup(e-1,o.parentElement):void 0},t.prototype.triggerConsentPopup=function(t){var o=this;this.parentPopup=this.hasPopup(20),document.body&&"hidden"==document.body.style.overflow&&(this.hiddenOverflow=!0,document.body&&(document.body.style.overflow="auto")),this.parentPopup&&(this.parentPopup.style.overflow="hidden"),this.showConsentPopup=!0,this.submitData=!!t,this.isButtonDisabled(),setTimeout(function(){var t=o.element.querySelector(".ph-a11y-popup-start-focus"),i=o.element.querySelector(".ph-a11y-popup-close-focus");o.element.addEventListener("keyup",o.handleEscape),e.prototype.openDialogPopup.call(o,"ph-a11y-modal-area",i,t,null,!0)},0)},t.prototype.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||this.closePopup()},t.prototype.closePopup=function(t){this.showConsentPopup=!1,e.prototype.closeDialogPopup.call(this),this.element.removeEventListener("keyup",this.handleEscape),t?e.prototype.trackWidgetClick.call(this,"pii-consent-submit",{}):e.prototype.trackWidgetClick.call(this,"pii-consent-done",{}),this.parentPopup&&(this.parentPopup.style.overflow="auto"),this.hiddenOverflow&&setTimeout(function(){document.body&&(document.body.style.overflow="hidden")},100)},t.prototype.triggerSubmitData=function(){this.widgetContext&&this.widgetContext.submit&&(this.widgetContext.submit(),this.closePopup(!0))},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.widgetContext.consentData&&this.widgetContext.consentData.length&&this.widgetContext.consentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)}),!this.isDisabled&&this.widgetContext.widgetRef&&(this.widgetContext.widgetRef.piiConsentError=!1)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"widgetContext",void 0),t=__decorate([o.customElement(r),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==i.CommonService&&i.CommonService)&&s||Object,a.ConsentPopupService])],t);var s}(i.PhenomWidget);t.ConsentPopup=s}),define("text!v1/ph-consent-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-consent-popup-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup",storeOneTrustCookieSession:"storeOneTrustCookieSession"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-cookie-popup-v2",n=window,c="top",l='[as-element^="ph-cookie-popup"] .ph-sticky-header',h="ph:gdpr:OptanonWrapperUpdated",d='[as-element*="header"] .ph-sticky-header, .header-layout .pcs-sticky-header ,.header-layout .ph-sticky-block-fixed',p={top:"cookie-popup-top",bottom:"cookie-popup-bottom"},u={C0001:"essential",1:"essential",C0002:"performance",2:"performance",C0003:"functional",3:"functional",C0004:"analytics",4:"analytics",C0005:"social",5:"social"},f={1:"essential",2:"functional",3:"analytics",4:"social",TA001:"essential",TA002:"functional",TA003:"analytics",TA004:"social"},g=function(e){function t(t,o,i,a,r,l){var d=e.call(this,t,o,s)||this;return d.element=t,d.commonService=o,d.cookiePopupService=i,d.cookieManager=a,d.eventAggregator=r,d.localStorageContext=l,d.doNotHide=!1,d.showDeclineButton=!0,d.showCookieSettingsButton=!1,d.showCookiePopup=!0,d.cookieValue="",d.position=c,d.isAccepted=!0,d.cookieType="",d.cookieWindowType="default",d.subscriptions=[],d.cookieCategoryConfig=u,d.trustArcCookieCategoryConfig=f,d.handleExternalCookie=function(e,t){t=t||{};var o=[],i=e.availOnAllowedCookies||[],a=t.groups||n.OnetrustActiveGroups,r=!0;if(a){a=a.split(",");for(var s=0;s<i.length;s++)if(i[s]&&-1===a.indexOf(i[s])){r=!1;break}d.cookieValue="d",r&&(d.cookieValue="a"),d.setCookie();var c={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var l=d.getEnabledCookies(a);o=d.getDisabledCookies(e.trackCookieMap.cookieMap,l),c.disabledCookies=o,c.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,l),d.deleteCareerSiteCookies(e,o),d.addOneTrustSessionData(e,o)}d.raiseActionEvent(h,c)}},d.handleTrustArcCookie=function(e,t){var o=t.data;if("string"==typeof o&&(o=JSON.parse(o)),"submit_preferences"==o.message||"remove_iframe"==o.message){var i=n.phApp.baseDomain||e.currentDomain;i=i.replace(/https?:\/\//g,"");var a=n.truste.cma.callApi("getGDPRConsentDecision",i),r=d.trustArcMappedGroups(a.consentDecision);d.handlingTrustArcUserConsent(e,r)}},d.handlingTrustArcUserConsent=function(e,t){for(var o=[],i=e.availOnAllowedCookies||[],a=!0,r=0;r<i.length;r++)if(i[r]&&-1===t.indexOf(i[r])){a=!1;break}d.cookieValue="d",a&&(d.cookieValue="a"),d.setCookie();var s={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var n=d.getTrustArcEnabledCookies(t);o=d.getDisabledCookies(e.trackCookieMap.cookieMap,n),s.disabledCookies=o,s.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,n),d.deleteCareerSiteCookies(e,o),d.addOneTrustSessionData(e,o)}d.raiseActionEvent(h,s)},d.trustArcMappedGroups=function(e){var t=[];return e.forEach(function(e){e&&t.push(e.toString())}),t},d}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("externalCookieConfig"),o=this.commonService.getSiteSettings("externalCookieTrustArcConfig"),i=this.commonService.getSiteSettings("ignoreCookiePages")||[],a=this.commonService.getPageName();if(-1===i.indexOf(a))return t?void this.initiateExternalCookie(t):o?void this.initiateExternalCookieTrustArc(o):void this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;if(!this.isExternalCookieEnabled||this.doNotHide){e.prototype.attached.call(this);var o=this.commonService.getSiteSettings("gdpr")||{};this.cookieType=o&&o.hasOwnProperty("cookieTypeV1")?o.cookieTypeV1:o.cookieType,this.cookieWindowType=o&&o.cookieWindowType||"default",this.position=o&&o.position||c,this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),o&&o.hasOwnProperty("showDecline")&&(this.showDeclineButton=o.showDecline),o&&o.hasOwnProperty("showCookieSettings")&&(this.showCookieSettingsButton=o.showCookieSettings),this.showCookiePopup="s"==this.cookieValue||!1,this.piiConsentEnabled=o.piiConsent,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage()),this.handleCookieArea()),this.isAccepted="a"==this.cookieValue,this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}));var i=this.cookieManager.get("PHPPPE_PC");this.piiConsentEnabled&&!i&&this.triggerPiiConsentPopup()}},t.prototype.initiateExternalCookie=function(e){var t=this;this.isExternalCookieEnabled=!0,e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.cookieCategoryConfig=e.cookieCategoryConfig||u;var o=document.createElement("script");o.src=e.scriptUrl,o.setAttribute("data-document-language","true"),o.type="text/javascript",o.setAttribute("async",""),o.setAttribute("data-domain-script",e.domainKey),o.setAttribute("charset","UTF-8"),e.ignoreOverrideOptanon?e.ignoreOverrideOptanon&&(n.phApp.OptanonWrapper=this.handleExternalCookie.bind(this,e)):n.OptanonWrapper=this.handleExternalCookie.bind(this,e),o.onload=function(){t.loadDependentScript(e,o)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)},t.prototype.loadDependentScript=function(t,o){t.dependentScriptUrl&&(t.dependentScriptUrl=t.dependentScriptUrl.startsWith("http")?t.dependentScriptUrl:this.commonService.getCdnUrl()+"/"+t.dependentScriptUrl,e.prototype.loadScript.call(this,t.dependentScriptUrl,function(){},[],!0))},t.prototype.initiateExternalCookieTrustArc=function(e){var t=this;if(this.isExternalCookieEnabled=!0,!document.getElementById("consent_blackbar")){var o=document.createElement("div");o.setAttribute("id","consent_blackbar"),document.body.appendChild(o)}e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.trustArcCookieCategoryConfig=e.cookieCategoryConfig||f;var i=document.createElement("script");i.src=e.scriptUrl,i.setAttribute("data-document-language","true"),i.type="text/javascript",i.setAttribute("async",""),i.setAttribute("charset","UTF-8");var a=n.phApp.baseDomain||e.currentDomain;a=a.replace(/https?:\/\//g,"");var r={PrivacyManagerAPI:{action:"getConsent",timestamp:(new Date).getTime(),self:a}},s=JSON.stringify(r);window.top.postMessage(s,"*"),i.onload=function(){window.addEventListener("message",t.handleTrustArcCookie.bind(t,e)),setTimeout(function(){var o=t.cookieManager.get("notice_gdpr_prefs");if(o){o=o.slice(0,-1),o=o.split(",");for(var i=0;i<o.length;i++)o[i]=Number(o[i])+1}var a=t.trustArcMappedGroups(o||[]);t.handlingTrustArcUserConsent(e,a)},150)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(i,c)},t.prototype.getTrustArcEnabledCookies=function(e){for(var t=[],o=0;o<e.length;o++)""!=e[o]&&t.push(this.getTrustArcCookieName(e[o]));return t},t.prototype.addOneTrustSessionData=function(e,t){var o={},i=[];e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&(t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){i.includes(e)||i.push(e)})}),o.onetrustDisabledCookies=i,this.cookiePopupService.makeDDORequest(s,"storeOneTrustCookieSession",o))},t.prototype.deleteCareerSiteCookies=function(e,t){var o=this;e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){o.cookieManager.delete(e)})})},t.prototype.addCareerSiteCookies=function(e,t){var o=this,i=new Date;i.setTime(i.getTime()+7776e6);var a={expires:i,path:"/"};e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){var i=e.trackCookieMap.csCookies[t];i&&i.forEach(function(e){"VISITED_VARIANT"!=e&&"external"!=o.getCareerSiteCookieValue(e)&&o.cookieManager.set(e,o.getCareerSiteCookieValue(e),a)})})},t.prototype.getCareerSiteCookieValue=function(e){var t=n.phApp.locale;switch(t=t.split("_"),e){case"VISITED_COUNTRY":return t[1];case"VISITED_LANG":return t[0];case"VISITED_VARIANT":return this.getSiteVariant(window.phApp.siteType)}},t.prototype.getSiteVariant=function(e){return e&&"internal"==e?"i":e||void 0},t.prototype.getEnabledCookies=function(e){for(var t=[],o=0;o<e.length;o++)if(""!=e[o]){var i=this.getCookieName(e[o]);i&&t.push(this.getCookieName(e[o]))}return t},t.prototype.getDisabledCookies=function(e,t){var o=[];for(var i in e)t.includes(i)||o.push(i);return o},t.prototype.getCookieName=function(e){if(e)return this.cookieCategoryConfig[e]},t.prototype.getTrustArcCookieName=function(e){if(e)return this.trustArcCookieCategoryConfig[e]},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(e){var t=this;if(this.showCookiePopup){var o=document.querySelector(".ph-header"),i=document.querySelector("body"),a=document.querySelector(l),r=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),s=document.querySelector(d);for(this.element.contains(s)&&(s=void 0);o&&a;)if(o&&o.firstElementChild&&window.getComputedStyle(o).position,!(o=o.firstElementChild)){var n=r&&r.offsetHeight||0,c=a&&a.offsetHeight;"bottom"==this.position?(i.style.paddingBottom=c+"px",a&&(a.style.bottom=0),a&&(a.style.top="auto")):(i.style.paddingTop=n+c+"px",a&&(a.style.top=n+"px"),s&&(s.style.top=n+c+"px",s.style.marginTop="0px")),s&&!e&&setTimeout(function(){t.setCookieBodyHeight(!0)},5e3)}}else window.removeEventListener("resize",function(){t.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var o=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(o,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,o)},0)},t.prototype.closePopupCallback=function(t,o){var i=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(i)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(l),o=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),i=document.querySelector(d),a=document.querySelector(".header-layout .pcs-sticky-header");if(o&&t.offsetHeight)if("bottom"==this.position)e.style.paddingBottom=t.offsetHeight+"px";else{var r=e.style.paddingTop;r=parseInt(r)-t.offsetHeight+"px",e.style.paddingTop=r,o.style.top="0px",i&&(i.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),i&&(i.style.top="0px",a&&(a.style.top="0px"),i.style.marginTop=null)},t.prototype.setCookie=function(e,t){var o=new Date;o.setTime(o.getTime()+7776e6);var i={expires:o,path:"/",secure:!0},a=this.commonService.getSiteSettings("gdpr");a&&a.parentDomainCookie&&(a.parentDomain?i.domain=a.parentDomain:i.domain=this.getParentDomain(".com")),this.cookieManager.set(e||"PHPPPE_GCC",t||this.cookieValue,i)},t.prototype.getParentDomain=function(e){var t=window.location.hostname.indexOf(".");return t<window.location.hostname.indexOf(".com")?window.location.hostname.substring(-1==t?0:t+1):window.location.hostname},t.prototype.setGdprCookie=function(e){var t=this,o=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,
this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||o?this.cookieValue="a":(this.doNotHide&&(this.isAccepted=!1),this.cookieValue="s"):this.cookieValue="d",this.setCookie(),(!e||o&&"u"!=this.cookieValue)&&setTimeout(function(){t.eventAggregator.publish("close_cookie_popup",{cookieValue:t.cookieValue})},1e3),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var i={},a=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(a,void 0,i),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e,t){var o=new CustomEvent(e,{bubbles:!0,detail:t||{}});document.dispatchEvent(o)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(p[this.position])||(t.className=t.className+" "+p[this.position]):t.className=t.className.replace(p[this.position],""))},t.prototype.triggerPiiConsentPopup=function(){var t=this;this.piiCosentPopup=!0,setTimeout(function(){var o=t.element.querySelector(".ph-a11y-allow-consent");e.prototype.openDialogPopup.call(t,"ph-a11y-modal-dialog-area",document.body,o,void 0,!0)},100)},t.prototype.acceptConsent=function(){this.piiCosentPopup=!1,e.prototype.closeDialogPopup.call(this),this.setCookie("PHPPPE_PC","a")},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==i.CommonService&&i.CommonService)&&g||Object,r.CookiePopupService,"function"==typeof(y=void 0!==i.CookieManager&&i.CookieManager)&&y||Object,a.EventAggregator,"function"==typeof(m=void 0!==i.LocalStorageContext&&i.LocalStorageContext)&&m||Object])],t);var g,y,m}(i.PhenomWidget);t.CookiePopup=g}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(s,n)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){c.label=o[1];break}if(6===o[0]&&c.label<s[1]){c.label=s[1],s=o;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(o);break}s[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,s,n,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};define("v1/ph-facets-service",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.commonService=e,this.eventAggregator=t,this.isImSearch=!1}return e.prototype.getSearchData=function(e,t,o,i,a,r,s,n){return void 0===o&&(o=[]),void 0===i&&(i={}),__awaiter(this,void 0,void 0,function(){var c,l,h,d,p,u=this;return __generator(this,function(f){switch(f.label){case 0:return c=JSON.parse(JSON.stringify(i)),l="eagerLoadRefineSearch",c.keywords=r?encodeURIComponent(r):"",c.global=!0,c.size=c.size||50,c.all_fields=c.all_fields||["city","state","category","type","orgFunction","country"],c.selected_fields=c.selected_fields||{},o.forEach(function(e){c.selected_fields[e.facet]||(c.selected_fields[e.facet]=[]),-1==c.selected_fields[e.facet].indexOf(e.name)&&c.selected_fields[e.facet].push(e.name)}),c.sortBy&&"Most recent"==c.sortBy?(h=this.commonService.getSiteSettings("refineSearch"),d="postedDate",h&&h.sort&&h.sort.field&&(d=h.sort.field||"postedDate"),c.sort={},c.sort.order="desc",c.sort.field=d):c.sortBy&&"Most popular"==c.sortBy?(c.sort={},c.sort.order="desc",c.sort.field="mostpopular"):c.sortBy&&"Most relevant"==c.sortBy&&(c.sortBy=""),c.subsearch&&(c.subsearch=encodeURIComponent(c.subsearch)||""),s&&(c.pageIdentifier=s),n&&(c.locationData=n),c.rk&&(c.rkstatus=!0),a||this.commonService.clearDDO(l),this.isImSearch=this.commonService.getSiteSettings("isUseDefaultSearchForIm"),c.siteType&&"internal"==c.siteType?(t="refineSearchIM",[4,this.getImconfigurations(e,"getIMConfigurations")]):[3,2];case 1:p=f.sent(),p&&p.imTenant&&(c.isInternal=p.imTenant),this.isImSearch?c.isInternal=!1:c.isInternal=!0,c.isInternal&&c.rk&&(c.rkstatus=!a),f.label=2;case 2:return[2,new Promise(function(o,i){var a=u.commonService.getCachedDDO(l,e);if(c.siteType&&"internal"==c.siteType&&c.isInternal)t="refineSearchIM",u.commonService.getDDO(e,"refineSearchIM",c).then(function(t){if(t.refineSearch.data&&!t.refineSearch.data.ui_selections&&(t.refineSearch.data.ui_selections={}),t.refineSearch.data&&t.refineSearch.data.ui_selections){if(c.selected_fields&&!c.selected_fields.visibilityType&&t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length,t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length){var i=t.refineSearch.data.ui_selections.visibilityType.findIndex(function(e){return"internal/external"==e.toLocaleLowerCase()||"external/internal"==e.toLocaleLowerCase()});-1!=i&&t.refineSearch.data.ui_selections.visibilityType.splice(i,1),c.imVariantsLength&&c.imVariantsLength<2&&(t.refineSearch.data.ui_selections.visibilityType=[])}t.refineSearch.selected_fields=t.refineSearch.data.ui_selections||c.selected_fields,c.selected_fields=t.refineSearch.selected_fields,u.eventAggregator.publish("searchInitiated",c),o(t)}else u.eventAggregator.publish(u.commonService.getErrorChannel(e),{})});else if(a&&a.data&&a.data.jobs){var r={refineSearch:a};r.refineSearch.data&&r.refineSearch.data.ui_selections?(r.refineSearch.selected_fields=r.refineSearch.data.ui_selections,c.selected_fields=r.refineSearch.selected_fields):r.refineSearch.selected_fields=c.selected_fields,u.commonService.getDDO(e,"eagerLoadRefineSearchSession",c),o(r)}else c.isSliderEnable?(c.s="1",u.commonService.getDDO(e,l,c).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,c.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=c.selected_fields,o(t)):u.eventAggregator.publish(u.commonService.getErrorChannel(e),{}),u.commonService.getDDO(e,"eagerLoadRefineSearchSession",c)})):c.rk||c.ak?(c.s="1",u.commonService.getDDO(e,l,c).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,c.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=c.selected_fields,o(t)):u.eventAggregator.publish(u.commonService.getErrorChannel(e),{}),u.commonService.getDDO(e,"eagerLoadRefineSearchSession",c)})):(u.commonService.getDDO(e,"eagerLoadRefineSearchSession",c),u.commonService.getDDO(e,t,c).then(function(t){t&&t.refineSearch?(t.refineSearch.selected_fields=t.refineSearch.ui_selections||c.selected_fields,o(t)):u.eventAggregator.publish(u.commonService.getErrorChannel(e),{})}))})]}})})},e.prototype.getLocations=function(e,t,o){if(o){var i={};return i.keywords=o,this.commonService.getDDO(e,t,i).then(function(e){return e[t]})}},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getImconfigurations=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data?e[t].data:e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==a.CommonService&&a.CommonService)&&t||Object,i.EventAggregator])],e);var t}();t.FacetsService=r}),define("v1/field-glocation-handler",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="glocations",i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},a=function(){function e(e,t,i,a,r,s){this.fields={},this.fieldType=o,this.activeIndex=-1,this.elementTag=e,this.element=r,this.fields=t,this.facetsService=i,this.a11yAutoComplete=a,this.facetContext=s}return e.prototype.onFocus=function(e){this.fields.glocations&&this.fields.glocations.value&&this.fields.glocations.results&&this.fields.glocations.results.length&&(this.fields.glocations.showListBox=!0,this.activeIndex=-1)},e.prototype.onKeyup=function(e){var t=e.target;if(t&&this.fields[o]){switch(e.which||e.keyCode){case i.UP:case i.DOWN:case i.RETURN:case i.ESC:return void e.preventDefault()}var a=t.value;a&&a.length?this.fetchGLocations():this.fields.glocations.showListBox=!1}},e.prototype.onPaste=function(e){var t=e.target,o=t.value;o&&o.length?this.fetchGLocations():this.fields.glocations.showListBox=!1},e.prototype.autoFillValue=function(e,t,i){var a=this.fields[this.fieldType].results;this.fields[this.fieldType].showListBox&&a.length&&((this.fields[o].autoSuggestCompleteOnkeyUp||i)&&(this.fields[this.fieldType].value=a[this.fields[this.fieldType].activeIndex].key,this.facetContext.setLocation(a[this.fields[this.fieldType].activeIndex])),i&&(this.fields[this.fieldType].results=[a[this.fields[this.fieldType].activeIndex]]),this.fields[this.fieldType].showListBox=t)},e.prototype.onEnter=function(e){-1!=this.activeIndex&&this.autoFillValue(e,!1,!0)},e.prototype.onKeydown=function(e){var t=e.target;if(t&&this.fields[o])switch(e.which||e.keyCode){case i.DOWN:this.moveDown(t);break;case i.UP:this.moveUp(t);break;case i.RETURN:return void this.onEnter(t)}},e.prototype.moveDown=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(++this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.moveUp=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(--this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.fetchGLocations=function(){var e=this;if(this.fields.glocations.results=[],this.fields.glocations.value.length){this.activeIndex=-1,this.fieldType=o;var t={};t.locationValue=this.fields.glocations.value;var i=this.fields.glocations.value;this.fields.condition&&this.fields.condition.length&&(t.condition=this.fields.condition),this.facetsService.getLocations(this.elementTag,this.fields.glocations.ddoKey,i).then(function(t){e.fields.glocations.results=t.predictions,e.fields.glocations.results&&e.fields.glocations.results.length&&(e.fields.glocations.showListBox=!0)},function(e){new Error(e)})}},e}();t.GLocationHandler=a}),define("v1/ph-facets-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"refineSearch",ddoPlaceAutoComplete:"placeAutoComplete",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatus:"getJobStatus",ddoKeyStatusList:"getJobStatusListV2",ddoKeyEagerLoad:"eagerLoadRefineSearch",ddokeyRefineSearchIM:"refineSearchIM",imVariantsConfigInfo:"imVariantsConfigInfo"},fields:{locations:{field:"locations",ddoKey:"locations",autoSuggestOnfocus:!0,autoSuggestCompleteOnkeyUp:!0,autoPopulateOnBlur:!0,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1},glocations:{field:"glocations",ddoKey:"placeAutoComplete",autoSuggestOnfocus:!1,autoSuggestCompleteOnkeyUp:!1,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1}},modeConfig:{"facet-locations":{fields:["glocations"]}}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(s,n)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){c.label=o[1];break}if(6===o[0]&&c.label<s[1]){c.label=s[1],s=o;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(o);break}s[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,s,n,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};define("v1/ph-facets",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-facets-config","./ph-facets-service","./field-glocation-handler"],function(e,t,o,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-facets-v1",l="eager",h=function(e){function t(t,o,i,r,s,n,h,d){var p=e.call(this,t,o,c)||this;return p.element=t,p.commonService=o,p.facetsService=i,p.localStorage=r,p.cookieManager=s,p.a11yAutoComplete=n,p.geoLocationService=h,p.eventAggregator=d,p.searchParams={sortBy:"",subsearch:"",from:0},p.searchFacets={},p.searchFacetKeys=[],p.searchSelections={},p.searchSelectionKeys=[],p.tempSearchSelectionKeys=[],p.jobResults=[],p.aggregations=[],p.sortFilter=!1,p.tempJobResultsForLazyLoad=[],p.triggerSpellCheck=!0,p.spellCheckObject={},p.searchConfigData={},p.pageResults=[],p.pages=1,p.pageSize=10,p.paginationBlockSize=10,p.paginationRange=[],p.totalJobs=0,p.filteredTotalJobs=0,p.currentSelectedPage=1,p.startingJobNumberInPage=1,p.endingJobNumberInpage=1,p.prevButtonVisibility=!0,p.nextButtonVisibility=!0,p.jobsViewed=[],p.jobsViewedFlag=!0,p.firstTime=!1,p.allResults=!1,p.isAccessbility=!1,p.showErrorMsg=!1,p.bulkcart=!1,p.clickTojd=!1,p.loadType=l,p.facetsToEnable=[],p.facetDisplayNames={},p.facetPlaceholderNames={},p.defaultFacetsToOpen=[],p.openFacets=[],p.personalizedData=[],p.showMultiLocationInlineView=!1,p.locationSliderFacet=!1,p.sliderRadius=305,p.placeVal="",p.showLocationDropdown=!0,p.locationSliderMode=!1,p.locationRangeEnd=300,p.locationSliderFacetMaxRange=300,p.locationSliderFacetUnbounded=!0,p.aboveMaxRadius=!0,p.location="",p.workLocation="",p.enableLocationSlider=!0,p.subscriptions=[],p.selectedSkill=[],p.skills=[],p.bodyClass="",p.clearResults="",p.sort="",p.onlyCounts=0,p.isCritical=!1,p.clearAll=!1,p.facetSelectionCounts={},p.lastSelection={},p.inputFields={},p.fieldsEnabled=[],p.fields={},p.noResults=!1,p.resultsUpdated=!1,p.resultsDisplayMode="",p.facetResultsUpdated=!1,p.isRequestInProgress=!1,p.searchFacetsIM={},p.facetsMetaDataIM={count:{},index:{},filterKey:{},size:300},p.locationUnit="miles",p.locationUnitList=[{value:"miles"},{value:"kilometers"}],p.islocationUnitDropdown=!1,p.isShowLocationDropdown=!0,p.markerFacet={},p.handleFieldFocus=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onFocus&&i.onFocus(e),p.resetFieldListBox(o),p.autoPopulateOnBlur(o),p.setActiveField(o)}},p.locationBlur=function(e){var t=e.target;if(t){var o=p.getFieldName(t);setTimeout(function(){p.fields[o].showListBox=!1},250)}},p.handleKeyup=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onKeyup&&i.onKeyup(e),27==e.which&&p.resetFieldListBox()}},p.handleKeydown=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onKeydown&&i.onKeydown(e)}},p.handlepaste=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onPaste&&setTimeout(function(){i.onPaste(e)},0)}},p.addJobContext=function(){p.commonService.addJobContext(c,p.jobResults),p.commonService.jobContext(c)},p.getDataCount=function(){return p.totalJobs?p.totalJobs:0},p.widgetViewType=e.prototype.getQueryParam.call(p,"m"),p.searchKeyword=e.prototype.getSearchKeyword.call(p),p.queryCity=e.prototype.getQueryParam.call(p,"qcity"),p.queryState=e.prototype.getQueryParam.call(p,"qstate"),p.queryCountry=e.prototype.getQueryParam.call(p,"qcountry"),p.placeId=e.prototype.getQueryParam.call(p,"p"),p.locationKey=e.prototype.getQueryParam.call(p,"lk"),p.category=decodeURIComponent(e.prototype.getQueryParam.call(p,"c")||e.prototype.getQueryParam.call(p,"category")||""),p.subCategory=e.prototype.getQueryParam.call(p,"subCategory"),p.workLocation=e.prototype.getQueryParam.call(p,"workLocation"),p.latitude=e.prototype.getQueryParam.call(p,"latitude"),p.longitude=e.prototype.getQueryParam.call(p,"longitude"),p.rk=e.prototype.getQueryParam.call(p,"rk")||p.commonService.getSessionParam("rk"),p.ak=e.prototype.getQueryParam.call(p,"ak")||p.commonService.getSessionParam("ak"),p.sort=decodeURIComponent(e.prototype.getQueryParam.call(p,"sortBy")||""),p.triggerSpellCheck=e.prototype.getQueryParam.call(p,"triggerSpellCheck"),p.fields.glocations={},p.fields.glocations.value="",p.eventAggregator.subscribe("GeoLocation",function(e){a.logger.debug("payload location ::"+e),p.locationLatLongs=e}),p.eventAggregator.subscribe("GeoLocationDetails",function(e){a.logger.debug("payload location ::"+e),p.locationLatLongs=e}),p.geoLocationService.askForLocation(),p}return __extends(t,e),t.prototype.fetchBodyClass=function(){return this.bodyClass=document.body.className,this.bodyClass},t.prototype.shouldAddSessionParams=function(){var t=!1;return"1"==e.prototype.getQueryParam.call(this,"s")&&(t=!0),t},t.prototype.hasLocationSliderFacet=function(){return-1!=this.facetsToEnable.indexOf("phLocSlider")},t.prototype.created=function(){this.populateSelectedFields(),this.localStorage.removeItem("sbts"),this.localStorage.getItem("jobsViewed")||this.localStorage.setItem("jobsViewed",[]);var e=this.commonService.getSiteSettings("refineSearch");e&&e.enabledFacets&&(this.facetsToEnable=e.enabledFacets,this.facetDisplayNames=e.facetDisplayNames,this.facetPlaceholderNames=e.facetPlaceholderNames,this.defaultFacetsToOpen=e.defaultFacetsToOpen),this.hasLocationSliderFacet()&&(e&&e.facetConfig&&(this.locationRangeEnd=e.facetConfig.phLocSlider.locationRangeEnd,this.sliderRadius=e.facetConfig.phLocSlider.sliderRadius,this.locationSliderFacetMaxRange=this.locationRangeEnd,this.aboveMaxRadius=e.facetConfig.phLocSlider.aboveMaxRadius,e.facetConfig.phLocSlider.sliderDelta,this.locationUnit=e.facetConfig.phLocSlider.LocationUnit||this.locationUnit),this.locationSliderFacetUnbounded&&(this.locationRangeEnd=this.locationRangeEnd+5)),this.handleEventSubscriptions()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.handleEventSubscriptions=function(){var e=this;this.subscriptions.push(this.eventAggregator.subscribe("ph:clearSelection",function(t){t&&"phLocSlider"==t?e.clearSearchValue(t,"glocations"):e.clearSelection(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:resetAll",function(t){e.emptySelectionsAndCallSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearchReset",function(t){e.clearSubSearchAndCallSearch(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearch",function(t){e.searchParams.subsearch=t.subsearch,e.filterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:sortBy",function(t){e.searchParams.sortBy=t.sortBy,e.sortfilterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:pullResults",function(t){e.raiseSearchResultsEvent()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showfilter",function(t){e.facetFilter=t,e.showFacetFilter()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showMore",function(t){e.showMoreResults(t)})),this.subscriptions.push(this.eventAggregator.subscribe("selectFields",function(t){e.saveFacetSelection()})),this.subscriptions.push(this.eventAggregator.subscribe("selectedSkillField",function(t){e.handleSelectedSkills(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:gotoPageEvent",function(t){e.gotoPage(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:marker",function(t){e.markerFacet=e.markerFacet||{},e.markerFacet.checked=!0,e.markerFacet.count=t.count,e.markerFacet.facet="city",e.markerFacet.name=t.city,e.filterChanged(e.markerFacet,"city")}))},t.prototype.handleSelectedSkills=function(e){var t=!1;this.searchKeyword.split(",");for(var o=0;o<e.length;o++)this.searchKeyword.indexOf(e[o])>-1&&(t=!0),t||(this.searchKeyword+=","+e[o]),t=!1;this.selectedSkill=e,this.searchData(1,"")},t.prototype.saveFacetSelection=function(){var e={};e.selected_fields={},this.searchSelectionKeys.forEach(function(t){e.selected_fields[t.facet]||(e.selected_fields[t.facet]=[]),-1==e.selected_fields[t.facet].indexOf(t.name)&&e.selected_fields[t.facet].push(t.name)}),e.all_fields=this.facetsToEnable,e.facetDisplayNames=this.facetDisplayNames,e.keywords=this.searchKeyword,e.subsearch=this.searchParams.subsearch;var t=this.commonService.getSiteSettings("refineSearch"),o=t&&t.facetConfig&&t.facetConfig.phLocSlider,i=this.rk;o&&(e.phLocSlider=o),i&&(e.rk=i),this.placeId&&(e.placeId=this.placeId,e.sliderRadius=this.sliderRadius,e.placeVal=this.placeVal);var a=Object.keys(e.selected_fields||{});e.isSearchRefined=!!(a.length||e.keywords||a.subsearch),this.eventAggregator.publish("saveSelections",e)},t.prototype.populateSelectedFields=function(t){if(this.searchParams.sortBy=this.commonService.getSessionParam("sortBy")||"",this.shouldAddSessionParams()){t=t||{};var o=t.locationData||this.commonService.getSessionParam("locationData");t=t.selected_fields||this.commonService.getSessionParam("selected_fields");var i={city:"qcity",state:"qstate",country:"qcountry"};i=this.addExtraSelectionsFromUrl(i,"key");for(var a in i)i.hasOwnProperty(a)&&!this[a]&&this.commonService.getSessionParam(i[a])&&(this[a]=this.commonService.getSessionParam(i[a]),this.existsInSession(a,this[a]));if(t){t=this.parseJsonStringToObj(t);for(var r in t)if(t.hasOwnProperty(r))for(var s=t[r],n=0;n<s.length;n++)this.existsInSession(r,s[n])}if(o&&Object.keys(o).length){o=this.parseJsonStringToObj(this.commonService.getSessionParam("locationData"));for(var a in o)o.hasOwnProperty(a)&&(this[a]||"boolean"==typeof this[a]||(this[a]=o[a],"place_id"==a&&(this.placeId=o[a])));o.hasOwnProperty("placeVal")&&(this.fields.glocations.value=o.placeVal),o.hasOwnProperty("sliderRadius")&&(this.sliderRadius=o.sliderRadius,this.aboveMaxRadius=o.aboveMaxRadius)}this.commonService.getSessionParam("subsearch")&&(this.searchParams.subsearch=decodeURIComponent(this.commonService.getSessionParam("subsearch"))||"");var c=e.prototype.getQueryParam.call(this,"from")||0;this.searchParams.from=parseInt(c),this.searchParams.from>0&&(this.currentSelectedPage=Math.ceil(this.searchParams.from/this.pageSize)+1)}},t.prototype.addExtraSelectionsFromUrl=function(t,o){for(var i,a,r=e.prototype.getQueryParamsMap.call(this),s=Object.keys(r),n=0;n<s.length;n++)s[n].startsWith("qk")&&(i=s[n].substr(2),a="key"==o?i:r[s[n]],t[i]=decodeURIComponent(a));return t},t.prototype.fetchLocationValue=function(){var t=decodeURIComponent(e.prototype.getQueryParam.call(this,this.locationType||"location")||"");"3"==this.widgetViewType?this.location=t:this.placeId&&this.placeId.trim().length?(this.locationSliderMode=!0,this.placeVal=t,this.fields.glocations.value=t,this.placeVal&&this.placeVal.trim().length&&(this.enableLocationSlider=!0)):this.city=t},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.fetchLocationValue(),this.pageName=this.commonService.getPageName(),this.pageType=this.commonService.getPageType(),this.clearResults=this.clearResults||this.commonService.getSiteSettings("clearResults"),this.clearResults||(this.clearResults="full"),this.categoryNameInput=this.categoryNameInput||this.category;var o={city:this.city||this.queryCity||"",state:this.queryState||"",country:this.queryCountry||"",category:this.categoryNameInput||"",subCategory:this.subCategory||"",workLocation:this.workLocation||""};o=this.addExtraSelectionsFromUrl(o,"val"),"3"==this.widgetViewType&&(o.location=this.location||"");var i=e.prototype.getQueryParam.call(this,"s_s");if(i&&(this.searchParams.subsearch=i),"1"!=e.prototype.getQueryParam.call(this,"s"))for(var a in o)o.hasOwnProperty(a)&&this.existsInSession(a,o[a]);this.populateSelectedFields(),this.landingPageKey&&this.landingPageType&&this.landingPageKey.trim().length>0&&this.landingPageType.trim().length>0&&(this.pageIdentifier={landingPageType:this.landingPageType,landingPageKey:this.landingPageKey});var r=this.commonService.getParam("sessionParams");if(!(this.sort||r&&r.hasOwnProperty("sortBy"))){var s=this.commonService.getSiteSettings("refineSearch");s&&s.sort&&("object"==typeof s.sort?this.sort="Most recent":this.sort=s.sort||"Most relevant")}!this.sort||r&&r.hasOwnProperty("sortBy")||(this.searchParams.sortBy=this.sort),0!=this.onlyCounts&&(this.showJobs="false",this.showCounts="false"),this.showJobs&&"false"==this.showJobs?this.searchParams.jobs=!1:this.searchParams.jobs=!0,this.showCounts&&"false"==this.showCounts?this.searchParams.counts=!1:this.searchParams.counts=!0,"internal"==this.commonService.getSiteType()?this.getimVariantsConfigInfo():this.searchData(this.currentSelectedPage,"",!0).then(function(){setTimeout(function(){t.raiseSearchResultsEvent()},500)})},t.prototype.getimVariantsConfigInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i,a,s;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.facetsService.getImconfigurations(c,"getIMConfigurations")];case 1:return e=n.sent(),e&&e.imTenant&&(this.isAccessbility=!0),[4,this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.imVariantsConfigInfo,{})];case 2:return t=n.sent(),t.status&&"success"==t.status&&t.data&&t.data.values&&t.data.values.length&&-1!=(o=t.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(i=t.data.values[o].types,a=void 0,i&&1==i.length&&(a="internal"==i[0]?"Internal":"External"),this.imVariantsLength=i&&i.length||0),this.searchData(this.currentSelectedPage,"",!0),[3,4];case 3:return s=n.sent(),console.log(s),[3,4];case 4:return[2]}})})},t.prototype.existsInSession=function(e,t){var o=!1;if(t.length>0){var i={facet:e,name:t};for(var a in this.searchSelectionKeys)if(this.searchSelectionKeys[a].facet==e&&this.searchSelectionKeys[a].name==t){o=!0;break}o||(this.searchSelectionKeys.push(i),this.updateFacetSelectionCounts(e))}},t.prototype.filterChanged=function(e,t){if(this.lastSelection={},this.lastSelection={facet:e,facetKey:t},e.checked){var o=this.commonService.getSiteSettings("refineSearch");if(o&&o.facetConfig){var i=o.facetConfig[t];if(i&&i.selectSingle)for(var a=0;a<this.searchSelectionKeys.length;a++)if(this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}}this.searchSelectionKeys.push(e),this.tempSearchSelectionKeys.push(e),this.updateFacetSelectionCounts(t)}else for(var r=e.name,a=0;a<this.searchSelectionKeys.length;a++)if(r==this.searchSelectionKeys[a].name&&this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}"accordion"==this.mode?this.openFacets[0]=e.facet:-1==this.openFacets.indexOf(e)&&this.openFacets.splice(this.openFacets.indexOf(e)),this.searchParams.from=0,this.searchData(1,e.facet);try{var s={};s.trait6=e.name,s.trait47=t||"",this.commonService.processTrackingEvent("refiner_search",void 0,s)}catch(e){}},t.prototype.filterSearch=function(e){this.searchData(1,""),this.focusSliderHandle(!1,!0);var t={};t.trait6=e||this.searchParams.subsearch,this.commonService.processTrackingEvent("results_search",void 0,t)},t.prototype.sortfilterSearch=function(){this.sortFilter=!0,this.searchData(1,"");var e={};e.trait61=this.searchParams.sortBy,this.commonService.processTrackingEvent("sort_by_click",void 0,e)},t.prototype.emptySearchData=function(){this.searchFacetKeys=[],
this.searchFacets={},this.pageResults=[],this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0},t.prototype.emptySelectionsAndCallSearch=function(){a.logger.debug("Request received at emptySearchDataAndCallSearch"),this.locationSliderMode||(this.searchFacetKeys=[]),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0;var e={queryCity:"qcity",queryState:"qstate",queryCountry:"qcountry"};e=this.addExtraSelectionsFromUrl(e,"key");for(var t in e)e.hasOwnProperty(t)&&this[t]&&(this.searchParams[e[t]]="");if("none"!=this.clearResults&&"keywords"!=this.clearResults&&(this.clearAll=!0,this.category="",this.location=""),"full"!=this.clearResults&&"keywords"!=this.clearResults||(this.clearAll=!0,this.searchKeyword=""),this.hasLocationSliderFacet()){this.fields.glocations.value="",this.fields.glocations.showListBox=!1,this.placeVal="",this.placeId="",this.showLocationDropdown=!1;var o=this.commonService.getSiteSettings("refineSearch");this.sliderRadius=o.facetConfig.phLocSlider.sliderRadius,this.locationSliderChanged(!0)}this.searchData(1,"")},t.prototype.gotoPage=function(e){e>0&&this.searchData(e,"")},t.prototype.searchData=function(t,o,i,a,s,n){var h=this;if(e.prototype.unhideLoader.call(this),this.eventAggregator.publish("ph:fetchingResults",{}),this.firstTime=i,this.resultsDisplayMode=n,this.searchParams.all_fields=this.facetsToEnable,this.searchParams.pageName=this.pageName,this.searchParams.pageType=this.pageType,this.searchParams.from=this.pageSize*(t-1),this.searchParams.size=this.pageSize,this.searchParams.rk=this.rk,this.searchParams.ak=this.ak,this.searchParams.clearAll=this.clearAll,this.searchParams.jdsource="facets",this.clearAll&&(this.searchParams.location=""),this.locationKey&&(this.searchParams.lk=this.locationKey),this.selectedSkill.length>0){var d={};d.skills=this.selectedSkill,this.searchParams.selected_suggestions=d}this.searchParams.isSliderEnable=this.hasLocationSliderFacet(),this.isCritical&&(this.searchParams.selected_fields={isCritical:["true"]});var p;this.placeId?(p={place_id:this.placeId,sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius,LocationUnit:this.locationUnit,placeVal:this.isAccessbility?this.fields.glocations.value:this.placeVal},this.locationLatLongs&&this.locationLatLongs.coords?(p.latitude=this.locationLatLongs.coords.latitude,p.longitude=this.locationLatLongs.coords.longitude):this.latitude&&this.longitude&&(p.latitude=this.latitude,p.longitude=this.longitude)):this.hasLocationSliderFacet()&&(p={sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius,LocationUnit:this.locationUnit});var u="ddoKey";return this.rk&&this.searchParams.rk&&this.clearAll&&(u="ddoKeyEagerLoad"),this.commonService.getPageId()&&(this.searchParams.pageId=this.commonService.getPageId()),this.searchParams.siteType=this.commonService.getSiteType(),this.searchParams.forceSpellCheck=this.triggerSpellCheck,"internal"==this.searchParams.siteType&&this.imVariantsLength&&(this.searchParams.imVariantsLength=this.imVariantsLength),this.facetsService.getSearchData(c,r.WidgetConfig.v1[u],this.searchSelectionKeys,this.searchParams,this.firstTime,this.searchKeyword,this.pageIdentifier,p).then(function(t){h.locationSliderMode||(h.searchFacetKeys=[]),setTimeout(function(){h.scrollToSelection()},250);var n=t.refineSearch,d=n&&n.data&&n.data.jobs||[],p=n&&n.data&&n.data.spellCheckData||{},f=n&&n.data&&n.data.searchConfig||{};n&&n.allResults?h.allResults=n.allResults:h.allResults=!1;var g=".ph-a11y-noresult";d.length?(g=".ph-a11y-result-updated","ddoKey"==u&&(h.resultsUpdated=!0,setTimeout(function(){h.resultsUpdated=!1},1e3))):"ddoKey"==u&&(h.noResults=!0,setTimeout(function(){h.noResults=!1},500));var y=h.element.querySelector(g),m=y&&y.parentElement;if(m&&(y.removeAttribute("aria-hidden"),y.parentElement.removeChild(y),setTimeout(function(){m.append(y),setTimeout(function(){y.setAttribute("aria-hidden","true")},3e3)},100)),h.firstTime&&n.totalHits&&n.totalHits<=h.searchParams.from)return h.commonService.setPageState("results"),h.searchData(1,"",!0),!1;if(n.data&&n.data.searchConfig&&n.data.searchConfig.mostpopular&&(h.searchParams.isMostPopular=!0),n.data&&n.data.personalizedData&&(h.personalizedData=Object.keys(n.data.personalizedData).reduce(function(e,t){var o={};return o.displayName=t,o.data=n.data.personalizedData[t],e.push(o),e},[]),console.info("personalied data",h.personalizedData)),n.data&&n.data.searchConfig&&n.data.searchConfig.isPersonalizedSearchEnabled&&(h.searchParams.isPersonalizedSearchEnabled=!0),h.searchParams.sortBy.length&&"Most relevant"!=h.searchParams.sortBy&&(h.personalizedData=[]),d&&d.length>h.pageSize){var v=h.pageSize?h.pageSize:d.length;d.splice(v)}n.data&&(h.uiSkillSelection=n.data.ui_skills_selection||"");var b=n.data.locationData;if(n.data&&b&&Object.keys(b).length)for(var S in b)b.hasOwnProperty(S)&&(h[S]=b[S],"place_id"==S?h.placeId=b[S]:"aboveMaxRadius"==S&&"false"==b[S]?h.aboveMaxRadius=!1:"locationRangeEnd"==S&&(h.locationRangeEnd=h.locationRangeEnd+5));if(h.placeVal&&h.placeVal.trim().length&&(h.enableLocationSlider=!0,h.aboveMaxRadius=!1,h.sliderRadius>h.locationSliderFacetMaxRange&&(h.aboveMaxRadius=!0)),h.loadType==l||""==o?(h.jobResults=d,h.aggregations=n.data.aggregations,h.totalJobs=n.totalHits||0,h.filteredTotalJobs=n.totalHits||0,h.spellCheckObject=p,h.searchConfigData=f,h.tempJobResultsForLazyLoad=d):"lazy"==h.loadType&&(h.tempJobResultsForLazyLoad=d,h.filteredTotalJobs=n.totalHits||0),n.selected_fields&&(h.searchSelectionKeys=[],h.updateFacetSelectionCounts(void 0,{reset:!0}),h.isCritical&&n.selected_fields.isCritical&&delete n.selected_fields.isCritical),(!h.searchSelectionKeys||!h.searchSelectionKeys.length)&&n.selected_fields){var _=n.selected_fields,C=n.data.aggregations;C&&C.length&&C.forEach(function(e){var t=_[e.field];if(t)for(var o in e.value)if(e.value.hasOwnProperty(o)){var i=e.value[o];if(!i){var a=t.indexOf(o);-1!=a&&h.updateFacetSelectionCounts(e.field,{decrement:!0})}}});for(var S in _)!function(e){_[e]&&_[e].length&&_[e].forEach(function(t){h.searchSelectionKeys.push({facet:e,name:t}),h.updateFacetSelectionCounts(e)})}(S)}if(h.commonService.populateJobResults&&(h.jobResults=h.commonService.populateJobResults(h.jobResults,h.clickTojd,"job_click")),h.raiseSearchResultsEvent(),h.raiseSkillsResultsEvent(n.data),e.prototype.raiseDataFetchEvent&&setTimeout(function(){e.prototype.raiseDataFetchEvent.call(h)},250),h.bulkcart&&!h.commonService.isCrawlerUserAgent()){for(var w=[],k=0,P=d;k<P.length;k++){var O=P[k];d.isJobSaved=null,d.saveJobInterState=null,d.inProgress=!1,w.push(O.jobSeqNo)}var j={jobSeqNos:w};h.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyStatusList,j).then(function(e){if(e&&e.data)for(var t=e.data,o=0,i=d;o<i.length;o++){var a=i[o];a.isJobSaved=t[a.jobSeqNo]||!1,a.saveJobInterState=t[a.jobSeqNo]||!1}})}if(n&&n.data&&n.data.aggregations){var C=n.data.aggregations,E=n.selected_fields,D=h.parseJsonStringToObj(h.commonService.getSessionParam("selected_fields"));i&&D&&Object.keys(D).length&&(E=D),C.forEach(function(e){h.searchFacets[e.field]=[];var t={key:e.field,visible:!1};o==e.field&&(t.visible=!0);var a=!1;for(var r in e.value)if(e.value.hasOwnProperty(r)&&e.value[r]){var s=!1;E[e.field]&&-1!=E[e.field].indexOf(r)&&(s=!0,t.visible=!0,a=!0),h.searchFacets[e.field].push({name:r,checked:s,count:e.value[r],facet:e.field})}i&&a&&h.defaultFacetsToOpen.push(e.field)});for(var M in h.searchFacets)h.facetsMetaDataIM.count[M]=h.searchFacets[M].length,h.facetsMetaDataIM.index[M]||(h.facetsMetaDataIM.index[M]=0),h.facetsMetaDataIM.filterKey[M]||(h.facetsMetaDataIM.filterKey[M]=""),h.searchFacetsIM[M]=h.searchFacets[M].slice(0,h.facetsMetaDataIM.index[M]+h.facetsMetaDataIM.size),h.handleFacetSearch(M,h.facetsMetaDataIM.filterKey[M],"name")}if(i||!h.locationSliderMode){var R=window.innerWidth<=1024;h.facetsToEnable&&h.facetsToEnable.forEach(function(e){var t={key:e,visible:!1};(o==e||!R&&"phLocSlider"==e)&&(t.visible=!0),h.searchFacetKeys.push(t),h.isAccessbility&&h.locationDropDownFun()})}if(i){h.openSpecificFacets(h.defaultFacetsToOpen),h.fields.glocations&&h.fields.glocations.value&&(h.placeVal=h.fields.glocations.value);var x={};x.searchKeyword=h.searchKeyword,x.placeVal=h.placeVal,x.category=h.category,x.city=h.city,h.showErrorMsg=!1,h.totalJobs?h.commonService.setPageState("results"):(h.hasLocationSliderFacet()||h.eventAggregator.publish("ph:noJobsFound",x),h.hasLocationSliderFacet()||h.commonService.setPageState("no-results"),h.commonService.setPageStateData(x),h.isErrorMsgReqd?h.showErrorMsg=!0:h.hasLocationSliderFacet()?h.enableLocationSlider=!0:e.prototype.hideContainer.call(h))}else h.openSpecificFacets(h.openFacets);a&&h.focusSliderHandle(s),i&&void 0!=p&&void 0!=p.spellCheckApplied&&p.spellCheckApplied&&e.prototype.trackWidgetClick.call(h,"search_with_spellcheck",n.data),h.sortFilter=!1})},t.prototype.updateFacetsResults=function(){var e=this;this.facetResultsUpdated=!0,setTimeout(function(){e.facetResultsUpdated=!1},100)},t.prototype.locationDropDownFun=function(){var e=this;this.setFieldData(),this.fieldsEnabled=r.WidgetConfig.modeConfig["facet-locations"].fields,setTimeout(function(){var t=e.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(t)for(var o=0;o<t.length;o++){var i=t[o];i&&e.a11yAutoComplete&&e.a11yAutoComplete.init&&e.a11yAutoComplete.init(i)}var a=e.element.querySelectorAll("[data-ph-autocomplete-input]");if(a)for(var o=0;o<a.length;o++){var r=a[o],s=e.getFieldName(r);e.inputFields[s]={field:r,handler:e.setHandler(s)},e.setupEventListeners(r)}},10)},t.prototype.setActiveField=function(e){this.activeField=e},t.prototype.setFieldData=function(){for(var e=r.WidgetConfig,t=e.modeConfig["facet-locations"].fields,o=0;o<t.length;o++){var i=t[o],a=e.fields[i],s=a.field||i;a&&a.autoSuggestField&&e.modeConfig["facet-locations"].fields.push(a.autoSuggestField);for(var n in a)a.hasOwnProperty(n)&&(this.fields[s]=this.fields[s]||{},this.fields[s][n]=a[n])}},t.prototype.setHandler=function(e){switch(e){case"glocations":return new n.GLocationHandler(c,this.fields,this.facetsService,this.a11yAutoComplete,this.element,this);default:return}},t.prototype.getFieldName=function(e){if(e&&e.getAttribute)return e.getAttribute("data-ph-autocomplete-input")},t.prototype.getFieldHandler=function(e){if(e){var t=this.inputFields[e];if(t&&t.handler)return t.handler}},t.prototype.autoPopulateOnBlur=function(e){this.activeField&&this.activeField!=e&&this.fields[this.activeField].autoPopulateOnBlur&&this.fields[this.activeField].value&&(this.fields[this.activeField].value=this.fields[this.activeField].results[0].key,this.fields[this.activeField].results=[this.fields[this.activeField].results[0]])},t.prototype.clearSearchValue=function(e,t){var o=this;this.fields[t].value="",this.fields[t].showListBox=!1,this.clearPlaceVal(),setTimeout(function(){o.inputFields[t].field.focus()},100)},t.prototype.isFieldEnabled=function(e){return-1!=this.fieldsEnabled.indexOf(e)},t.prototype.resetFieldListBox=function(e){var t=this,o=r.WidgetConfig;o.modeConfig["facet-locations"].fields.forEach(function(i){var a=t.fields[i]||t.fields[o.fields[i].field];a&&i!=e&&(a.showListBox=!1)})},t.prototype.setupEventListeners=function(e){e&&(e.addEventListener("focus",this.handleFieldFocus),e.addEventListener("keyup",this.handleKeyup),e.addEventListener("keydown",this.handleKeydown),e.addEventListener("paste",this.handlepaste),e.addEventListener("blur",this.locationBlur))},t.prototype.handleDoneButtonClick=function(){if("lazy"==this.loadType){this.jobResults=this.tempJobResultsForLazyLoad,this.totalJobs=this.filteredTotalJobs,this.tempSearchSelectionKeys=[],this.raiseSearchResultsEvent(),this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var t=this.facetFilter.querySelector(".ph-a11y-row");t&&t.removeAttribute("aria-hidden")}},t.prototype.clearSelection=function(e){e&&(e.checked=!1,this.filterChanged(e,e.facet))},t.prototype.parseJsonStringToObj=function(e){return e&&"string"==typeof e&&(e=JSON.parse(e)),e},t.prototype.clearPlaceVal=function(){this.placeVal="",this.placeId="",this.showLocationDropdown=!1;var e=this.commonService.getSiteSettings("refineSearch");this.sliderRadius=e.facetConfig.phLocSlider.sliderRadius,this.locationSliderChanged(!0),this.searchData(1,"")},t.prototype.resetAllSelections=function(){var e=this;this.searchSelectionKeys.forEach(function(t){var o=e.searchFacets[t.facet];-1!=o.indexOf(t)&&(o[o.indexOf(t)].checked=!1)}),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0})},t.prototype.showMoreResults=function(e){this.searchData(e.pageNumber,"",!1,!1,!1,e.resultsDisplayMode)},t.prototype.showFacetFilter=function(){var t=this;document.body.className=this.fetchBodyClass()+" facete",this.loadType="lazy",this.tempSearchSelectionKeys.length&&this.tempSearchSelectionKeys.forEach(function(e){t.searchSelectionKeys.push(e)});var o=this.element.parentElement.parentElement;o.classList.contains("ph-a11y-facets")||o.classList.add("ph-a11y-facets"),o.setAttribute("role","dialog");var i=this.facetFilter.querySelector(".ph-a11y-row");i&&i.setAttribute("aria-hidden",!0),setTimeout(function(){var i=t.facetFilter.querySelector(".ph-a11y-filter a"),a=o.querySelector(".ph-a11y-facets a");i||(i=t.facetFilter),e.prototype.openDialogPopup.call(t,o,i,a),t.showlocationFilterOnmobileToggle()},50),this.searchFacetKeys.forEach(function(e){e.visible=!1})},t.prototype.showlocationFilterOnmobileToggle=function(){var e=this;this.hasLocationSliderFacet()&&(this.isShowLocationDropdown=!1,setTimeout(function(){e.isShowLocationDropdown=!0},0))},t.prototype.resetFacetFilter=function(){var e=this.fetchBodyClass()||"";document.body.className=e.replace(" facete",""),this.loadType=l},t.prototype.hideFacetFilter=function(){if(this.tempSearchSelectionKeys.length)for(var t=this.tempSearchSelectionKeys.length,o=this.searchSelectionKeys.length,i=0;i<t;i++)for(var a=0;a<o;a++)this.tempSearchSelectionKeys[i].name==this.searchSelectionKeys[a].name&&(this.searchSelectionKeys.splice(a,1),o=this.searchSelectionKeys.length);this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var r=this.facetFilter.querySelector(".ph-a11y-row");r&&r.removeAttribute("aria-hidden")},t.prototype.adjustAccordian=function(e){if(this.mode){if("accordion"==this.mode)for(var t=this.searchFacetKeys[e].key,o=0;o<this.searchFacetKeys.length;o++)this.searchFacetKeys[o].key==t?this.searchFacetKeys[o].visible=!this.searchFacetKeys[o].visible:this.searchFacetKeys[o].visible=!1}else{this.searchFacetKeys[e].visible=!this.searchFacetKeys[e].visible;var i=this.facetsToEnable.indexOf("phLocSlider");-1!==i&&i!==e&&(this.searchFacetKeys[i].visible=!1)}},t.prototype.onJobClicked=function(){return this.localStorage.setItem("sbts",{sbts:1}),!0},t.prototype.clearSubSearchAndCallSearch=function(e){this.searchParams.subsearch="",this.filterSearch(e)},t.prototype.openSpecificFacets=function(e){if(e&&e.length>0)if("accordion"==this.mode){for(var t=0;t<this.searchFacetKeys.length;t++)if(this.searchFacetKeys[t].key==e[0]){this.searchFacetKeys[t].visible=!0;break}}else for(var t=0;t<this.searchFacetKeys.length;t++)e.indexOf(this.searchFacetKeys[t].key)>-1&&(this.searchFacetKeys[t].visible=!0)},t.prototype.hasSplRendering=function(e){return"phLocSlider"==e},t.prototype.locationSliderChanged=function(e){var t=this;setTimeout(function(){t.sliderRadius>t.locationSliderFacetMaxRange?t.aboveMaxRadius=!0:t.aboveMaxRadius=!1,t.searchData(1,"",void 0,!0,e)},0)},t.prototype.focusSliderHandle=function(e,t){var o=this;setTimeout(function(){var i=o.element.querySelector(".noUi-handle");if(e){var a=o.element.querySelector(".ph-a11y-search-location-box");a&&setTimeout(function(){a.focus()},700),o.inputFields.glocations&&o.inputFields.glocations.field&&setTimeout(function(){o.inputFields.glocations.field.focus()},700)}else t||(i?i.focus():o.focusSliderHandle(!1))},0)},t.prototype.fetchLocations=function(e){var t=this;if(this.currentfocusElem=e.target,40!=e.which&&16!=e.which&&9!=e.which){var o=e.target?e.target.value:void 0;o?this.facetsService.getLocations(c,r.WidgetConfig.v1.ddoPlaceAutoComplete,o).then(function(e){t.showLocationDropdown=!0,t.allLocations=e.predictions;var o=t.element.querySelector(".ph-ally-location-inner-search"),i=t.element.querySelector(".ph-a11y-search-location-box");t.element.querySelectorAll(".phs-locations-suggested-list li"),!t.isAccessbility&&o&&i&&t.dropdownAccessbility(o,t.showLocationDropdown,".phs-locations-suggested-list li",i,"a")},function(e){new Error(e)}):this.clearPlaceVal()}},t.prototype.dropdownAccessbility=function(e,t,o,i,a){var r=this;if(e instanceof HTMLElement||(e=this.element.querySelector(e)),this.element.querySelectorAll(o).length,o.length,e){var s=-1;e.addEventListener("keyup",function(e){switch(e.which){case 40:s<r.element.querySelectorAll(o).length?s++:s=r.element.querySelectorAll(o).length;break;case 38:if(0==s&&i)return i.focus(),void(s=-1);s>=0?s--:s=0;break;default:return}if(t||(s=0),s<r.element.querySelectorAll(o).length&&!(s<0)){var n=void 0;r.element.querySelectorAll(o).length&&r.element.querySelectorAll(o)[s]&&(n=a?r.element.querySelectorAll(o)[s].querySelector("a"):r.element.querySelectorAll(o)[s]),n&&n.focus()}})}},t.prototype.clearInnerFacetSearch=function(e,t,o){e.target.parentElement,o.filterKey="",document.querySelector("#facetInput_"+t).focus()},t.prototype.sliderFocus=function(e){this.currentfocusElem=e.target},t.prototype.setLocation=function(e){var t=this;e&&(this.locationSliderMode=!0,this.placeVal=e.description,this.fields.glocations.value=e.description,this.enableLocationSlider=!0,this.placeId=e.place_id,this.showLocationDropdown=!1,this.searchData(1,""),setTimeout(function(){t.inputFields.glocations&&t.inputFields.glocations.field&&t.inputFields.glocations.field.focus()},100))},t.prototype.raiseSearchResultsEvent=function(){var e=this,t=0;Object.keys(this.facetSelectionCounts).forEach(function(o){t+=e.facetSelectionCounts[o]||0}),this.eventAggregator.publish("ph:searchResults",{jobResults:this.jobResults,aggregations:this.aggregations,totalJobs:this.totalJobs,searchSelectionKeys:this.searchSelectionKeys,searchParams:this.searchParams,searchKeyword:this.searchKeyword,locationKeyword:(this.locationKey&&this.locationKey.length)>0?this.locationKey:this.isAccessbility?this.fields.glocations.value:this.placeVal,pageSize:this.pageSize,selectedSkills:this.uiSkillSelection,allResults:this.allResults,clearResults:this.clearResults,clearAll:this.clearAll,spellCheckObject:this.spellCheckObject,searchConfigData:this.searchConfigData,triggerSpellCheck:this.triggerSpellCheck,isLocationSlider:this.hasLocationSliderFacet(),filterCount:t,resultsDisplayMode:this.resultsDisplayMode,sortFilter:this.sortFilter,locationData:{aboveMaxRadius:this.aboveMaxRadius,sliderRadius:this.sliderRadius,locationSliderFacetMaxRange:this.locationSliderFacetMaxRange,locationUnit:this.locationUnit,placeVal:this.isAccessbility?this.fields.glocations.value:this.placeVal}})},t.prototype.raiseSkillsResultsEvent=function(e){e&&e.suggestions&&e.suggestions.skills&&this.eventAggregator.publish("skillsResultsEvent",e.suggestions.skills)},t.prototype.handleSaveJob=function(e){this.bulkcart&&!e.inProgress&&(e.inProgress=!0,e.saveJobInterState?this.deleteJobFromCart(e):this.addToJobCart(e))},t.prototype.addToJobCart=function(e){var t=this,o={job:{title:e.title,jobSeqNo:e.jobSeqNo,location:e.location,type:e.type,shortDescription:e.descriptionTeaser,applyUrl:e.applyUrl,category:e.category,postedDate:e.postedDate,expiryDate:e.expiryDate,reqId:e.reqId,multi_location:e.multi_location}};this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyAdd,o).then(function(o){if(e.inProgress=!1,"602"==o.status){var i={trait5:e.jobSeqNo,trait14:e.category};e.saveJobInterState=!0,t.eventAggregator.publish("jobCartCount","+1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_added_to_jobcart",void 0,i)}else e.isJobSaved=!1,e.saveJobInterState=!1,console.info("failed on jobsave: "+o.status)})},t.prototype.deleteJobFromCart=function(e){var t=this,o={jobSeqNo:e.jobSeqNo};this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyDelete,o).then(function(o){if(e.inProgress=!1,"605"==o.status){var i={};e.isJobSaved=!1,e.saveJobInterState=!1,i.trait5=e.jobSeqNo,i.trait14=e.category,t.eventAggregator.publish("jobCartCount","-1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_unfavorited",void 0,i)}else e.isJobSaved=!0,e.saveJobInterState=!0,console.info("failed on deleteJobFromCart")})},t.prototype.updateFacetSelectionCounts=function(e,t){t&&t.reset&&(this.facetSelectionCounts={}),e&&(this.facetSelectionCounts=this.facetSelectionCounts||{},void 0==this.facetSelectionCounts[e]&&(this.facetSelectionCounts[e]=0),t&&t.decrement?this.facetSelectionCounts[e]=this.facetSelectionCounts[e]-1:this.facetSelectionCounts[e]=this.facetSelectionCounts[e]+1)},t.prototype.scrollToSelection=function(){if(this.lastSelection&&this.lastSelection.facet)for(var e=void 0,t=this.element.querySelectorAll('[data-ph-at-text="'+this.lastSelection.facet.name+'"]'),o=0;o<t.length;o++)if(e=t[o],this.currentfocusElem=e,e.focus(),e&&e.getAttribute&&e.getAttribute("data-ph-at-id")){var i=e.getAttribute("data-ph-at-id");if(i=="facet-"+this.lastSelection.facet.facet&&e&&e.scrollIntoView){e.scrollIntoView(!1),this.eventAggregator.publish("scrollToResults",{});break}}return!0},t.prototype.handleFacetSearch=function(e,t,o){if(this.searchFacets[e]&&this.searchFacets[e].length&&t&&t.trim().length>0){var i=this.searchFacets[e].filter(function(e){return!!e[o].toLowerCase().includes(t.toLowerCase())});this.searchFacetsIM[e]=i}else this.searchFacetsIM[e]=this.searchFacets[e].slice(0,this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)},t.prototype.clearFacetSearch=function(e,t){this.facetsMetaDataIM.filterKey[t]="",this.searchFacetsIM[e]=this.searchFacets[e].slice(0,this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)},t.prototype.handleYScroll=function(e,t){if(e.target){var o=e.target.scrollHeight;e.target.scrollTop+100<=o&&this.facetsMetaDataIM.count[t]>this.facetsMetaDataIM.index[t]+this.facetsMetaDataIM.size&&!this.isRequestInProgress&&this.loadMore(t)}},t.prototype.loadMore=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(o){return this.facetsMetaDataIM.index[e]+=this.facetsMetaDataIM.size,this.isRequestInProgress=!0,(t=this.searchFacetsIM[e]).push.apply(t,this.searchFacets[e].slice(this.facetsMetaDataIM.index[e],this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)),this.isRequestInProgress=!1,[2]})})},t.prototype.getFieldOptions=function(e){if("locationUnit"===e)return this.locationUnitList},t.prototype.setFieldValue=function(e,t,o){"locationUnit"===e&&this.locationUnitList.length&&this.locationUnitList[t]&&(this.locationUnit=this.locationUnitList[t].value,this.islocationUnitDropdown=!1)},t.prototype.getActiveIndex=function(e){return"locationUnit"===e&&this.locationUnitList.length?this.matchingIndex(this.locationUnitList,this.locationUnit):-1},t.prototype.matchingIndex=function(e,t){return e.findIndex(function(e){return e.value===t})},t.prototype.clearFieldValue=function(e){},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"categoryNameInput",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"city",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isAccessbility",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clickTojd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadType",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageKey",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageType",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"locationType",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"locationRangeEnd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clearResults",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"sort",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showJobs",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"onlyCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isCritical",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clearAll",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==a.CommonService&&a.CommonService)&&h||Object,s.FacetsService,"function"==typeof(d=void 0!==a.LocalStorageAPI&&a.LocalStorageAPI)&&d||Object,"function"==typeof(p=void 0!==a.CookieManager&&a.CookieManager)&&p||Object,"function"==typeof(u=void 0!==a.A11yAutoComplete&&a.A11yAutoComplete)&&u||Object,"function"==typeof(f=void 0!==a.GeoLocationService&&a.GeoLocationService)&&f||Object,i.EventAggregator])],t);var h,d,p,u,f}(a.PhenomWidget);t.Facets=h}),define("text!v1/ph-facets.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-search-results-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"",jobImageBasedOnTags:"jobImageBasedOnTags"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-search-results-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SearchResultsService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-search-results",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-search-results-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-search-results-v2",n="ph:showMore",c="job_click",l=function(e){function t(t,o,i,a,r){var l=e.call(this,t,o,s)||this;return l.element=t,l.commonService=o,l.searchResultsService=i,l.eventAggregator=a,l.phApp=r,l.pageSize=10,l.jobDateFormat="DEFAULT",l.mobilePaginationBlockSize=5,l.paginationBlockSize=10,l.jobsToShowBlockSize=10,l.linkBasedPagination=!1,l.jobImageTag="category",l.jobBadgeTag="category",l.hideLocationPopup=!1,l.searchParams={},l.subscriptions=[],l.jobResults=[],l.totalJobs=0,l.currentSelectedPage=1,l.startingJobNumberInPage=1,l.endingJobNumberInpage=1,l.prevButtonVisibility=!0,l.nextButtonVisibility=!0,l.paginationRange=[],l.mobilePaginationRange=[],l.searchSelectionKeys=[],l.paginationUrls={},l.mobilePaginationUrls={},l.noResults=!1,l.spellCheckFlag=!1,l.triggerSpellFlag=!0,l.originalSearchWord="",l.autocorrectedSearchWord="",l.clearResults="",l.clearAll=!1,l.isMostPopular=!1,l.showClearAll=!1,l.filterCount=0,l.textCleared=!1,l.scrollEnable=!1,l.locationData={},l.sortByList=[{value:"Most relevant"},{value:"Most recent"}],l.isSortByDropdown=!1,l.addJobContext=function(){l.commonService.addJobContext(s,l.jobResults),l.commonService.jobContext(s)},l.handleSearchResultsEvent=function(t){t&&(e.prototype.hideLoader.call(l),"showMore"==t.resultsDisplayMode||"infinity"==t.resultsDisplayMode?l.jobResults=l.jobResults.concat(t.jobResults||[]):l.jobResults=t.jobResults||[],l.totalJobs=t.totalJobs||0,l.searchSelectionKeys=t.searchSelectionKeys||{},l.searchParams=t.searchParams||{},l.triggerSpellFlag=t.triggerSpellFlag,t.searchConfigData&&void 0!=t.searchConfigData.isSuggestionsEnabled&&1==t.searchConfigData.isSuggestionsEnabled&&t.spellCheckObject&&void 0!=t.spellCheckObject.spellCheckApplied&&(l.spellCheckFlag=t.spellCheckObject.spellCheckApplied,"".match(t.spellCheckObject.suggestedKeyword)&&(l.spellCheckFlag=!1),l.autocorrectedSearchWord=t.spellCheckObject.suggestedKeyword||t.searchKeyword,l.originalSearchWord=t.spellCheckObject.originalKeyword||t.searchKeyword),l.searchParams&&!l.searchParams.sortBy&&(l.searchParams.sortBy="Most relevant"),l.currentSelectedPage=1,l.searchKeyword=t.searchKeyword,l.locationKey=t.locationKeyword,l.pageSize=t.pageSize||l.pageSize,l.selectedSkillKeywords=t.selectedSkills||"",l.noResults=t.allResults,l.clearResults=t.clearResults,l.clearAll=t.clearAll,l.filterCount=t.filterCount,l.maxDisplayCount=l.jobResults.length,l.clearAll&&(l.searchKeyword=""),l.jobResults.forEach(function(e){e.fitLevel&&"BAD FIT"==e.fitLevel.toUpperCase()&&(e.fitLevel=null)}),l.jobWidgetSettingsPromise.then(function(e){l.onDataChange(c)}),(t.isLocationSlider||!l.isErrorMsgReqd&&l.jobResults.length)&&e.prototype.showContainer.call(l),t.isLocationSlider&&t.locationData&&(l.locationData=t.locationData,l.locationData.isLocationSlider=t.isLocationSlider),l.addJobContext(),l.searchParams.from>0&&(l.currentSelectedPage=Math.ceil(l.searchParams.from/l.pageSize)+1),"pagination"==l.resultsDisplayMode&&l.applyPagination(),l.searchParams.isMostPopular&&(l.isMostPopular=!0),l.scrollEnable=!0,setTimeout(function(){e.prototype.fetchJobStatus.call(l)},250))},l.showResultsOnScroll=function(){
if("infinity"==l.resultsDisplayMode&&l.scrollEnable&&document.querySelector("[data-ph-at-id='jobs-list']")&&document.querySelector("[data-ph-at-id='jobs-list']").lastChild&&document.querySelector("footer")){var e=document.querySelector("[data-ph-at-id='jobs-list']").lastChild.previousElementSibling,t=document.querySelector("footer");if(l.isScrolledIntoView(e,t)){l.scrollEnable=!1;var o={resultsDisplayMode:l.resultsDisplayMode,pageNumber:++l.currentSelectedPage};l.eventAggregator.publish(n,o)}}},l.isLocalDataSourceFn=function(){return!0},l.addSubscriptions(),l}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this);var o=this.commonService.getSiteSettings("linkBasedPagination");"boolean"==typeof o&&(this.linkBasedPagination=o),this.resultsDisplayMode=this.commonService.getSiteSettings("resultsDisplayMode")||"pagination",setTimeout(function(){window.addEventListener("scroll",t.showResultsOnScroll)},200);var i=this.phApp.getSessionParams("showMap");"true"==i?this.openLocationMap():"false"==i?this.closeLocationMap():this.displayMapByDefault&&this.openLocationMap()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.addSubscriptions=function(){var t=this;this.subscriptions.push(this.eventAggregator.subscribe("ph:searchResults",this.handleSearchResultsEvent)),this.subscriptions.push(this.eventAggregator.subscribe("ph:fetchingResults",function(){e.prototype.unhideLoader.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.isErrorMsgReqd||e.prototype.hideContainer.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("scrollToResults",function(e){t.element.scrollIntoView()}))},t.prototype.loadOriginalKeywordSearchResults=function(){window.location.href=window.location.origin+window.location.pathname+"?keywords="+this.originalSearchWord+"&triggerSpellCheck=false"},t.prototype.loadAutoCorrectedWordSearchResults=function(){window.location.href=window.location.origin+window.location.pathname+"?keywords="+this.autocorrectedSearchWord+"&triggerSpellCheck=false"},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},t.prototype.applyPagination=function(){var e=Math.ceil(this.totalJobs/this.pageSize),t=Math.ceil(this.paginationBlockSize/2),o=Math.ceil(this.paginationBlockSize/2)-1,i=Math.floor(this.mobilePaginationBlockSize/2),a=Math.floor(this.mobilePaginationBlockSize/2),r=e<this.paginationBlockSize?e:this.paginationBlockSize,s=e<this.mobilePaginationBlockSize?e:this.mobilePaginationBlockSize,n=this.currentSelectedPage-t>1?this.currentSelectedPage-t:1,c=this.currentSelectedPage+o>r?this.currentSelectedPage+o:r,l=this.currentSelectedPage-i>1?this.currentSelectedPage-i:1,h=this.currentSelectedPage+a>s?this.currentSelectedPage+a:s;c>e&&(c=e),h>e&&(h=e);var d=this.paginationBlockSize-(c-n);d>0&&(n-=d);var p=this.mobilePaginationBlockSize-(h-l+1);p>0&&(l-=p),this.paginationRange=[];for(var u=n;u<=c;u++)u>0&&(this.paginationRange.push(u),this.paginationUrls[u]=this.paginationUrl(u));this.mobilePaginationRange=[];for(var u=l;u<=h;u++)u>0&&(this.mobilePaginationRange.push(u),this.mobilePaginationUrls[u]=this.paginationUrl(u));this.startingJobNumberInPage=this.totalJobs?(this.currentSelectedPage-1)*this.pageSize+1:0,this.endingJobNumberInpage=this.totalJobs>this.currentSelectedPage*this.pageSize?this.currentSelectedPage*this.pageSize:this.totalJobs,this.prevButtonVisibility=1!=this.currentSelectedPage,this.nextButtonVisibility=this.currentSelectedPage<e},t.prototype.clearSelection=function(e){e&&1==this.searchSelectionKeys.length?this.emptySelectionsAndCallSearch():e&&(e.checked=!1),this.eventAggregator.publish("ph:clearSelection",e)},t.prototype.emptySelectionsAndCallSearch=function(){var e=this;this.searchSelectionKeys=[],this.eventAggregator.publish("ph:resetAll",{}),this.showClearAll=!0,setTimeout(function(){var t=e.element.querySelector(".ph-a11y-sortby select");t&&t.focus(),e.showClearAll=!1},2e3)},t.prototype.clearLocationSelection=function(){this.eventAggregator.publish("ph:clearSelection","phLocSlider")},t.prototype.clearSubSearchAndCallSearch=function(){var e=this;this.eventAggregator.publish("ph:subSearchReset",this.searchParams.subsearch),this.searchParams.subsearch="",this.textCleared=!0,setTimeout(function(){e.textCleared=!1},1e3);var t=this.element.querySelector(".ph-a11y-subsearch");t&&t.focus()},t.prototype.filterSearch=function(){this.eventAggregator.publish("ph:subSearch",{subsearch:this.searchParams.subsearch})},t.prototype.sortfilterSearch=function(){this.eventAggregator.publish("ph:sortBy",{sortBy:this.searchParams.sortBy}),e.prototype.focusElement.call(this,".ph-a11y-sortby select",100)},t.prototype.showFacetFilter=function(){var e=this.element;this.eventAggregator.publish("ph:showfilter",e)},t.prototype.showMoreResults=function(){var e={resultsDisplayMode:this.resultsDisplayMode,pageNumber:++this.currentSelectedPage};this.eventAggregator.publish(n,e)},t.prototype.showLessResults=function(){this.jobResults=this.jobResults.slice(0,10),this.currentSelectedPage=1},t.prototype.isScrolledIntoView=function(e,t){if(e&&window.pageYOffset>e.offsetTop+e.offsetHeight-t.offsetHeight)return!0},t.prototype.paginationUrl=function(t){var o=this,i=(t-1)*this.pageSize,r="",s=window.location.origin+window.location.pathname,n=e.prototype.getQueryParam.call(this,"keywords"),c=e.prototype.getQueryParam.call(this,"lk"),l=e.prototype.getQueryParam.call(this,"rk")||this.commonService.getSessionParam("rk"),h=e.prototype.getQueryParam.call(this,"category"),d=e.prototype.getQueryParamsMap.call(this),p=Object.keys(d);if(this.triggerSpellFlag=e.prototype.getQueryParam.call(this,"triggerSpellCheck"),this.selectedSkillKeywords&&this.selectedSkillKeywords.length>0&&(n=this.selectedSkillKeywords),void 0!=n){var u=n;try{u=decodeURIComponent(n)}catch(e){a.logger.error(e)}r+="keywords="+encodeURIComponent(u)+"&",void 0!=this.triggerSpellFlag&&(r+="triggerSpellCheck="+this.triggerSpellFlag+"&")}return r+=i<=0?"s=1":"from="+i+"&s=1",c&&c.length>0&&(r+="&lk="+c),l&&l.length>0&&(r+="&rk="+l),h&&h.length>0&&(r+="&category="+h),p.forEach(function(t,i){var a=e.prototype.getQueryParam.call(o,t);a&&a.length&&a.startsWith("qk")&&(r+="&"+t+"="+a)}),this.clearAll&&("rules"==this.clearResults&&(r=r.replace("&lk="+c,""),r=r.replace("&category="+h,"")),"keywords"==this.clearResults&&(r=r.replace("keywords="+n,"")),"full"==this.clearResults&&(r="",r+=i<=0?"s=1":"from="+i+"&s=1")),s+="?"+r},t.prototype.handleGotoPageButton=function(t){e.prototype.getElement.call(this).scrollIntoView(),this.eventAggregator.publish("ph:gotoPageEvent",t)},t.prototype.stringify=function(e){return JSON.stringify(e)},t.prototype.getFieldOptions=function(e){if("sortBy"===e)return this.sortByList},t.prototype.setFieldValue=function(e,t,o){"sortBy"===e&&this.sortByList.length&&this.sortByList[t]&&(this.searchParams.sortBy=this.sortByList[t].value,this.sortfilterSearch())},t.prototype.getActiveIndex=function(e){return"sortBy"===e&&this.sortByList.length?this.matchingIndex(this.sortByList,this.searchParams.sortBy):-1},t.prototype.matchingIndex=function(e,t){return e.findIndex(function(e){return e.value===t})},t.prototype.clearFieldValue=function(e){},t.prototype.openLocationMap=function(){var t=document.querySelector(".search-with-map");t&&t.classList.add("show-map");var o={};o.showMap=!0,this.commonService.getDDO("ph-facets-v1","eagerLoadRefineSearchSession",o),e.prototype.trackWidgetClick.call(this,"show_map",{})},t.prototype.closeLocationMap=function(){var t=document.querySelector(".search-with-map");t&&t.classList.remove("show-map");var o={};o.showMap=!1,this.commonService.getDDO("ph-facets-v1","eagerLoadRefineSearchSession",o),e.prototype.trackWidgetClick.call(this,"close_map",{})},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"jobDateFormat",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"mobilePaginationBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"paginationBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"jobsToShowBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"linkBasedPagination",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobImageTag",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobBadgeTag",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"displayMapByDefault",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"hideLocationPopup",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==a.CommonService&&a.CommonService)&&l||Object,r.SearchResultsService,i.EventAggregator,"function"==typeof(h=void 0!==a.PhenomAppManager&&a.PhenomAppManager)&&h||Object])],t);var l,h}(a.PhenomJobWidget);t.SearchResults=l}),define("text!v2/ph-search-results.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-create-job-alert-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"jobAlertCreateV2",ddoKeyIM:"jobAlertCreateIM",ddoKeyManage:"jobAlertManage",ddoKeySocialProfile:"mergedProfile",ddoKeymasterFrequency:"masterFrequencyV1",ddoKeyValidateToken:"validateToken",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyATSProfileURL:"atsProfileURL",ddoKeyMergedProfile:"mergedProfile",ddoKeyuserAlertSettings:"userAlertSettings",isAlertExists:"isAlertExists",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKey2:"jobAlertCreateV3"}}}),define("v1/ph-create-job-alert-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.jobSeqNo="",this.name="",this.frequency="2",this.displayFrequency="",this.userSubType=""}return e}();t.CreateJobAlertModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-create-job-alert-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.getProfile=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CreateJobAlertService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(s,n)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){c.label=o[1];break}if(6===o[0]&&c.label<s[1]){c.label=s[1],s=o;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(o);break}s[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,s,n,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};define("v1/ph-create-job-alert",["require","exports","aurelia-framework","ph-common","./ph-create-job-alert-config","aurelia-event-aggregator","./ph-create-job-alert-service","./ph-create-job-alert-model"],function(e,t,o,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-create-job-alert-v1",l=function(e){function t(t,o,i,a,r){var s=e.call(this,t,o,c)||this;return s.element=t,s.commonService=o,s.createJobAlertService=i,s.createJobAlertModel=a,s.eventAggregator=r,s.isErrorMsgReqd=!1,s.isCriteria=!1,s.hideIfNoEmail=!1,s.errors={},s.showErrorMsg=!1,s.toggleJobAlert=!1,s.hideJobAlert=!0,s.facetObj={},s.userProfile={},s.isLoggedIn=!1,s.showSuccessMsg=!1,s.handleAlertStatus=!1,s.popupAlert=!1,s.isIconVisible=!0,s.closeAlert=!1,s.manageAlertStatus=!1,s.a=!1,s.masterFrequency=[],s.frequencyObj={},s.isDisabled=!1,s.isEmailReqd=!1,s.isNonJwtTokenTenant=!1,s.showNoJobErrorMsg=!1,s.showDuplicateErrorMsg=!1,s.isCandidateHomeEnabled=!1,s.noJobsFound=!1,s.jobAlertPresent=!1,s.alertDataParams={},s.isDefaultResultPresent=!1,s.isFirstAlert=!1,s.piiConsentError=!1,s.piiConsentContext={},s.consentPrefill=!0,s.isLocalDataSourceFn=function(){return!0},s}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.siteType=this.commonService.getSiteType(),this.getMasterFrequency(),this.isNonJwtTokenClient(),this.getPiiConsentData(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.isNonJwtTokenTenant||this.getProfile(),this.isEmailReqd&&(this.getEmail(),this.validateJwtToken()),this.eventAggregator.subscribe("saveSelections",function(e){i.logger.debug("i can hear u too",JSON.stringify(e)),t.facetObj=e,t.checkForDefaultResults()}),this.hideIfNoEmail&&this.profileEmailCheck();var o=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=o&&o.candidateHome,this.eventAggregator.subscribe("searchInitiated",function(e){t.alertDataParams=e,t.jobAlertPresentForSearch(),t.checkForDefaultResults()}),this.eventAggregator.subscribe("ph:searchResults",function(e){e&&0==e.totalJobs?t.noJobsFound=!0:t.noJobsFound=!1})},t.prototype.getPiiConsentData=function(){var e=this,t=a.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.createJobAlertService.makeDDORequest(c,t).then(function(o){if(o&&o.status&&"success"==o.status&&o.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=o),e.piiConsentData=o.data,e.handleConsentData();else{var i=e.commonService.getSiteSettings("piiConsentConfig");i&&(e.piiConsentData=JSON.parse(JSON.stringify(i)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.validateEmail.bind(this),this.piiConsentContext.widgetRef=this)},t.prototype.jobAlertPresentForSearch=function(){return __awaiter(this,void 0,void 0,function(){var t,o,i;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e.prototype.unhideLoader.call(this),t=JSON.parse(JSON.stringify(this.alertDataParams)),this.excludeEmptyFacets(t),[4,this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.isAlertExists,t)];case 1:return o=r.sent(),e.prototype.hideLoader.call(this),!o||"success"!=o.status&&"200"!=o.status||(this.jobAlertPresent=!o.key_enabled),[3,3];case 2:return i=r.sent(),[3,3];case 3:return[2]}})})},t.prototype.excludeEmptyFacets=function(e){"object"==typeof e.selected_fields&&Object.keys(e.selected_fields).length>0&&Object.keys(e.selected_fields).forEach(function(t){e.selected_fields[t].length<=0&&delete e.selected_fields[t]})},t.prototype.showSuccessOnAlertCreation=function(){if(this.isFirstAlert||this.showSuccessMsg){var t=this.element.querySelector(".success-overlay"),o=this.element.querySelector(".success-wrapper"),i=this.element.querySelector(".success-overlay div");t&&e.prototype.openDialogPopup.call(this,t,i,o)}},t.prototype.closeSuccessMsg=function(){this.showSuccessMsg=!1,e.prototype.closeDialogPopup.call(this)},t.prototype.isNonJwtTokenClient=function(){if(this.commonService.getRefNum){var e=this.commonService.getSiteSettings("tokenConfiguredTenants"),t=this.commonService.getRefNum();e&&e.refNums&&e.refNums.length&&-1!=e.refNums.indexOf(t)?this.isNonJwtTokenTenant=!0:this.isNonJwtTokenTenant=!1}},t.prototype.getMasterFrequency=function(){var e=this;this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeymasterFrequency,{}).then(function(t){t&&"success"==t.status&&(e.masterFrequency=t.data,e.getSelectedFrequency())})},t.prototype.getProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.createJobAlertService.getProfile(c,a.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(o){o&&o.email&&(o.consentProfile||(t.isDisabled=!0,t.isLoggedIn=!0),t.userProfile=o,t.createJobAlertModel.email=t.userProfile.email,t.piiConsentData&&t.piiConsentData.length&&t.consentPrefill&&t.piiConsentData.forEach(function(e){t.userProfile&&t.userProfile[e.type]&&(e.isChecked=!0)})),e.prototype.hideLoader.call(t)})},t.prototype.editEmail=function(){this.isIconVisible=!1},t.prototype.profileEmailCheck=function(){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:return t=a.WidgetConfig.v1.ddoKeyMergedProfile,[4,this.createJobAlertService.makeDDORequest(c,t)];case 1:return o=i.sent(),o&&o.email||e.prototype.hideContainer.call(this),[2]}})})},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.validateEmail=function(){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.createJobAlertModel.email?t.test(this.createJobAlertModel.email)?(this.hasErrors=!1,this.handleAlertStatus=!0):(this.hasErrors=!0,this.errors.email="E102"):(this.hasErrors=!0,this.errors.email="E101"),this.hasPiiErrors(),this.piiConsentError&&!this.hasErrors)return this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(!0),void e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{});this.hasErrors||this.createJobAlert(),this.hasErrors&&this.element.querySelector(".email-input input")&&this.element.querySelector(".email-input input").focus()},t.prototype.alertFrequency=function(){this.toggleJobAlert=!0},t.prototype.showMsg=function(){var t=this;this.handleAlertStatus=!1,this.popupAlert=!0,setTimeout(function(){var o=t.element.querySelector(".ph-a11y-manage-block"),i=t.element.querySelector(".ph-a11y-manage-modal-dialog a");e.prototype.openDialogPopup.call(t,"ph-a11y-manage-modal-dialog",o,i)},100)},t.prototype.closeManageAlert=function(){this.popupAlert=!1,this.closeAlert=!1,this.handleAlertStatus=!0,e.prototype.closeDialogPopup.call(this)},t.prototype.createJobAlert=function(){var t=this;this.showNoJobErrorMsg=!1,this.showDuplicateErrorMsg=!1,this.eventAggregator.publish("selectFields",{});var o={};o.alertData=this.facetObj,o.frequency=this.createJobAlertModel.frequency;var i=this.masterFrequency.find(function(e){return e.key==t.createJobAlertModel.frequency});i&&(o.frequencyString=this.widgetBundle[i.literalkey]),o.email=this.createJobAlertModel.email,this.createJobAlertModel.userSubType.length>0&&(o.userSubType=this.createJobAlertModel.userSubType),this.widgetBundle.alertNamePrefixNew&&this.widgetBundle.alertNamePrefixNew.length&&(o.alertNamePrefixNew=this.widgetBundle.alertNamePrefixNew),this.createJobAlertModel.name.length>0&&(o.name=this.createJobAlertModel.name),o.profile={},o.profile.email=this.createJobAlertModel.email,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),this.getFreqValue();var r=a.WidgetConfig.v1.ddoKey2;if("internal"==this.siteType&&(r=a.WidgetConfig.v1.ddoKeyIM),!this.hasErrors){e.prototype.unhideLoader.call(this);var s=o.alertData.selected_fields;Object.keys(s).length||o.alertData.keywords||!this.isCriteria?this.createJobAlertService.makeDDORequest(c,r,o).then(function(o){if(e.prototype.hideLoader.call(t),o&&"success"==o.status){var i=o.data;200==i.status&&(t.showSuccessMsg=!0,t.hideJobAlert=!1,i.data&&i.data.manageStatus&&(t.manageAlertStatus=i.data.manageStatus),e.prototype.focusElement.call(t,".ph-a11y-create-alert-submit",250)),i.hasOwnProperty("duplicateAlert")&&(t.showDuplicateErrorMsg=!1,setTimeout(function(){t.showDuplicateErrorMsg=!0},0),e.prototype.focusElement.call(t,".create-jobAlert-button",250))}else t.hideJobAlert=!0,t.hasErrors=!0,t.errors.email=null,e.prototype.focusElement.call(t,".create-jobAlert-button",250)},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")}):(this.showNoJobErrorMsg=!1,setTimeout(function(){t.showNoJobErrorMsg=!0},0),e.prototype.hideLoader.call(this))}},t.prototype.createAlert=function(){return __awaiter(this,void 0,void 0,function(){var t,o,i,r,s,n,l=this;return __generator(this,function(h){switch(h.label){case 0:return this.showNoJobErrorMsg=!1,this.showDuplicateErrorMsg=!1,this.eventAggregator.publish("selectFields",{}),t={},t.alertData=this.facetObj,t.frequency=this.createJobAlertModel.frequency,o=this.masterFrequency.find(function(e){return e.key==l.createJobAlertModel.frequency}),o&&(t.frequencyString=this.widgetBundle[o.literalkey]),this.createJobAlertModel.userSubType.length>0&&(t.userSubType=this.createJobAlertModel.userSubType),this.widgetBundle.alertNamePrefixNew&&this.widgetBundle.alertNamePrefixNew.length&&(t.alertNamePrefixNew=this.widgetBundle.alertNamePrefixNew),this.createJobAlertModel.name.length>0&&(t.name=this.createJobAlertModel.name),this.getFreqValue(),t.profile={},t.profile.email=this.createJobAlertModel.email,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){t.profile[e.type]=!!e.isChecked}),i=a.WidgetConfig.v1.ddoKey2,"internal"==this.siteType&&(i=a.WidgetConfig.v1.ddoKeyIM),this.hasErrors?[3,3]:(e.prototype.unhideLoader.call(this),r=t.alertData.selected_fields,Object.keys(r).length||t.alertData.keywords||!this.isCriteria?[4,this.createJobAlertService.makeDDORequest(c,i,t)]:[3,2]);case 1:return s=h.sent(),e.prototype.hideLoader.call(this),s&&"success"==s.status&&(n=s.data,200==n.status&&(this.showSuccessMsg=!0,setTimeout(function(){l.alertDataParams=__assign({},l.alertDataParams,l.facetObj),l.jobAlertPresentForSearch()},100),this.isFirstAlert=n.isFirstAlert,n.isFirstAlert&&!this.noJobsFound&&this.showSuccessOnAlertCreation(),this.hideJobAlert=!1,n.data&&n.data.manageStatus&&(this.manageAlertStatus=n.data.manageStatus)),n.hasOwnProperty("duplicateAlert")&&(this.showDuplicateErrorMsg=!0)),[3,3];case 2:this.showNoJobErrorMsg=!0,e.prototype.hideLoader.call(this),h.label=3;case 3:return[2]}})})},t.prototype.closeEmailAlert=function(){this.closeAlert=!1,this.popupAlert=!1},t.prototype.checkForDefaultResults=function(){Object.keys(this.alertDataParams).length>0&&(Object.keys(this.alertDataParams.selected_fields).length>0||this.alertDataParams.subsearch.length>0||this.alertDataParams.keywords.length>0||this.alertDataParams.location&&this.alertDataParams.location.length>0)?this.isDefaultResultPresent=!1:this.isDefaultResultPresent=!0},t.prototype.manageAlert=function(){var t=this;e.prototype.unhideLoader.call(this);var o={};o.email=this.createJobAlertModel.email,this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyManage,o).then(function(o){e.prototype.hideLoader.call(t),o&&"success"==o.status&&o.data.status,t.popupAlert=!1,t.closeAlert=!0,setTimeout(function(){var o=t.element.querySelector(".ph-a11y-manage-block"),i=t.element.querySelector(".ph-a11y-manage-modal-dialog-two .close ");e.prototype.openDialogPopup.call(t,"ph-a11y-manage-modal-dialog-two",o,i)},100)},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})},t.prototype.createNewAlert=function(){this.hideJobAlert=!0,this.showSuccessMsg=!1},t.prototype.getFrequencyObject=function(e){for(var t in this.masterFrequency)if(this.masterFrequency[t].key===e)return this.masterFrequency[t];return{key:"2",literalkey:"frequencyweekly"}},t.prototype.getFreqValue=function(){this.frequencyObj=this.getFrequencyObject(this.createJobAlertModel.frequency),this.createJobAlertModel.displayFrequency=this.frequencyObj.literalkey},t.prototype.getSelectedFrequency=function(){var t=this;this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyuserAlertSettings,{}).then(function(o){o&&o.data&&(t.createJobAlertModel.frequency=o.data.alertFrequency.key||t.createJobAlertModel.frequency,t.frequencyObj=t.getFrequencyObject(t.createJobAlertModel.frequency),t.createJobAlertModel.displayFrequency=t.frequencyObj.literalkey),e.prototype.hideLoader.call(t)},function(o){e.prototype.handleError.call(t,"")})},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{frequencydaily:"Daily",frequencyweekly:"Weekly",frequencymonthly:"Monthly",frequencybiweekly:"Bi-Weekly"}},t.prototype.getEmail=function(){var e=this;"internal"==this.siteType?this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyATSProfileURL).then(function(t){t&&"success"==t.status&&(e.isLoggedIn=!0,e.isDisabled=!0,e.createJobAlertModel.email=t.username||"",e.createJobAlertModel.name=t.firstName||"")},function(t){e.handleError()}):this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyValidateToken).then(function(t){t&&t.access_token&&(e.isLoggedIn=!0,e.isDisabled=!0,e.createJobAlertModel.email=t.user_name||"")},function(t){e.handleError()})},t.prototype.validateJwtToken=function(){var e=this;"internal"==this.siteType&&this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyValidateJwtToken).then(function(t){"success"==t.status&&t.data&&t.data.userSubType&&(e.createJobAlertModel.userSubType=t.data.userSubType)},function(e){new Error(e)})},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isCriteria",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"hideIfNoEmail",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isEmailReqd",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,s.CreateJobAlertService,n.CreateJobAlertModel,r.EventAggregator])],t);var l}(i.PhenomWidget);t.CreateJobAlert=l}),define("text!v1/ph-create-job-alert.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-create-job-alert-v1/default/view.html",["module"],function(e){
e.exports='<template>\n\t\x3c!-- view html here --\x3e\n\t<form role="form" submit.delegate="validateEmail()" show.bind="hideJobAlert">\n\t\t<div >\n\t\t\t<input type="text" placeholder="enter email" id="demo" value.bind="createJobAlertModel.email" >\n\t\t\t<a href="javascript:void(0)" mouseover.delegate="editEmail()" if.bind="isIconVisible===true" >icon</a>\n\t\t\t<span show.bind="hasErrors && errors.email == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\n\t\t\t<span show.bind="hasErrors && errors.email == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\n\t\t\t<span show.bind="hasErrors && errors.email != \'E101\' && errors.email != \'E102\'"><ppc-content> Something went wrong. Please try again </ppc-content> </span>\n\t\t\t<a href="javascript:void(0)" click.delegate="alertFrequency()">alert preferences</a>\n\t\t\t<div show.bind="toggleJobAlert">\n\t\t\t\t<select id="frequency" value.bind="createJobAlertModel.frequency" data-ph-at-id="" role="combobox" key-role="comboRole" aria-label="Select an email frequency" key-aria-label="selectFreq" change.delegate="changeFreq()">\n\t\t\t\t\t<option value.bind="freq.key" role="option" key-role="optionRole" repeat.for="freq of masterFrequency">${widgetBundle[freq.literalkey] | pht}</option>\n\t\t\t\t</select>   \n\t\t\t\t<input type="checkbox">Remember my preference\n\t\t\t</div>\n\t\t\t<button type="submit"> Create job alert</button>\n\t\t</div>\n\t\t\n\t\t</form>\n\t\t<div show.bind="showSuccessMsg">\n\t\t\t<h3>Job alert created successfully</h3>\n\t\t\t<p>E-mail:${createJobAlertModel.email} </p>\n\t\t\t\x3c!-- <p>Alert Frequency:${createJobAlertModel.displayFrequency} </p> --\x3e\n\t\t\t<p>Alert Frequency:${widgetBundle[createJobAlertModel.displayFrequency] | pht}</p>\n\t\t\t<a href="createNewAlert()">Create another alert</a>\n\t\t\t<a href="javascript:void(0)" if.bind="!isLoggedIn && manageAlertStatus" click.delegate="showMsg()">Manage alert</a>\n\t\t</div>\n\t\t<div show.bind="popupAlert">\n\t\t   <h3>Manage Job Alerts<a href="javascript:void(0)" click.delegate="closeManageAlert()"> close</a></h3>\n\t\t\t  <p>To manage your alerts,<a> sign-in</a> to career site using your credentials.</p>\n\t\t\t<p><a href="javascript:void(0)" click.delegate="manageAlert()" >click here</a> to receive an verification email\n\t\t\t\t\tthat will redirect you to \'Manage alerts\' page.</p>\t\t\n\t\t\t  <p>E-mail will be sent to "mymail@gamil.com"</p>\n\t\t</div>\n\t\t<div show.bind="closeAlert"><h3>Your email is on its way...</h3>\n\t\t\t<a href="javascript:void(0)" click.delegate="closeEmailAlert()" show.bind="closeAlert">close</a>\n\t\t\t<p>We\'ve emailed you a link to access your profile</p>\n\t\t</div>\t \n\t\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/email-job-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.name="",this.jobSeqNo="",this.siteType="external",this.referrerToken="",this.templateSiteType=""}return e}();t.EmailJobModel=o}),define("v1/ph-email-job-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"emailjob",jobDetailDDOKey:"jobDetail",ddoKeyShareDetails:"getSocialSharingDetails"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.emailThisJob=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e})},e.prototype.getSocialUrls=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.EmailJobService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job",["require","exports","aurelia-framework","ph-common","./ph-email-job-config","./ph-email-job-service","./email-job-model"],function(e,t,o,i,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-email-job-v1",c=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.element=t,r.commonService=o,r.emailJobService=i,r.emailJobModel=a,r.isPopupReqd=!1,r.isErrorMsgReqd=!1,r.replaceJobSeqNo=!1,r.disableName=!1,r.siteTypeExternal=!1,r.showSubTitle=!1,r.isDialog=!1,r.showDialogPopup=!1,r.showErrorMsg=!1,r.errors={},r.emailDomains=[],r.bodyclass="",r.isEmailClientEnabled=!1,r.piiConsentError=!1,r}return __extends(t,e),t.prototype.attached=function(){var t=this;this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.isEmailClientEnabled||(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.getPiiConsentData(),e.prototype.subscribeToEvent.call(this,"show-email-job",function(e){!t.jobSeqNo&&e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.openEmailDialog()}),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(e){e.visibilityType&&"Internal/External"==e.visibilityType?t.jobSeqNo=e.jobId:e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.jobId=e.jobId}),e.prototype.subscribeToEvent.call(this,"updateJob",function(o){o.jobSeqNo&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo?t.jobSeqNo=o.jobId:o.jobSeqNo&&(t.jobSeqNo=o.jobSeqNo),t.jobSiteType=o.siteType,t.jobLocation=o.location)}),this.fetchJobSeqNo())},t.prototype.getPiiConsentData=function(){this.piiConsentData=this.commonService.getSiteSettings("piiConsentConfig")},t.prototype.getBodyClass=function(){this.bodyclass=document.body.className},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(a.WidgetConfig.v1.jobDetailDDOKey,n);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.replaceJobSeqNo&&t?this.jobSeqNo=t.data.job.jobId:this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.emailThisJob=function(){var t=this;if("internal"==this.commonService.getSiteType()){var o={jobSeqNo:this.jobSeqNo,jobId:this.jobId,medium:"email-share",campaign:"jobs-share",source:"email",siteType:"external",email:this.emailJobModel.email,jobSiteType:"internal"==this.jobSiteType?"external":this.jobSiteType,jobLocation:this.jobLocation,templateSiteType:this.commonService.getSiteType()};this.emailJobService.getSocialUrls(n,a.WidgetConfig.v1.ddoKeyShareDetails,o).then(function(o){e.prototype.hideLoader.call(t),o&&o.status&&"SUCCESS"==o.status.toUpperCase()&&o.data&&o.data.jdUrl&&(t.emailJobModel.referrerToken=o.data.referrerToken),t.emailJob()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})}else this.emailJob()},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.emailJob=function(){var t=this;if(this.hasPiiErrors(),!this.piiConsentError){if(this.jobSeqNo||this.fetchJobSeqNo(),this.emailJobModel.jobSeqNo=this.jobSeqNo,this.emailDomains=this.commonService.getSiteSettings("emailDomains"),this.errors.name={},this.errors.email={},this.disableName&&delete this.emailJobModel.name,this.emailDomains){for(var o=!1,i=0,r=this.emailDomains;i<r.length;i++){var s=r[i];if(this.validateEmail(this.emailJobModel.email,s)){o=!0;break}}this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?o?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}else{var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?c.test(this.emailJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}(this.errors.name.error||this.errors.email.error)&&(this.hasErrors=!0,e.prototype.hideLoader.call(this)),this.hasErrors?setTimeout(function(){t.errors.name.error?t.element.querySelector(".ph-a11y-form-control-name").focus():!t.errors.name.error&&t.errors.email.error&&t.element.querySelector(".ph-a11y-form-control-email").focus()},50):(this.emailJobModel.templateSiteType=this.commonService.getSiteType(),this.jobSiteType&&("internal"==this.jobSiteType?this.emailJobModel.jobSiteType="external":this.emailJobModel.jobSiteType=this.jobSiteType),this.emailJobModel.jobLocation=this.jobLocation,this.emailJobService.emailThisJob(n,a.WidgetConfig.v1.ddoKey,this.emailJobModel).then(function(o){var i=t.element.querySelectorAll(".feedbackText")[0];if(o&&o.emailjob&&"success"==o.emailjob.status){var a={};a.trait15=t.emailJobModel.name?t.emailJobModel.name:"",a.trait27=t.emailJobModel.email,a.trait5=t.jobSeqNo,a.trait14=t.category,t.commonService.processTrackingEvent("email_job",void 0,a),e.prototype.hideLoader.call(t),t.showEmailSuccess=!0;var r=document.querySelector(".ph-a11y-email-submit"),s=t.element.querySelector(".success-hdlr button");r&&s&&e.prototype.openDialogPopup.call(t,"success-hdlr",r,s),t.emailJobModel.name="",t.emailJobModel.email=""}else{e.prototype.hideLoader.call(t),t.showEmailFailure=!0;var r=document.querySelector(".ph-a11y-email-submit"),s=t.element.querySelector(".failure-hdlr button");r&&s&&e.prototype.openDialogPopup.call(t,"failure-hdlr",r,s)}i&&i.setAttribute("tabindex","0"),setTimeout(function(){i&&i.focus()},50),t.isDialog&&(t.showDialogPopup=!0,t.emailJobModel.name="",t.emailJobModel.email="")},function(e){t.showEmailSuccess=!1,t.showEmailFailure=!1,t.closeEmailDialog()}))}},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.validateEmail=function(e,t){var o=e.toLowerCase().match("^(.+)@"+t.toLowerCase()+".com$");if(null==o)return!1;if(null!=o[1]){var i=/^\"?[\w-_\.]*\"?$/;return null!=o[1].match(i)}return!1},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.openEmailDialog=function(){if(this.isPopupReqd){this.showEmailDialog=!0;var t=document.getElementsByClassName("email")[0],o=this.element.querySelectorAll(".form-control")[0];t&&e.prototype.openDialogPopup.call(this,"modal",t,o),this.showEmailSuccess=!1,this.showEmailFailure=!1,this.getBodyClass();var i=this.bodyclass+" overflow-hidden";document.body.className=i}else{var a=document.querySelector('[as-element^="ph-email-job"]');if(a){var r=window.pageYOffset;if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var s=this.commonService.getNearestSectionElemOffsetTop(a,"bottom");r<s?this.commonService.smoothScroll(r,s,!0,30):this.commonService.smoothScroll(r,s,!1,30);var n=a.querySelector("input");n&&n.focus()}else{a.scrollIntoView(!1);var c=document.querySelectorAll(".ph-sticky-header"),l=0,h=window.scrollY,d=0;if(c.length){for(var p=0;p<c.length;p++)l+=c[p].offsetHeight;h&&l>window.innerHeight/2&&(d=a.offsetHeight-(window.innerHeight-l),window.scroll(0,h-d))}}}}},t.prototype.closeEmailDialog=function(){if(this.showEmailDialog=!1,this.showEmailSuccess=!1,this.showEmailFailure=!1,e.prototype.closeDialogPopup.call(this),this.errors.name={},this.errors.email={},document.body.classList&&document.body.classList.contains("overflow-hidden")&&document.body.classList.remove("overflow-hidden"),this.shareHandler){this.shareHandler({share:{name:"email"}});var t={jobSeqNo:this.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)}var o=this.element.querySelector(".ph-a11y-email-button");o&&o.focus()},t.prototype.closeFeedbackPopup=function(t){e.prototype.closeDialogPopup.call(this),t?this.closeEmailDialog():(this.errors.name={},this.errors.email={},this.errors.senderName={},this.emailJobModel.name="",this.emailJobModel.email="")},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobId",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopupReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Function)],t.prototype,"shareHandler",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"disableName",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"siteTypeExternal",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"showSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,r.EmailJobService,s.EmailJobModel])],t);var c}(i.PhenomWidget);t.EmailJob=c}),define("text!v1/ph-email-job.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-social-connect-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeySiteConfig:"siteConfig",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile",ddoKeySaveProfile:"saveProfile",ddoKeyGetNextPage:"getOnBoardingNextStep",ddoKeyGetIMLandingPage:"getIMLandingPage",ddoKeySocialConnectOptions:"socialConnectOptions",ddoKeyCreateConsentProfile:"createConsentProfile",ddoKeyJwtLogout:"jwtLogout"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SocialConnectService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect",["require","exports","aurelia-framework","ph-common","./ph-social-connect-config","./ph-social-connect-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-social-connect-v1",n=function(e){function t(t,o,i,a,r){var n=e.call(this,t,o,s)||this;return n.element=t,n.commonService=o,n.socialConnectService=i,n.candidateLoginService=a,n.localStorage=r,n.fyfStepLandInfo={},n.piiconsent={},n.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",LINKEDIN:"linkedIn",GOOGLE:"google",LOGIN:"google-signin"},n.submitAction={NEXT:"next",PREV:"prev"},n.enabledSocial=["facebook","linkedin","live","google"],n.connectedState={},n.siteVariant="i",n.isLoggedIn=!1,n.showPopup=!1,n.externalEnabledSocial=[],n.internalEnabledSocial=[],n.providers={},n.redirectUri="",n.openMenuPopup=!1,n.privacyDataConsent=!1,n.privacyConsentReqFlag=!1,n.privacyConsentError=!1,n.privacyConsentPreCheck=!1,n.showLink=!1,n}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),"internal"==this.commonService.getSiteType()&&this.getOnBoardingStepData(),this.isPrivacyDataConsentCheckBoxRequired(),this.getEnabledSocial(),this.getConnectedData(),this.handleLoginPage(),this.getJwtToken(),this.privacyConsentError=!1,e.prototype.subscribeToEvent.call(this,"social-logout",function(){t.isLoggedIn=!1}),e.prototype.subscribeToEvent.call(this,"secure-url-click",function(e){t.togglePopup(e),t.redirectUri=e.redirectUri}),this.onBoardingStepId=localStorage.onBoardingStepId;var o=e.prototype.getQueryParam.call(this,"atsRedirectUrl")||"";this.atsInternalLogin=decodeURIComponent(o),window.location.hash&&(this.showLink=!0)},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox"),this.commonService.getSiteSettings("privacyDataConsentPreCheck")&&(this.privacyDataConsent=!0,this.privacyConsentPreCheck=!0)},t.prototype.profileLoginFlowChanged=function(e,t){this.profileLoginFlow=e,this.privacyConsentError=!1},t.prototype.piiconsentChanged=function(e,t){this.piiconsent=e},t.prototype.isPrivacySocialConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.togglePopup=function(t){var o,i;this.element.querySelector('[data-is-popup-view="true"]')&&(this.showPopup=!this.showPopup,this.showPopup?(e.prototype.trackWidgetClick.call(this,"signIn_click",{}),o=this.element.querySelector(".signin-link"),i=this.element.querySelector(".ph-a11y-sign-in"),e.prototype.openDialogPopup.call(this,"modal",o,i)):(e.prototype.trackWidgetClick.call(this,"signIn_popup_close_click",{}),e.prototype.closeDialogPopup.call(this)))},t.prototype.getOnBoardingStepData=function(){var e=this,t=a.WidgetConfig.v1.ddoKeyGetIMLandingPage;this.socialConnectService.makeDDORequest(s,t).then(function(t){e.onBoardingStepId=t.stepId||""},function(e){i.logger.debug(e)})},t.prototype.onBlurHandler=function(e,t){var o=this;return t?(this.blurTimers&&clearTimeout(this.blurTimers),this.openMenuPopup=!0):(this.blurTimers&&clearTimeout(this.blurTimers),this.blurTimers=setTimeout(function(){o.openMenuPopup=!1},300)),!0},t.prototype.getEnabledSocial=function(){var e=this,t=a.WidgetConfig.v1.ddoKeySocialConnectOptions,o=this.commonService.getSiteType();this.socialConnectService.makeDDORequest(s,t).then(function(t){t&&t.status&&"SUCCESS"==t.status.toUpperCase()?(e.enabledSocial=t.data,(t.data&&!t.data.external||!t.data.external.length)&&t.data[o]&&(e.enabledSocial.external=t.data[o]),e.fyfStepLandInfo.socialOptions&&e.fyfStepLandInfo.socialOptions.length||(e.fyfStepLandInfo.socialOptions=[],e.enabledSocial&&e.enabledSocial.external&&e.enabledSocial.external.forEach(function(t){e.fyfStepLandInfo.socialOptions.push(t.name)})),e.rearrangeSocials()):(e.rearrangeSocials(),i.logger.debug("social config not found"))})},t.prototype.rearrangeSocials=function(){var t=this;setTimeout(function(){var o=t.element.querySelector("#social-container");if(o){for(var i=[],a=o.children.length,r=0;r<a;r++){var s=o.children[0];i[r]=s,o.removeChild(s)}t.enabledSocial.internal.forEach(function(e){var t=i.find(function(t){return t.id==e.name});t&&o.appendChild(t)})}e.prototype.hideLoader.call(t)},250)},t.prototype.handleLoginPage=function(){var e=this.commonService.getSiteSettings("oauth");e?this.providers=e:i.logger.debug("siteconfig data not available...")},t.prototype.getConnectedData=function(){var e=this;this.socialConnectService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyMergedProfile).then(function(t){t&&t.socialAccounts&&(e.mergedProfile=t,t.socialAccounts.forEach(function(t){e.connectedState[t.social]=t.status}))})},t.prototype.getLoacale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getJwtToken=function(){var t=this,o={};this.candidateLoginService.getValidateJwtToken(s,a.WidgetConfig.v1.ddoKeyValidateJwtToken,o).then(function(e){e.data.isValidToken&&(t.isLoggedIn=!e.data.isAnonymous)},function(o){e.prototype.hideLoader.call(t),new Error(o)})},t.prototype.dologin=function(t){var o=e.prototype.getQueryParam.call(this,"qpage")||"";o=decodeURIComponent(o);var a=e.prototype.getQueryParam.call(this,"page")||"",r=this.providers[t],s=this.getLoacale(),n=this.commonService.getLocale(),c=window.location.pathname,l=this.redirectUri||window.location.href;o||(c+=window.location.search);var h={page:c,protocol:window.location.protocol,localePath:s,qpage:o,pagename:a,locale:n,siteVariant:this.siteVariant,rurl:encodeURIComponent(l)},d=new URLSearchParams(window.location.search),p=d.get("RelayState")||"";p&&p.length&&(h.RelayState=p),t==this.providerKey.LOGIN&&(h.so="gs"),r?(r.redirectUriPath=this.commonService.getRootDomain()+r.redirectUri,r.state=JSON.stringify(h),this.redirectToProvider(r,t)):i.logger.debug("provider doesnt exist")},t.prototype.redirectToProvider=function(e,t){var o=this.providerKey,i=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case o.MICROSOFT:case o.LINKEDIN:i+="client_id="+encodeURIComponent(e.clientId)+"&";break;case o.GOOGLE:case o.LOGIN:i+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case o.FACEBOOK:i+="client_id="+encodeURIComponent(e.clientId)+"&"}t&&(i+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(i+="&scope="+encodeURIComponent(e.scope)),e.state&&(i+="&state="+encodeURIComponent(e.state)),window.location.href=i)},t.prototype.submit=function(e){if(e==this.submitAction.NEXT||e==this.submitAction.PREV){var t=a.WidgetConfig.v1.ddoKeyGetNextPage,o={};o.stepId=this.onBoardingStepId,o.action=e,this.socialConnectService.makeDDORequest(s,t,o).then(function(e){e.pageUrl?window.location.href=e.pageUrl:i.logger.debug("Error fetching page URL")},function(e){i.logger.debug(e)})}else i.logger.debug("Invalid action :: "+e)},t.prototype.doProfileLogin=function(e){var t=this;if(this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length){if(this.piiconsent.checkConsentError&&this.piiconsent.checkConsentError()&&"signUp"==this.profileLoginFlow)return void(this.piiconsent.handleError&&this.piiconsent.handleError())}else if(this.privacyConsentReqFlag&&(this.privacyConsentError=!1,!this.privacyDataConsent&&"signUp"==this.profileLoginFlow))return void(this.privacyConsentError=!0);var o={},i={};o.trait213=e.name,this.commonService.processTrackingEvent("social_login_click",void 0,o),this.redirectPage&&this.redirectPage.length&&(this.redirectUri="/");var r={redirectUri:this.redirectUri,name:e.name};this.fyfStepLandInfo&&this.fyfStepLandInfo.optIn&&(i.optIn=this.fyfStepLandInfo.optIn);var n=this.candidateLoginService.socialLoginUrl(s,e.userType,r,i),c=this.commonService.getSiteSettings("ignoreLinkedInStateParam");if("linkedIn"==e.name&&!c){var l;try{l=JSON.parse(this.getQueryParam(n,"state")||"{}"),Object.keys(l).forEach(function(e){l[e]=decodeURIComponent(l[e])})}catch(e){}this.socialConnectService.makeDDORequest(s,"storeStateParams",{stateParams:l}).then(function(e){e&&e.data?window.location.href=t.setQueryParam(n,"state",e.data):window.location.href=n})}if(this.fyfStepLandInfo&&"fyf"==this.fyfStepLandInfo.context&&this.localStorage.setItem("fyfStepLandInfo",this.fyfStepLandInfo),this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length&&"signUp"==this.profileLoginFlow){var h={profile:{}};this.piiconsent.consentData.forEach(function(e){e.type&&(h.profile[e.type]=!!e.isChecked)}),this.socialConnectService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyCreateConsentProfile,h).then(function(e){n&&(window.location.href=n)})}else("linkedIn"!=e.name||c)&&n&&(window.location.href=n)},t.prototype.getQueryParam=function(e,t){for(var o=e.substr(1),i=o.split("&"),a=0;a<i.length;a++){var r=i[a];if(r=r.split("="),r.length>1&&r[0]==t)return decodeURIComponent(r[1])}},t.prototype.setQueryParam=function(e,t,o){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+o+"$2"):e+a+t+"="+o},t.prototype.guestLogin=function(){var t=e.prototype.getQueryParam.call(this,"qpage")||"";t=decodeURIComponent(t);var o;if(t.length&&(o=this.commonService.getRootDomain()+t+"&qGuest=true"),t){var i={};i.trait213="guest",this.commonService.processTrackingEvent("social_login_click",void 0,i),window.location.href=o}},t.prototype.doProfileLogout=function(){var t=this;e.prototype.trackWidgetClick.call(this,"logout_click",{}),this.candidateLoginService.doLogout(s,a.WidgetConfig.v1.ddoKeyJwtLogout).then(function(o){o&&"success"==o.status?(t.isLoggedIn=!1,e.prototype.raiseEvent.call(t,"social-logout",{})):i.logger.debug("Failure ",o)})},t.prototype.getLocalWidgetBundle=function(){return{profileCount:"{{profileCount}} previous profiles",profileCountSingler:"{{profileCount}} previous profile",duplicateProfileInfo:"{{profileCount}} duplicate profiles found",facebook:"Sign in with Facebook",google:"Sign in with Google",linkedIn:"Sign in with LinkedIn",mergeCount:"Merge selected ({{profileCount}})","google-sign":"Sign in with Google",duplicateProfileInfoSingler:"{{profileCount}} duplicate profile found"}},t.prototype.handleSkip=function(e,t,o){this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfFuncRef&&this.fyfStepLandInfo.fyfFuncRef(e,t,o)},t.prototype.handleNextKeyup=function(e,t,o){return e&&e.length-1==t&&this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfNextStepFuncRef&&this.fyfStepLandInfo.fyfNextStepFuncRef(o),!0},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"fyfStepLandInfo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"redirectPage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"profileLoginFlow",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"piiconsent",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(n=void 0!==i.CommonService&&i.CommonService)&&n||Object,r.SocialConnectService,"function"==typeof(c=void 0!==i.CandidateLoginService&&i.CandidateLoginService)&&c||Object,"function"==typeof(l=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&l||Object])],t);var n,c,l}(i.PhenomWidget);t.SocialConnect=n}),define("text!v1/ph-social-connect.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-range-slider-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-range-slider-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.RangeSliderService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-range-slider",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-range-slider-service","nouislider"],function(e,t,o,i,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0
});var n="ph-range-slider-v1",c=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.rangeSliderService=i,r.eventAggregator=a,r.rangeVal=0,r.rangeStart=0,r.rangeEnd=100,r.step=1,r.doNotExec=!1,r.prevVal=0,r}return __extends(t,e),t.prototype.rangeEndChanged=function(e,t){this.rangeEnd=e},t.prototype.rangeValChanged=function(e,t){this.slider&&this.slider.set(e)},t.prototype.triggerChange=function(){},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this);var o=document.createElement("div");this.element.appendChild(o),setTimeout(function(){var e;if(o){e=s.create(o,{start:[t.rangeVal],connect:!0,range:{min:t.rangeStart,max:t.rangeEnd},step:t.step}),t.slider=e;var i,a=o.querySelector(".noUi-handle"),r=!1;a.setAttribute("tabindex","0"),a.setAttribute("aria-valuemin",t.rangeStart),a.setAttribute("aria-valuemax",t.rangeEnd),i=Number(o.noUiSlider.get()),a.setAttribute("aria-valuenow",i),a.setAttribute("aria-valuetext",i+" miles"),a.setAttribute("role","slider"),a.setAttribute("aria-label","Range slider"),a.addEventListener("keydown",function(e){e.shiftKey||e.shiftKey&&"Tab"===e.key||(t.doNotExec=!0,37===e.which&&(i-=1),39===e.which&&(i+=1),o.noUiSlider.set(i))}),a.addEventListener("keyup",function(e){if(!(9==e.which||e.shiftKey&&"Tab"===e.key)){if(!r)var o=setTimeout(function(){t.doNotExec=!1,t.applyRangeVal(),clearTimeout(o),r=!1},250);r=!0}}),e&&(e.on("set",function(e,o){e&&e[0]&&(e=parseInt(e[0]),t.rangeVal!=e&&(t.rangeVal=e,t.applyRangeVal()))}),e.on("end",function(e,o){e&&e[0]&&(e=parseInt(e[0]),t.rangeVal!=e&&(t.rangeVal=e,t.applyRangeVal()))}))}},0)},t.prototype.applyRangeVal=function(){this.changeHandler&&!this.doNotExec&&this.changeHandler.apply(null,[this.rangeVal])},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"rangeVal",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"rangeStart",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"rangeEnd",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"step",void 0),__decorate([o.bindable(),__metadata("design:type",Function)],t.prototype,"changeHandler",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,r.RangeSliderService,a.EventAggregator])],t);var c}(i.PhenomWidget);t.RangeSlider=c}),define("text!v1/ph-range-slider.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-range-slider-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-page-state-data-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-page-state-data-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.PageStateDataService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-page-state-data",["require","exports","aurelia-framework","ph-common","./ph-page-state-data-service","aurelia-event-aggregator"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-page-state-data-v1",n=function(e){function t(t,o,i,a){var r=e.call(this,t,o,s)||this;return r.commonService=o,r.pageStateDataService=i,r.eventAggregator=a,r.pageStateData={},r.subscriptions=[],r}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.handleEventSubscriptions()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.handleEventSubscriptions=function(){var e=this;this.pageStateData=this.commonService.getPageStateData(),this.subscriptions.push(this.eventAggregator.subscribe("pageStateData",function(t){e.pageStateData=e.commonService.getPageStateData()}))},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(n=void 0!==i.CommonService&&i.CommonService)&&n||Object,a.PageStateDataService,r.EventAggregator])],t);var n}(i.PhenomWidget);t.PageStateData=n}),define("text!v1/ph-page-state-data.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-page-state-data-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-skills-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-skills-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SkillsService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-skills",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-skills-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-skills-v1",n=function(e){function t(t,o,i,a){var r=e.call(this,t,o,s)||this;return r.element=t,r.commonService=o,r.skillsService=i,r.eventAggregator=a,r.skills=[],r.selectedSkill=[],r.maxDisplayCount=3,r.displayCount=5,r.seemoretext=!0,r.isSeeMore=!1,r.seeMoreCount=2,r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.tempMaxDisplayCount=this.maxDisplayCount,this.eventAggregator.subscribe("skillsResultsEvent",function(e){t.skills=e,t.maxDisplayCount=t.tempMaxDisplayCount,t.showMoreOption()})},t.prototype.showMoreOption=function(){this.seemoretext=this.seemoretext&&this.skills.length>this.maxDisplayCount,this.seemoretext?this.isSeeMore=!0:this.isSeeMore=!1},t.prototype.selectedSkills=function(e){this.selectedSkill.push(e),this.eventAggregator.publish("selectedSkillField",this.selectedSkill)},t.prototype.removeSkills=function(e){this.skills.splice(e,1),this.skills.length==this.maxDisplayCount&&(this.isSeeMore=!1)},t.prototype.seeMore=function(){this.trackSeeMoreClick("skills_see_more_click",{}),this.isSeeMore?this.maxDisplayCount+=this.seeMoreCount:this.maxDisplayCount=this.seeMoreCount,this.displayCount>this.maxDisplayCount?this.isSeeMore=!0:this.isSeeMore=!1},t.prototype.trackSeeMoreClick=function(t,o){e.prototype.trackWidgetClick&&e.prototype.trackWidgetClick.call(this,t,o)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"maxDisplayCount",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"displayCount",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(n=void 0!==i.CommonService&&i.CommonService)&&n||Object,r.SkillsService,a.EventAggregator])],t);var n}(i.PhenomWidget);t.Skills=n}),define("text!v1/ph-skills.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-skills-v1/default/view.html",["module"],function(e){e.exports='<template>\n\x3c!-- view html here --\x3e\n  <div>\n        <ul if.bind="skills.length">\n            <li repeat.for="eachSkill of skills" show.bind="maxDisplayCount>$index">\n                <a href="javascript:void(0)" name.bind="eachSkill" click.delegate="selectedSkills(eachSkill)"> ${eachSkill}</a>\n                <a href="javascript:void(0)" name.bind="eachSkill" click.delegate="removeSkills($index)"> x</a>\n            </li>\n        </ul>\n        <div class="actions" show.bind="isSeeMore">\n            <a ref="linkEle" href="javascript:void(0)" click.delegate="seeMore()"><ppc-content>See more</ppc-content></a>\n        </div>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-category-overview-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"categories",ddoKeyMasterData:"categoryMasterData",landingpageddoKey:"getBusinessRules",ddoKeyMasterDatav2:"categoryMasterDataV2",imVariantsConfigInfo:"imVariantsConfigInfo"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-category-overview-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.getDefaultImg=function(e){return this.commonService.getImageUrl(e)},e.prototype.getCategories=function(e,t){return this.commonService.getDDO(e,t,{field:"category",sub_field:"internalCategoryId"}).then(function(e){return e.categories&&e.categories.data&&e.categories.data.category})},e.prototype.getLandingPageCategories=function(e,t,o){var i=this,a={field:"category",sub_field:"internalCategoryId",condition:o.landingPageCondition,rk:o.rk};return new Promise(function(o,r){var s=i.commonService.getCachedDDO("eagerLoadCategories",e);s?o(s.data.category):i.commonService.getDDO(e,t,a).then(function(e){o(e.categories&&e.categories.data&&e.categories.data.category)})})},e.prototype.getSubCategories=function(e,t,o,i){return this.commonService.getDDO(e,t,o).then(function(e){return e[t].data.category[i]||[]})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CategoryOverviewService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(s,n)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){c.label=o[1];break}if(6===o[0]&&c.label<s[1]){c.label=s[1],s=o;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(o);break}s[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,s,n,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n};define("v3/ph-category-overview",["require","exports","aurelia-framework","ph-common","./ph-category-overview-config","aurelia-event-aggregator","./ph-category-overview-service"],function(e,t,o,i,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="v3",c="ph-category-overview-"+n,l="imVariantsConfigInfo",h=function(e){function t(t,o,i,r,s){var h=e.call(this,t,o,c)||this;return h.element=t,h.commonService=o,h.categoryOverviewService=i,h.localStorage=r,h.eventAggregator=s,h.mode="all",h.cardsPerSlide=4,h.cardsPerRow=3,h.rowCount=2,h.modeOptions={},h.type="category",h.categoryClass="",h.showErrorMsg=!1,h.isKeyPress=!1,h.isKeyPressEnabled=!1,h._defaultModeOptions={autoPlay:!1,interval:5e3,next:!0,prev:!0,indicators:!0,pauseOnHover:!1,loop:!1,viewMoreMode:"evenMore",navPosition:"center"},h._changeSlide=!0,h.cardStyleClassSuffix=3,h.gridColSize=12,h.viewEvenMoreCount=!0,h.activeCategory={},h.hideViewAll=!0,h.hideViewEvenMore=!0,h.hideViewNext=!0,h.hideLess=!0,h.placeVal="",h.subscriptions=[],h.jobTypesConditions={Internal:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("Internal")',External:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("External")'},h.imInit=function(){return __awaiter(h,void 0,void 0,function(){var t,o,i;return __generator(this,function(r){switch(r.label){case 0:return[4,this.categoryOverviewService.makeDDORequest(c,a.WidgetConfig[n][l],{})];case 1:return t=r.sent(),e.prototype.hideLoader.call(this),t.status&&"success"==t.status&&t.data&&t.data.values&&t.data.values.length&&-1!=(o=t.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(i=t.data.values[o].types)&&1==i.length&&(this.jobsType="internal"==i[0]?"Internal":"External"),this.init(),[2]}})})},h}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this._updateModeOptions(),this.handleMouseHover(),this.entriesPerSlide=this.cardsPerSlide,this.asDependent&&e.prototype.hideContainer.call(this)},t.prototype.created=function(){var t=this;this.localStorage.getItem("categories")||this.localStorage.setItem("categories",[]),"internal"==this.commonService.getSiteType()?this.imInit():this.init(),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.searchKeyword=o.searchKeyword,t.placeVal=o.placeVal,e.prototype.showContainer.call(t)}))},t.prototype.init=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length?(this.landingPageCondition=this.jobTypesConditions[this.jobsType],this.getLandingPageCategories()):this.rk&&this.rk.length?this.getLandingPageKey().then(function(t){t&&t.data&&t.data[e.rk]?(e.landingPageCondition=t.data[e.rk].condition,e.getLandingPageCategories()):e.handleError("")}):this.type&&"subCategory"==this.type?this.getSubCategories():this.getCategories()},t.prototype.getLandingPageKey=function(){if(this.rk&&this.rk.length>0){var e={},t={};return t.landingPageKeys=[this.rk],e.pageIdentifier=t,this.categoryOverviewService.getLandingpageKey(c,a.WidgetConfig[n].landingpageddoKey,e)}},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getLandingPageCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={landingPageCondition:this.landingPageCondition,rk:this.rk};this.categoryOverviewService.getLandingPageCategories(c,a.WidgetConfig[n].ddoKey,o).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getDefaultImg=function(e){return this.categoryOverviewService.getDefaultImg(e)},t.prototype.getCategories=function(){var t=this;e.prototype.unhideLoader.call(this),this.categoryOverviewService.getCategories(c,a.WidgetConfig[n].ddoKey).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getSubCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={};o.field="category",o.sub_field="subCategory",this.categoryOverviewService.getSubCategories(c,a.WidgetConfig[n].ddoKey,o,this.category).then(function(e){t.getCategoryMasterData(e,t.type)})},t.prototype.getCategoryMasterData=function(t,o){var i=this;"subCategory"==o?(this.categories=t,this.categoryViewModel=this.categories,this.cardStyleClassSuffix=this.gridColSize/this.cardsPerRow,this.handleCategoryView(),"slider"==this.mode&&(e.prototype.getSlideData.call(this),this.modeOptions.autoPlay&&this.autoplay()),this.categories.forEach(function(e){e.key||(e.key=e.category)}),e.prototype.hideLoader.call(this)):this.categoryOverviewService.getCategoryMasterData(c,a.WidgetConfig[n].ddoKeyMasterDatav2).then(function(o){var a,r,s=[],n=[];if(o=o||{},o&&o.orderType&&"default"!=o.orderType?"custom"==o.orderType&&(a=o.categories||[],r=t||[]):(a=t||[],r=o.categories||[]),a.length){var c=void 0,l=void 0,h=void 0,d=void 0,p=void 0;for(l=0;l<a.length;l++)s.push(a[l].internalId);for(h=0;h<r.length;h++)n.push(r[h].internalId);for(d=0;d<s.length;d++)if(a[d].isRemoveEle=!0,-1!=(c=n.indexOf(s[d]))){a[d].isRemoveEle=!1,p=r[c];for(var u in p)(void 0==a[d][u]&&p.hasOwnProperty(u)||p.hasOwnProperty(u)&&!a[d].hasOwnProperty(u))&&(a[d][u]=p[u]);var f=(i.category||"").toLowerCase(),g=(p.category||"").toLowerCase();f==g&&(i.activeCategory=a[d])}if(!i.showEmptyCategories&&"default"!=o.orderType){for(var y=[],m=0;m<a.length;m++)a[m].isRemoveEle||y.push(a[m]);a=y}a.length&&(i.categoryStaticContent=a,i.categories=a,i.categoryViewModel=a,i.cardStyleClassSuffix=i.gridColSize/i.cardsPerRow,i.handleCategoryView(),"slider"==i.mode&&(e.prototype.getSlideData.call(i),i.modeOptions.autoPlay&&i.autoplay()),i.categories.forEach(function(e){e.key||(e.key=e.category)}))}(o||o.categories||o.categories.length)&&(i.categoryViewModel.length||i.showEmptyCategories)||i.handleError(""),e.prototype.hideLoader.call(i)})},t.prototype.autoplay=function(){var t=this;this.modeOptions.autoPlay&&(this._timeout=setTimeout(function(){t._changeSlide&&(t.currSlide>=0&&t.currSlide<t.totalSlides-1?(e.prototype.goToNextSlide.call(t),t.autoplay()):t.currSlide==t.totalSlides-1&&t.modeOptions.loop&&(t.currSlide=-1,e.prototype.goToNextSlide.call(t),t.autoplay()))},this.modeOptions.interval||5e3))},t.prototype.handleMouseHover=function(){var e=this;("slider"!=this.mode||this.modeOptions.pauseOnHover)&&(this.element.addEventListener("mouseenter",function(t){e._changeSlide=!1}),this.element.addEventListener("mouseleave",function(t){e._changeSlide=!0,clearTimeout(e._timeout),e.currSlide>=0&&e.currSlide<e.totalSlides&&e.autoplay()}))},t.prototype.handleCategoryView=function(){var e=this.setCategoryCount();this.categoryViewModel.length&&"showMore"==this.mode&&this.categoryViewModel.length>e&&this.setShowMoreInitialStates(this.modeOptions.viewMoreMode)},t.prototype._updateModeOptions=function(){for(var e in this._defaultModeOptions)this._defaultModeOptions.hasOwnProperty(e)&&!this.modeOptions.hasOwnProperty(e)&&(this.modeOptions[e]=this._defaultModeOptions[e])},t.prototype.setShowMoreInitialStates=function(e){var t=this.setCategoryCount();this.categoryViewModel=this.categories.slice(0,t),"all"==e?this.hideViewAll=!1:"evenMore"==e?(this.hideViewEvenMore=!1,this.viewEvenMoreCount=!0):"viewNext"==e&&(this.hideViewNext=!1)},t.prototype.setCategoryCount=function(){return this.cardsPerRow*this.rowCount},t.prototype.viewLess=function(){var e=this;setTimeout(function(){e.setShowMoreInitialStates(e.modeOptions.viewMoreMode),e.hideLess=!0,!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access="showMore"]')&&e.element.querySelector('[data-access="showMore"]').focus()},150))},150)},t.prototype.viewAll=function(){var t=this.categories.length-(this.categories.length-this.categoryViewModel.length);this.categoryViewModel=this.categories,this.hideViewAll=!0,this.hideLess=!1,e.prototype.focusElement.call(this,'[data-access-list-item="'+t+'"]',150)},t.prototype.viewEvenMoreOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewNextOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewLessOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewEvenMore=function(){var e=this;setTimeout(function(){if(e.viewEvenMoreCount)e.viewNext(),e.viewEvenMoreCount=!1;else if(e.isKeyPress||!e.isKeyPressEnabled){e.isKeyPress=!1;var t=e.categories.length-(e.categories.length-e.categoryViewModel.length);setTimeout(function(){e.element.querySelector('[data-access-list-item="'+t+'"]'),e.element.querySelector('[data-access-list-item="'+t+'"]')&&e.element.querySelector('[data-access-list-item="'+t+'"]').focus()},150),e.categoryViewModel=e.categories,e.hideViewEvenMore=!0,e.hideLess=!1}},150)},t.prototype.viewNext=function(){var e=this;setTimeout(function(){var t=e.setCategoryCount(),o=e.categoryViewModel.length;!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access-list-item="'+o+'"]')&&e.element.querySelector('[data-access-list-item="'+o+'"]').focus()},150));var i=e.categories.length-e.categoryViewModel.length;t<i?(i=t,e.categoryViewModel=e.categories.slice(0,e.categoryViewModel.length+i)):(e.categoryViewModel=e.categories,e.hideViewNext=!0,e.hideViewEvenMore=!0,e.hideLess=!1)},150)},t.prototype.getContextData=function(){return this.categories},t.prototype.goToNextSlide=function(){this.currSlide==this.totalSlides-1&&this.modeOptions.loop&&(this.currSlide=-1),e.prototype.goToNextSlide.call(this)},t.prototype.goToPrevSlide=function(){0==this.currSlide&&this.modeOptions.loop&&(this.currSlide=this.totalSlides),e.prototype.goToPrevSlide.call(this)},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getUrl=function(t,o,i,a,r){if(this.rk&&this.rk.length&&(a="&rk="+this.rk),"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length){var s=e.prototype.getUrl.call(this,t,o,i,a,r);return s=-1!=s.indexOf("?")?s+"&qkvisibilityType="+this.jobsType+"&s=1":s+"?qkvisibilityType="+this.jobsType+"&s=1"}return e.prototype.getUrl.call(this,t,o,i,a,r)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileHoverImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideBlurb",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideJobCount",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerSlide",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerRow",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"rowCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideWhenEmpty",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"modeOptions",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"type",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"categoryClass",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"asDependent",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showEmptyCategories",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"rk",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==i.CommonService&&i.CommonService)&&h||Object,s.CategoryOverviewService,"function"==typeof(d=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&d||Object,r.EventAggregator])],t);var h,d}(i.PhenomWidget);t.CategoryOverview=h}),define("text!v3/ph-category-overview.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v3/ph-global-search","v3/ph-social-share","v1/ph-consent-popup","v2/ph-cookie-popup","v1/ph-facets","v2/ph-search-results","v1/ph-create-job-alert","v1/ph-email-job","v1/ph-social-connect","v1/ph-range-slider","v1/ph-page-state-data","v1/ph-skills","v3/ph-category-overview"]}),define("main",["require","exports","./environment","./components"],function(e,t,o,i){"use strict";function a(e){e.use.standardConfiguration().plugin("ph-common").globalResources(i.default),o.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),a=0;a<t.length;a++){var r=t[a];if(r){var s=r.getAttribute("type");if(!s||"static"!=s){var n=r.innerHTML,c=r.getAttribute("as-element"),l=r.getAttribute("view")||"default";n&&n.trim().length&&(pht[c+"-"+l]=n.trim()),r.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({longStackTraces:!1,warnings:{wForgottenReturn:!1}}),t.configure=a}),document&&document.body&&document.body.setAttribute("aurelia-app","main");