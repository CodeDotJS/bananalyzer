define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-similar-jobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"similarJobs",jobDetailDDOKey:"jobDetail"}}}),define("v2/ph-similar-jobs-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.similarJobsReqObj={refNum:"",jobSourceRefNum:[""],size:"10",requestID:"",parentRefNum:"",locale:"",jobSeqNo:""}}return e}();t.SimilarJobsModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-similar-jobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.getSimilarJobs=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SimilarJobsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-similar-jobs",["require","exports","aurelia-framework","ph-common","./ph-similar-jobs-config","./ph-similar-jobs-service","./ph-similar-jobs-model"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v2",l="ddoKey",c="jobDetailDDOKey",p="ph-similar-jobs-"+s,d="similar_job_click",h=function(e){function t(t,o,i,a,r){var h=e.call(this,t,o,p)||this;return h.commonService=o,h.similarJobsService=i,h.similarJobsModel=a,h.localStorage=r,h.fetchJobSeqNo=function(){var t=h.similarJobsModel.similarJobsReqObj;if(h.currentJobSeqNo&&null!=h.currentJobSeqNo&&h.currentJobSeqNo.length>0)t.jobSeqNo=h.currentJobSeqNo,h.getSimilarJobs(t);else{var o=h.commonService.getCachedDDO(n.WidgetConfig[s][c],p);o&&o.data&&o.data.job&&o.data.job.jobSeqNo?(h.currentJobSeqNo=o.data.job.jobSeqNo,t.jobSeqNo=h.currentJobSeqNo,h.getSimilarJobs(t)):(e.prototype.hideLoader.call(h),e.prototype.handleError.call(h,""))}},h.getSimilarJobs=function(t){e.prototype.unhideLoader.call(h),h.similarJobsService.getSimilarJobs(p,n.WidgetConfig[s][l],t).then(function(t){e.prototype.hideLoader.call(h),h.jobResults=t.similarJobs.data.similarJobs||[],h.onDataChange(d)},function(t){e.prototype.hideLoader.call(h),e.prototype.handleError.call(h,"")})},h}return __extends(t,e),t.prototype.created=function(){},t.prototype.attached=function(){e.prototype.attached.call(this),this.currentJobSeqNo=e.prototype.getQueryParam.call(this,"jobSeqNo")||this.currentJobSeqNo,this.fetchJobSeqNo()},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"currentJobSeqNo",void 0),t=__decorate([o.customElement(p),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==i.CommonService&&i.CommonService)&&h||Object,a.SimilarJobsService,r.SimilarJobsModel,"function"==typeof(f=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&f||Object])],t);var h,f}(i.PhenomJobWidget);t.SimilarJobs=h}),define("text!v2/ph-similar-jobs.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v2/views/ph-similar-jobs-v2/default/view.html",["module"],function(e){e.exports='<template>\r\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\r\n    <div class="phs-widget-block-area ph-widget-box" show.bind="!showLoader && jobResults.length">\r\n        <div class="widget-container">\r\n            <div class="phs-widget-heading">\r\n                <h2>\r\n                    <ppc-content key="widgetHeadingText" data-ph-at-id="heading-text">\r\n                        Recently viewed jobs\r\n                    </ppc-content>\r\n                </h2>\r\n            </div>\r\n            <div class="content-block">\r\n                <div as-element="ph-refer-friend-v1" data-widget="ph-refer-friend-v1" class="ph-refer-friend-v1-default-default" instance-id="6iy90l">\r\n                        \r\n                </div>\r\n                <ul data-ph-at-id="jobs-list" data-ph-at-widget-data-count="${jobResults.length}">\r\n                    <li class="jobs-list-item" repeat.for="eachJob of jobResults" show.bind="maxDisplayCount > $index" data-ph-at-id="jobs-list-item">\r\n                        <a ph-tevent="recommended_job_click" ref="linkEle" href="${getUrl(linkEle, \'job\', eachJob)}" class="job-link-linkedin">\r\n                            <div class="information">\r\n                                <h2 class="job-title" if.bind="eachJob.title">\r\n                                    Job Title : ${eachJob.title}\r\n                                </h2>\r\n                                <div repeat.for="eachAttr of jobAttrs">\r\n                                    <span class="job-location" if.bind="eachAttr.name.indexOf(\'location\') != -1">\r\n                                        <b>Job Location</b> : ${eachJob.location}\r\n                                    </span>\r\n                                    <span class="job-category" if.bind="ea">${eachJob.category}</span>\r\n                                    <span class="job-industry" if.bind="eachJob.industry && eachAttr.name.indexOf(\'industry\')!= -1">\r\n                                        <b>Industry:</b> : ${eachJob.industry}\r\n                                    </span>\r\n                                    <span class="job-id" if.bind="eachJob.jobId &&  eachAttr.name.indexOf(\'jobId\')!= -1">\r\n                                        <span>\r\n                                            <ppc-content key="jobIdText" data-ph-at-id="jobid-text">\r\n                                                <b>Job ID:</b>\r\n                                            </ppc-content>\r\n                                        </span>\r\n                                        ${eachJob.jobId}\r\n                                    </span>\r\n                                    <span class="job-type" show.bind="eachJob.name.type && eachAttr.indexOf(\'type\')!= -1">\r\n                                        <span>\r\n                                            <ppc-content key="jobtype" data-ph-at-id="jobtype-text">\r\n                                                Job Type:\r\n                                            </ppc-content>\r\n                                        </span>\r\n                                        ${eachJob.type}\r\n                                    </span>\r\n                                    <span class="job-category" show.bind="eachJob.category && eachAttr.name.indexOf(\'category\')!= -1">\r\n                                            <span>\r\n                                                <ppc-content key="jobCategory" data-ph-at-id="jobCategory-text">\r\n                                                    Job Category: \r\n                                                </ppc-content>\r\n                                            </span>\r\n                                            ${eachJob.category}\r\n                                        </span>\r\n                                    <span class="job-postdate" if.bind="eachJob.postedDate  && eachAttr.name.indexOf(\'postedDate\')!= -1">\r\n                                        <span>\r\n                                            <ppc-content key="jobPostedDate1" data-ph-at-id="jobposteddate-text">\r\n                                                <b> Posted on: </b>\r\n                                            </ppc-content>\r\n                                        </span>\r\n                                        ${eachJob.postedDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\r\n                                    </span>\r\n                                    <span class="job-expirydate" if.bind="eachAttr.name.indexOf(\'expiryDate\')!= -1 && eachJob.expiryDate">\r\n                                        <b>Job Expiry Date</b> : ${eachJob.expiryDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\r\n                                    </span>\r\n    \r\n                                    <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\')!= -1">\r\n                                        <li>\r\n                                            <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\r\n                                             data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\r\n                                             class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\r\n                                             id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\r\n                                             data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\r\n                                                <span>\r\n                                                    <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\r\n                                                </span> ${eachJob.multi_location.length}\r\n                                                <span>\r\n                                                    <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\r\n                                                </span>\r\n                                                <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\r\n                                            </button>\r\n                                            <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\r\n                                                <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\r\n                                                 data-ph-at-job-location-text="${eachLocation}">\r\n                                                    ${eachLocation}\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                                <p class="job-description" innerhtml.bind="eachJob.descriptionTeaser | sanitizeHTML" data-ph-at-id="jobdescription-text"></p>\r\n                                <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\') != -1">\r\n                                    <li>\r\n                                        <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\r\n                                         data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\r\n                                         class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\r\n                                         id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\r\n                                         data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\r\n                                            <span>\r\n                                                <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\r\n                                            </span> ${eachJob.multi_location.length}\r\n                                            <span>\r\n                                                <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\r\n                                            </span>\r\n                                            <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\r\n                                        </button>\r\n                                        \x3c!--dropView used to toggle toggleMultiLocationView based on item click: js dependent --\x3e\r\n                                        <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\r\n                                            <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\r\n                                             data-ph-at-job-location-text="${eachLocation}">\r\n                                                ${eachLocation}\r\n                                            </li>\r\n                                        </ul>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </a>\r\n                        <div repeat.for="eachAction of jobActions">\r\n                            <div if.bind="eachAction.name == \'applyNow\'">\r\n                                <a ph-tevent="from_data_attribute" data-ph-tevent-name="${eachJob.actionEventName}" href.bind="eachJob.actionUrl" target.bind="eachJob.externalApply!=\'undefind\' && eachJob.externalApply && !clickTojd ? \'_blank\' : \'_self\'"\r\n                                 class="btn plain-button apply-btn" data-ph-at-id="apply-link" data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" data-ph-tevent-attr-trait14="${eachJob.category}">\r\n                                    <ppc-content key="jobApplyActionLink" data-ph-at-id="apply-text">Apply Now</ppc-content>\r\n                                </a>\r\n                            </div>\r\n                            <div if.bind="eachAction.name == \'shareJob\'">\r\n                                <section class="ph-widget" instance-id="6ty93l">\r\n                                    <div as-element="ph-social-share-v2" class="ph-social-share-v2-default-default" data-widget="ph-social-share-v2" view="default"\r\n                                     current-job-obj.bind="eachJob" instance-id="6ty93l">\r\n                                    </div>\r\n                                </section>\r\n                                <section class="ph-widget" instance-id="1gd0h6">\r\n                                    <div as-element="ph-email-job-v1" class="ph-email-job-v1-default-default" data-widget="ph-email-job-v1" view="default" is-popup-reqd="true" \r\n                                    instance-id="1gd0h6">\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                            <div if.bind="eachAction.name == \'refer\'">\r\n                                <button class="refer-friend-button" click.delegate="handleReferJob()" data-ph-at-id="refer-friend-button" aria-label="Refer ${job.title}"\r\n                                    role="button" key-role="btnRole" aria-expanded="${showPopup ? \'true\' : \'false\'}" aria-haspopup="true">\r\n                                    <ppc-content key="referButtonText" data-ph-at-id="refer-friend-button-text">\r\n                                        REFER\r\n                                    </ppc-content>\r\n                                </button>\r\n                            </div>\r\n                            <div if.bind="eachAction.name == \'addToCart\'">\r\n                                <div class="savejob-checkbox" if.bind="bulkcart == true">\r\n                                    <label for="save-${eachJob.jobSeqNo}" class="${eachJob.inProgress ? \'disabled\' : \'\'}">\r\n                                        <input type="checkbox" id="save-${eachJob.jobSeqNo}" disabled.bind="eachJob.inProgress" ph-tevent="job_added_to_jobcart"\r\n                                            checked.bind="eachJob.isJobSaved" change.delegate="handleSaveJob(eachJob)" title="${eachJob.isJobSaved === false ? \'Save Job\': \'Saved Job\'}">\r\n                                        <span class="label-content" if.bind="eachJob.isJobSaved === false">\r\n                                            <i class="icon icon-star-empty"></i>\r\n                                            <ppc-content key="literal-1487954993542-22">Save</ppc-content>\r\n                                        </span>\r\n                                        <span class="label-content" if.bind="eachJob.isJobSaved === true">\r\n                                            <i class="icon icon-star"></i>\r\n                                            <ppc-content key="literal-1487954993542-23">Saved</ppc-content>\r\n                                        </span>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div if.bind="eachAction.name == \'removeFromCart\'">\r\n                                <a href="javascript:void(0)" click.delegate="deleteJobFromCart(eachJob)" class="favourite" data-ph-at-id="job-remove-link">\r\n                                    <i class="icon icon-delete">Delete</i>\r\n                                </a>\r\n                            </div>\r\n                    </li>\r\n                </ul>\r\n                <div class="phs-widget-footer" if.bind="seemoretext" data-ph-at-id="navigation">\r\n                    <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeMore\'"\r\n                     click.trigger="seemore()" title="See more recommended jobs" key-title="seemore-link-title" data-ph-at-id="seemore-link">\r\n                        <ppc-content key="seeMoreText" data-ph-at-id="seemore-text">See more </ppc-content>\r\n                        <i class="icon icon-down-arrow" aria-hidden="true"></i>\r\n                    </a>\r\n                    <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === false"\r\n                     click.trigger="seeLess()" title="See less recommended jobs" key-title="seeless-link-title" data-ph-at-id="seeless-link">\r\n                        <ppc-content key="seeLessText" data-ph-at-id="seeless-text">See less </ppc-content>\r\n                        <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                    </a>\r\n                    <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeNext\'"\r\n                     click.trigger="seeNext()" title="See next recommended jobs" key-title="seenext-link-title" data-ph-at-id="seenext-link">\r\n                        <ppc-content key="seeNextText" data-ph-at-id="seenext-text">See next</ppc-content>\r\n                        <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                    </a>\r\n                    <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeEvenMore\'"\r\n                     click.trigger="seeEvenMore()" title="See even more recommended jobs" key-title="seeevenmore-link-title" data-ph-at-id="seeevenmore-link">\r\n                        <ppc-content key="seeEvenMoreText" data-ph-at-id="seeevenmore-text">See even more</ppc-content>\r\n                        <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class="no-data-view" show.bind="showErrorMsg" data-ph-at-id="nodata-block">\r\n                <p>\r\n                    <ppc-content key="noRecomJobsInfoText" data-ph-at-id="nodata-text">\r\n                        No recommendations found\r\n                    </ppc-content>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-consent-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-consent-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.ConsentPopupService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-consent-popup",["require","exports","aurelia-framework","ph-common","./ph-consent-popup-service"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="ph-consent-popup-v1",r=function(e){function t(t,o,i){var n=e.call(this,t,o,a)||this;return n.element=t,n.consentPopupService=i,n.isDisabled=!1,n.showConsentPopup=!1,n.submitData=!1,n.hiddenOverflow=!1,n}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.widgetContext&&(this.widgetContext.triggerPopup=this.triggerConsentPopup.bind(this))},t.prototype.hasPopup=function(e,t){var o=t||this.element&&this.element.parentElement;return o&&e>0?o.classList&&o.classList.contains("modal-dialog")?o:this.hasPopup(e-1,o.parentElement):void 0},t.prototype.triggerConsentPopup=function(t){var o=this;this.parentPopup=this.hasPopup(20),document.body&&"hidden"==document.body.style.overflow&&(this.hiddenOverflow=!0,document.body&&(document.body.style.overflow="auto")),this.parentPopup&&(this.parentPopup.style.overflow="hidden"),this.showConsentPopup=!0,this.submitData=!!t,this.isButtonDisabled(),setTimeout(function(){var t=o.element.querySelector(".ph-a11y-popup-start-focus"),i=o.element.querySelector(".ph-a11y-popup-close-focus");o.element.addEventListener("keyup",o.handleEscape),e.prototype.openDialogPopup.call(o,"ph-a11y-modal-area",i,t,null,!0)},0)},t.prototype.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||this.closePopup()},t.prototype.closePopup=function(t){this.showConsentPopup=!1,e.prototype.closeDialogPopup.call(this),this.element.removeEventListener("keyup",this.handleEscape),t?e.prototype.trackWidgetClick.call(this,"pii-consent-submit",{}):e.prototype.trackWidgetClick.call(this,"pii-consent-done",{}),this.parentPopup&&(this.parentPopup.style.overflow="auto"),this.hiddenOverflow&&setTimeout(function(){document.body&&(document.body.style.overflow="hidden")},100)},t.prototype.triggerSubmitData=function(){this.widgetContext&&this.widgetContext.submit&&(this.widgetContext.submit(),this.closePopup(!0))},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.widgetContext.consentData&&this.widgetContext.consentData.length&&this.widgetContext.consentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)}),!this.isDisabled&&this.widgetContext.widgetRef&&(this.widgetContext.widgetRef.piiConsentError=!1)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"widgetContext",void 0),t=__decorate([o.customElement(a),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(r=void 0!==i.CommonService&&i.CommonService)&&r||Object,n.ConsentPopupService])],t);var r}(i.PhenomWidget);t.ConsentPopup=r}),define("text!v1/ph-consent-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-consent-popup-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-social-share-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobDetails",ddoKey2:"googleShortUrl",ddoKeyShareDetails:"getSocialSharingDetails",ddoShareOption:"jobsharewidgetsettings",ddoBaseUrls:"baseUrls"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share-service",["require","exports","aurelia-framework","ph-common","./ph-social-share-config"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t,o){this.commonService=e,this.WidgetConfig=t,this.serviceRequest=o,this.hashtagsText=""}return e.prototype.getShortUrl=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e.googleShortUrl&&e.googleShortUrl.status&&"failed"==e.googleShortUrl.status?"#":encodeURIComponent(e.googleShortUrl.shortUrl)})},e.prototype.getSocialUrls=function(e,t,o,i){var a=this;if(this.jobDetails=t,"internal"!=this.commonService.getSiteType()){var r=this.commonService.getUrl("job",t);return r=this.removeLastCharIfExists(r,"/"),r+="/?",this.getShareUrl(e,"googleShortUrl",r,o).then(function(e){return e})}var s={jobSeqNo:t.jobSeqNo,jobId:t.jobId,medium:"social-share",campaign:"social",source:o.name};i&&(s.siteType=i);var l=n.WidgetConfig.v3.ddoKeyShareDetails;return this.commonService.getDDO(e,l,s).then(function(t){if(t&&t[l]&&t[l].status&&"SUCCESS"==t[l].status.toUpperCase()&&t[l].data&&t[l].data.jdUrl){var i=t[l].data.jdUrl;return i=a.removeLastCharIfExists(i,"/"),i+="/?",t[l].data.referrerToken&&(i+="referrerToken="+t[l].data.referrerToken+"&"),a.getShareUrl(e,"googleShortUrl",i,o).then(function(e){return e})}return console.info("Error getting url"),"#"})},e.prototype.getShareUrl=function(e,t,o,i){var n=this;o+="utm_source="+i.name+"&utm_campaign=job-share&utm_medium=social-share";var a={url:o};return"whatsapp"!=i.name?this.getShortUrl(e,t,a).then(function(e){return n.updateReqParamsToUrl(i,e)}):new Promise(function(e,t){e(n.updateReqParamsToUrl(i,n.shareInfoText+" "+o))})},e.prototype.updateReqParamsToUrl=function(e,t){var o=""+e.baseUrl+t;if(e.settings.params){var i=e.settings.params;i.hasOwnProperty("media")&&(this.tagValue=this.getTagValue());for(var n in i)i.hasOwnProperty(n)&&this[i[n]]&&(o+="&"+n+"="+this[i[n]]);return o}return o},e.prototype.removeLastCharIfExists=function(e,t){return e.length&&e[e.length-1]==t&&(e=e.substring(0,e.length-1)),e},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e?e[t]:{}})},e.prototype.getTagValue=function(){return document.querySelector("meta[property='og:image']").content},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object,Object,"function"==typeof(a=void 0!==i.ServiceRequest&&i.ServiceRequest)&&a||Object])],e);var t,a}();t.SocialShareService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}
}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share",["require","exports","aurelia-framework","ph-common","./ph-social-share-config","./ph-social-share-service","aurelia-event-aggregator"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-social-share-v3",l=function(e){function t(t,o,i,n){var a=e.call(this,t,o,s)||this;return a.element=t,a.commonService=o,a.socialShareService=i,a.eventAggregator=n,a.currentJobObj={},a.showMailTo=!1,a.isErrorMsgReqd=!1,a.isShareIcon=!0,a.isPopup=!1,a.showTitle=!0,a.detailObj={},a.loadingText="Loading ...",a.replaceJobSeqNo=!1,a.showCopySuccessMessage=!1,a.shareObj={},a.showErrorMsg=!1,a.sociaurl=[],a.showEmailView=!1,a.shareInfoText="Interesting Job Posting at {{category}}, {{location}}, {{title}}",a.isPopupOpened=!1,a.jobLink="",a.selectedPopup="",a.showCopySuccess=!1,a.isEmailClientEnabled=!1,a}return __extends(t,e),t.prototype.attached=function(){if(e.prototype.hideLoader.call(this),e.prototype.attached.call(this),this.fetchJobObj(),"e"==e.prototype.getQueryParam.call(this,"vt")&&(this.siteType="external"),this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.configureShare(),this.showMailTo){var t=encodeURIComponent(window.location.href);this.strMailtoProto="mailto:?subject=Check out this job!&body=Hi,%0A%0AI noticed a Job Opportunity at "+t+"%0A%0A"}},t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(o){(!t.jobSeqNo||o.jobSeqNo&&t.jobSeqNo!=o.jobSeqNo)&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo&&(o.jobSeqNo=o.jobId),t.currentJobObj=o,t.jobSeqNo=t.currentJobObj.jobSeqNo,t.category=t.currentJobObj.category)})},t.prototype.fetchJobObj=function(){Object.keys(this.detailObj)&&Object.keys(this.detailObj).length?this.currentJobObj=this.detailObj:this.currentJobObj=this.commonService.getCachedDDO("jobDetail"),this.currentJobObj&&this.currentJobObj.data&&(this.currentJobObj=this.currentJobObj.data.job,this.currentJobObj&&(this.jobSeqNo=this.currentJobObj.jobSeqNo,this.category=this.currentJobObj.category))},t.prototype.configureShare=function(){var t=this;try{this.shareOption=this.shareOption?JSON.parse(this.shareOption):{};var o=!0;this.shareOption&&this.shareOption.options&&this.shareOption.options.length||(o=!1,this.socialShareService.makeDDORequest(s,n.WidgetConfig.v3.ddoShareOption,{}).then(function(o){e.prototype.hideLoader.call(t),o&&o.data?(t.shareOption=o.data||{},t.shareOption.options=t.shareOption.options||[]):t.shareOption.options=[],t.checkEmailExists()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})),o&&this.checkEmailExists()}catch(e){}},t.prototype.checkEmailExists=function(){this.isShareEmailFound=this.shareOption.options.findIndex(function(e){return"email"==e.name}),this.isShareEmailFound=-1!=this.isShareEmailFound},t.prototype.closeShareJob=function(e,t){var o=this;t||this.isPopupOpened?(this.shareTimer&&clearTimeout(this.shareTimer),this.isShareIcon=!0,this.currentJobObj&&(this.currentJobObj.toggleOpen=!0)):(this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=setTimeout(function(){o.isShareIcon=!1,o.currentJobObj&&(o.currentJobObj.toggleOpen=!1)},300))},t.prototype.handlePopup=function(t){var o=this;this.widgetBundle.shareInfoText&&(this.shareInfoText=this.widgetBundle.shareInfoText),this.shareInfoText=this.shareInfoText.replace("{{categoryName}}","{{category}}"),this.socialShareService.shareInfoText=this.commonService.getTranslation(this.shareInfoText,this.currentJobObj,!0),this.socialShareService.shareInfoText=this.socialShareService.shareInfoText.replace(/%250A/g,"%0A"),this.socialShareService.hashtagsText=this.widgetBundle.hashtagsText,e.prototype.unhideLoader.call(this);var i={},n={};if(i.trait5=this.jobSeqNo,i.trait14=this.category,t.eventName&&this.commonService.processTrackingEvent(t.eventName,void 0,i),"email"==t.name)if(this.isEmailClientEnabled)this.handleEmailClientOrJob();else{this.showEmailView=!this.showEmailView,i.params={toggle:this.showEmailView};var a=document.querySelector('[as-element^="ph-email-job"]');if(a){if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var r=window.pageYOffset,l=this.commonService.getNearestSectionElemOffsetTop(a);r<l?this.commonService.smoothScroll(r,l,!0,30):this.commonService.smoothScroll(r,l,!1,30)}else a.scrollIntoView(!1);if(a.au&&a.au.controller&&a.au.controller.viewModel&&!a.au.controller.viewModel.isPopupReqd){var c=a.au.controller.viewModel,p=c.element.querySelector(".ph-a11y-email-job-heading");p&&p.focus()}}this.showEmailView&&e.prototype.raiseEvent.call(this,"show-email-job",{})}else"copylink"==t.name?this.handelCopyJobLink():(n=window.open("","",t.settings.popUpParams),this.isPopupOpened=!0,setTimeout(function(){o.isPopupOpened=!1},100));"email"!=t.name&&"copylink"!=t.name&&(n.document.body.innerHTML=this.loadingText,this.socialShareService.getSocialUrls(s,this.currentJobObj,t,this.siteType).then(function(t){e.prototype.hideLoader.call(o),n.location.href=t},function(t){new Error(t),e.prototype.hideLoader.call(o),o.handleError("")}))},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{"google-plus":"google-plus",facebook:"facebook",linkedin:"linkedin",twitter:"twitter",email:"share via mail",xing:"xing",pinterest:"pinterest",vk:"vk",whatsapp:"whatsapp",weibo:"weibo"}},t.prototype.handleEmailClientOrJob=function(){var t=this.widgetBundle.emailClientBody||"Check out this job:";try{t=decodeURIComponent(t)}catch(e){i.logger.error(e)}var o=this.widgetBundle.emailClientSubject||"{{title}} at {{companyName}}",n=this.commonService.getTranslation(o,this.currentJobObj),a=this.commonService.getTranslation(t,this.currentJobObj),r=e.prototype.getUrl.call(this,"","job",this.currentJobObj);r&&r.length&&(r=r.replace("/i/","/")),window.location.href="mailto:?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(a)+r},t.prototype.handelCopyJobLink=function(){this.jobLink=this.commonService.getUrl("job",this.currentJobObj),this.selectedPopup="copyLinkPopup";var t=this.element.querySelector(".ph-a11y-popup-selector"),o=this.element.querySelector(".ph-a11y-popup-selector"),i=this.element.querySelector("ph-a11y-copyLinkClose-popup");e.prototype.openDialogPopup.call(this,t,i,o),this.element.querySelector(".input-copy-link").value=this.jobLink},t.prototype.copyLink=function(){var e=this;this.element.querySelector(".input-copy-link").select(),document.execCommand("copy"),this.showCopySuccessMessage&&(this.showCopySuccess=!0,setTimeout(function(){e.showCopySuccess=!1},5e3))},t.prototype.copyLinkCancelAction=function(){this.showCopySuccess=!1,e.prototype.closeDialogPopup.call(this)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObj",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showMailTo",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"shareOption",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isShareIcon",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showTitle",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"detailObj",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadingText",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showCopySuccessMessage",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,a.SocialShareService,r.EventAggregator])],t);var l}(i.PhenomWidget);t.SocialShare=l}),define("text!v3/ph-social-share.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-social-share-v3/default/view.html",["module"],function(e){e.exports='<template>\n<div class="phs-share-job-area ph-widget-box" role="region" key-role="regionRole" aria-label="Social share" key-aria-label="socialShare">\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="widget-container">\n        <div class="phs-widget-heading">\n            <h2>\n                <ppc-content key="socialShareHeading" data-ph-at-id="heading-text">Share this Opportunity</ppc-content>\n            </h2>\n        </div>\n        <div class="content-block">\n            <ul data-ph-at-id="share-options-list">\n               \n                <li repeat.for="eachIndicator of shareOption">\n                    <a class="${eachIndicator}" click.trigger="handlePopup(eachIndicator)" aria-label="Share via ${eachIndicator}" key-aria-label="share${eachIndicator}"\n                        href="javascript:void(0)" data-ph-at-id="share-${eachIndicator}-link" title="Share via ${eachIndicator}"  \n                        key-title="share${eachIndicator}Title" target="_blank" blur.trigger="closeShareJob($event, true)">\n                        <i class="icon icon-${eachIndicator}"></i> ${widgetBundle[eachIndicator] | pht}\n                        <span class="sr-only">\n                            <ppc-content key="share${eachIndicator}Text" data-ph-at-id="share-${eachIndicator}s-text">  ${widgetBundle[eachIndicator] | pht}</ppc-content>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup",storeOneTrustCookieSession:"storeOneTrustCookieSession"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,o,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-cookie-popup-v2",s=window,l="top",c='[as-element^="ph-cookie-popup"] .ph-sticky-header',p="ph:gdpr:OptanonWrapperUpdated",d='[as-element*="header"] .ph-sticky-header, .header-layout .pcs-sticky-header ,.header-layout .ph-sticky-block-fixed',h={top:"cookie-popup-top",bottom:"cookie-popup-bottom"},f={C0001:"essential",1:"essential",C0002:"performance",2:"performance",C0003:"functional",3:"functional",C0004:"analytics",4:"analytics",C0005:"social",5:"social"},u={1:"essential",2:"functional",3:"analytics",4:"social",TA001:"essential",TA002:"functional",TA003:"analytics",TA004:"social"},g=function(e){function t(t,o,i,n,a,c){var d=e.call(this,t,o,r)||this;return d.element=t,d.commonService=o,d.cookiePopupService=i,d.cookieManager=n,d.eventAggregator=a,d.localStorageContext=c,d.doNotHide=!1,d.showDeclineButton=!0,d.showCookieSettingsButton=!1,d.showCookiePopup=!0,d.cookieValue="",d.position=l,d.isAccepted=!0,d.cookieType="",d.cookieWindowType="default",d.subscriptions=[],d.cookieCategoryConfig=f,d.trustArcCookieCategoryConfig=u,d.handleExternalCookie=function(e,t){t=t||{};var o=[],i=e.availOnAllowedCookies||[],n=t.groups||s.OnetrustActiveGroups,a=!0;if(n){n=n.split(",");for(var r=0;r<i.length;r++)if(i[r]&&-1===n.indexOf(i[r])){a=!1;break}d.cookieValue="d",a&&(d.cookieValue="a"),d.setCookie();var l={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var c=d.getEnabledCookies(n);o=d.getDisabledCookies(e.trackCookieMap.cookieMap,c),l.disabledCookies=o,l.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,c),d.deleteCareerSiteCookies(e,o),d.addOneTrustSessionData(e,o)}d.raiseActionEvent(p,l)}},d.handleTrustArcCookie=function(e,t){var o=t.data;if("string"==typeof o&&(o=JSON.parse(o)),"submit_preferences"==o.message||"remove_iframe"==o.message){var i=s.phApp.baseDomain||e.currentDomain;i=i.replace(/https?:\/\//g,"");var n=s.truste.cma.callApi("getGDPRConsentDecision",i),a=d.trustArcMappedGroups(n.consentDecision);d.handlingTrustArcUserConsent(e,a)}},d.handlingTrustArcUserConsent=function(e,t){for(var o=[],i=e.availOnAllowedCookies||[],n=!0,a=0;a<i.length;a++)if(i[a]&&-1===t.indexOf(i[a])){n=!1;break}d.cookieValue="d",n&&(d.cookieValue="a"),d.setCookie();var r={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var s=d.getTrustArcEnabledCookies(t);o=d.getDisabledCookies(e.trackCookieMap.cookieMap,s),r.disabledCookies=o,r.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,s),d.deleteCareerSiteCookies(e,o),d.addOneTrustSessionData(e,o)}d.raiseActionEvent(p,r)},d.trustArcMappedGroups=function(e){var t=[];return e.forEach(function(e){e&&t.push(e.toString())}),t},d}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("externalCookieConfig"),o=this.commonService.getSiteSettings("externalCookieTrustArcConfig"),i=this.commonService.getSiteSettings("ignoreCookiePages")||[],n=this.commonService.getPageName();if(-1===i.indexOf(n))return t?void this.initiateExternalCookie(t):o?void this.initiateExternalCookieTrustArc(o):void this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;if(!this.isExternalCookieEnabled||this.doNotHide){e.prototype.attached.call(this);var o=this.commonService.getSiteSettings("gdpr")||{};this.cookieType=o&&o.hasOwnProperty("cookieTypeV1")?o.cookieTypeV1:o.cookieType,this.cookieWindowType=o&&o.cookieWindowType||"default",this.position=o&&o.position||l,this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),o&&o.hasOwnProperty("showDecline")&&(this.showDeclineButton=o.showDecline),o&&o.hasOwnProperty("showCookieSettings")&&(this.showCookieSettingsButton=o.showCookieSettings),this.showCookiePopup="s"==this.cookieValue||!1,this.piiConsentEnabled=o.piiConsent,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage()),this.handleCookieArea()),this.isAccepted="a"==this.cookieValue,this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}));var i=this.cookieManager.get("PHPPPE_PC");this.piiConsentEnabled&&!i&&this.triggerPiiConsentPopup()}},t.prototype.initiateExternalCookie=function(e){var t=this;this.isExternalCookieEnabled=!0,e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.cookieCategoryConfig=e.cookieCategoryConfig||f;var o=document.createElement("script");o.src=e.scriptUrl,o.setAttribute("data-document-language","true"),o.type="text/javascript",o.setAttribute("async",""),o.setAttribute("data-domain-script",e.domainKey),o.setAttribute("charset","UTF-8"),e.ignoreOverrideOptanon?e.ignoreOverrideOptanon&&(s.phApp.OptanonWrapper=this.handleExternalCookie.bind(this,e)):s.OptanonWrapper=this.handleExternalCookie.bind(this,e),o.onload=function(){t.loadDependentScript(e,o)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)},t.prototype.loadDependentScript=function(t,o){t.dependentScriptUrl&&(t.dependentScriptUrl=t.dependentScriptUrl.startsWith("http")?t.dependentScriptUrl:this.commonService.getCdnUrl()+"/"+t.dependentScriptUrl,e.prototype.loadScript.call(this,t.dependentScriptUrl,function(){},[],!0))},t.prototype.initiateExternalCookieTrustArc=function(e){var t=this;if(this.isExternalCookieEnabled=!0,!document.getElementById("consent_blackbar")){var o=document.createElement("div");o.setAttribute("id","consent_blackbar"),document.body.appendChild(o)}e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.trustArcCookieCategoryConfig=e.cookieCategoryConfig||u;var i=document.createElement("script");i.src=e.scriptUrl,i.setAttribute("data-document-language","true"),i.type="text/javascript",i.setAttribute("async",""),i.setAttribute("charset","UTF-8");var n=s.phApp.baseDomain||e.currentDomain;n=n.replace(/https?:\/\//g,"");var a={PrivacyManagerAPI:{action:"getConsent",timestamp:(new Date).getTime(),self:n}},r=JSON.stringify(a);window.top.postMessage(r,"*"),i.onload=function(){window.addEventListener("message",t.handleTrustArcCookie.bind(t,e)),setTimeout(function(){var o=t.cookieManager.get("notice_gdpr_prefs");if(o){o=o.slice(0,-1),o=o.split(",");for(var i=0;i<o.length;i++)o[i]=Number(o[i])+1}var n=t.trustArcMappedGroups(o||[]);t.handlingTrustArcUserConsent(e,n)},150)};var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(i,l)},t.prototype.getTrustArcEnabledCookies=function(e){for(var t=[],o=0;o<e.length;o++)""!=e[o]&&t.push(this.getTrustArcCookieName(e[o]));return t},t.prototype.addOneTrustSessionData=function(e,t){var o={},i=[];e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&(t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){i.includes(e)||i.push(e)})}),o.onetrustDisabledCookies=i,this.cookiePopupService.makeDDORequest(r,"storeOneTrustCookieSession",o))},t.prototype.deleteCareerSiteCookies=function(e,t){var o=this;e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){o.cookieManager.delete(e)})})},t.prototype.addCareerSiteCookies=function(e,t){var o=this,i=new Date;i.setTime(i.getTime()+7776e6);var n={expires:i,path:"/"};e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){var i=e.trackCookieMap.csCookies[t];i&&i.forEach(function(e){"VISITED_VARIANT"!=e&&"external"!=o.getCareerSiteCookieValue(e)&&o.cookieManager.set(e,o.getCareerSiteCookieValue(e),n)})})},t.prototype.getCareerSiteCookieValue=function(e){var t=s.phApp.locale;switch(t=t.split("_"),e){case"VISITED_COUNTRY":return t[1];case"VISITED_LANG":return t[0];case"VISITED_VARIANT":return this.getSiteVariant(window.phApp.siteType)}},t.prototype.getSiteVariant=function(e){return e&&"internal"==e?"i":e||void 0},t.prototype.getEnabledCookies=function(e){for(var t=[],o=0;o<e.length;o++)if(""!=e[o]){var i=this.getCookieName(e[o]);i&&t.push(this.getCookieName(e[o]))}return t},t.prototype.getDisabledCookies=function(e,t){var o=[];for(var i in e)t.includes(i)||o.push(i);return o},t.prototype.getCookieName=function(e){if(e)return this.cookieCategoryConfig[e]},t.prototype.getTrustArcCookieName=function(e){if(e)return this.trustArcCookieCategoryConfig[e]},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(e){var t=this;if(this.showCookiePopup){var o=document.querySelector(".ph-header"),i=document.querySelector("body"),n=document.querySelector(c),a=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),r=document.querySelector(d);for(this.element.contains(r)&&(r=void 0);o&&n;)if(o&&o.firstElementChild&&window.getComputedStyle(o).position,!(o=o.firstElementChild)){var s=a&&a.offsetHeight||0,l=n&&n.offsetHeight;"bottom"==this.position?(i.style.paddingBottom=l+"px",n&&(n.style.bottom=0),n&&(n.style.top="auto")):(i.style.paddingTop=s+l+"px",n&&(n.style.top=s+"px"),r&&(r.style.top=s+l+"px",r.style.marginTop="0px")),r&&!e&&setTimeout(function(){t.setCookieBodyHeight(!0)},5e3)}}else window.removeEventListener("resize",function(){t.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var o=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(o,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,o)},0)},t.prototype.closePopupCallback=function(t,o){var i=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(i)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(c),o=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),i=document.querySelector(d),n=document.querySelector(".header-layout .pcs-sticky-header");if(o&&t.offsetHeight)if("bottom"==this.position)e.style.paddingBottom=t.offsetHeight+"px";else{var a=e.style.paddingTop;a=parseInt(a)-t.offsetHeight+"px",e.style.paddingTop=a,o.style.top="0px",i&&(i.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),i&&(i.style.top="0px",n&&(n.style.top="0px"),i.style.marginTop=null)},t.prototype.setCookie=function(e,t){var o=new Date;o.setTime(o.getTime()+7776e6);var i={expires:o,path:"/",secure:!0},n=this.commonService.getSiteSettings("gdpr");n&&n.parentDomainCookie&&(n.parentDomain?i.domain=n.parentDomain:i.domain=this.getParentDomain(".com")),this.cookieManager.set(e||"PHPPPE_GCC",t||this.cookieValue,i)},t.prototype.getParentDomain=function(e){var t=window.location.hostname.indexOf(".");return t<window.location.hostname.indexOf(".com")?window.location.hostname.substring(-1==t?0:t+1):window.location.hostname},t.prototype.setGdprCookie=function(e){var t=this,o=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||o?this.cookieValue="a":(this.doNotHide&&(this.isAccepted=!1),this.cookieValue="s"):this.cookieValue="d",this.setCookie(),(!e||o&&"u"!=this.cookieValue)&&setTimeout(function(){t.eventAggregator.publish("close_cookie_popup",{cookieValue:t.cookieValue})},1e3),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var i={},n=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(n,void 0,i),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e,t){var o=new CustomEvent(e,{bubbles:!0,detail:t||{}});document.dispatchEvent(o)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(h[this.position])||(t.className=t.className+" "+h[this.position]):t.className=t.className.replace(h[this.position],""))},t.prototype.triggerPiiConsentPopup=function(){var t=this;this.piiCosentPopup=!0,setTimeout(function(){var o=t.element.querySelector(".ph-a11y-allow-consent");e.prototype.openDialogPopup.call(t,"ph-a11y-modal-dialog-area",document.body,o,void 0,!0)},100)},t.prototype.acceptConsent=function(){this.piiCosentPopup=!1,e.prototype.closeDialogPopup.call(this),this.setCookie("PHPPPE_PC","a")},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([o.customElement(r),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==i.CommonService&&i.CommonService)&&g||Object,a.CookiePopupService,"function"==typeof(m=void 0!==i.CookieManager&&i.CookieManager)&&m||Object,n.EventAggregator,"function"==typeof(y=void 0!==i.LocalStorageContext&&i.LocalStorageContext)&&y||Object])],t);var g,m,y}(i.PhenomWidget);t.CookiePopup=g}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-job-details-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"jobDetail",ddoKeyJobVisibility:"jobVisibility",ddoKeyRegisteredEmail:"registeredEmail",ddoKeyValidateToken:"validateToken",ddoKeyCategoryContent:"categoryContentV2",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatus:"getJobStatus",ddoKeyStatusList:"getJobStatusListV2",ddoKeyMasterDatav2:"categoryMasterDataV2",ddoKeyGetJobViewCount:"getJobViewCount",ddoKeyJobWidgets:"jobwidgetsettings",ddoKeyDynamicJDContent:"dynamicJDContent",ddoKeyATSProfileUrl:"atsProfileURL",ddoKeyIsUserApplied:"isUserApplied",ddoKeygetArchivedData:"getJobsData",imCofigurationsddokey:"getIMConfigurations",ddoKeySmartJobTags:"smartJobTags",ddoKeyFetchFitScore:"fetchFitScore",ddoKeyJobTagsSettings:"jobTagSettings",ddoKeyFitScoreSettings:"fitScoreSettings",ddoKeyJobCartCount:"jobCartCountV2",jobImageBasedOnTags:"jobImageBasedOnTags"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-job-details-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.jobDetails=function(e,t,o){var i=this.commonService.getSiteType();return this.commonService.getDDO(e,t,o).then(function(e){return"internal"==i&&e&&e.validateJwtToken&&e.validateJwtToken.data&&"ALUMNI"==e.validateJwtToken.data.userProfileType&&e.jobDetail.data&&e.jobDetail.data.job&&(e.jobDetail.data.job.userProfileType="ALUMNI"),e.jobDetail.data&&e.jobDetail.data.job})},e.prototype.jobVisibility=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return{_totalHits:e.jobVisibility.totalHits}})},e.prototype.isRegisteredEmail=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.validateToken=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getCategoryContent=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e.categoryContentV2.data})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e?e[t]:{}})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.isUserApplied=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.archivedData=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getImconfigurations=function(e,t,o){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data&&e[t].data.imTenant?e[t].data:e[t]})},e.prototype.jobCartCount=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.JobDetailsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}
}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-job-details",["require","exports","aurelia-framework","ph-common","./ph-job-details-config","./ph-job-details-service","aurelia-event-aggregator"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-job-details-v1",l="none",c=function(e){function t(t,o,i,n,a,r,c){var p=e.call(this,t,o,s)||this;return p.element=t,p.commonService=o,p.jobDetailsService=i,p.eventAggregator=n,p.localStorage=a,p.cookieManager=r,p.geoLocationService=c,p.bulkcart=!1,p.isPopupRequired=!1,p.isRecommendHeroImg=!1,p.videoKey="youtube_url",p.showTitle=!1,p.jobDetail={jobSeqNo:""},p.jobNotFound=!1,p.isNewJob=!0,p.isMultiLocation=!1,p.showBackToSearchResults=!1,p.showAlertPopup=!1,p.isUndoDone=!1,p.mapUtilityObject={},p.showReferrals=!1,p.isAtsProfileClient=!1,p.showEmailPopup=!1,p.errors={},p.applyJobModel={},p.btsUrl="",p.showCategoryImg=!1,p.subscribers=[],p.eventTag="",p.enableTeamDetails=!1,p.isMasterData=!1,p.showMultiLocation=!1,p.showMultiCategory=!1,p.questionnaireMode=l,p.referralId="",p.showReferView=!1,p.showQuestionnaireView=!1,p.jobSeqNo="",p.videoData={},p.addSummaryBorderClass=!1,p.jobFields=[],p.jobActions=[],p.jobTags=[],p.deviceType=p.commonService.getDeviceType(),p.jobFitsSettConfig={},p.jobTagsConfig={},p.jobFits={},p.enabledFields={},p.enabledActions={},p.enabledTags={},p.enabledFits={},p.jobTagsData={},p.jobViewCount=0,p.siteViewType="",p.recommendDynamicImage=!1,p.wait="visible-hidden",p.subscriptions=[],p.jobAdded=!1,p.jobRemoved=!1,p.userAppliedState=null,p.mode="",p.imagePopUp=!1,p.isPopUpUrlAvailable=!1,p.displayVideo=!0,p.jobFitPromise=!1,p.applyParams=[],p.linkCopied=!1,p.jobCartCount=0,p.disableFilters=!1,p.isServicesDown=!1,p.recomImageConfig={},p.contentRecomImgUrls=[],p.isRefferEnable=!1,p.isAlumniUser=!1,p.isImFitScore=!1,p.getNextAndPrevJobDetails=function(){p.nextAndPrevJobDetails=p.commonService.getNextAndPrevJobData(p.jobDetail.jobSeqNo)||{}},p.setReferralId=function(e){p.referralId=e},p}return __extends(t,e),t.prototype.getModulerConfig=function(){var t=this;this.stickHeaderFunForIM();try{var o=this.commonService.getSiteSettings("imApplyParams");o&&o.length&&(this.applyParams=o),this.applyParams=JSON.parse(this.element.getAttribute("apply-params"))||this.applyParams}catch(e){i.logger.error(e)}this.jobDetailsService.getImconfigurations(s,n.WidgetConfig.v1.imCofigurationsddokey,"moduleConfig").then(function(o){var i=o.moduleConfig,n=o.moduleSpecificSettings,a=[];i&&i.modules&&(a=i.modules.filter(function(e){return e.value}));var r=a.findIndex(function(e){return"referrals"==e.key});t.isRefferEnable=-1!=r,n&&n.referrals&&("boolean"!=typeof n.referrals.allowCreateReferral||n.referrals.allowCreateReferral||(t.isRefferEnable=!1)),n&&n.jobs&&n.jobs.hidePostingDate?t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"hide"):t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"show"),e.prototype.hideLoader.call(t)},function(e){console.info(e),new Error(e)})},t.prototype.toggleJobPostingDate=function(e,t){var o=this;e.forEach(function(e){var i=o.element.querySelector(e);i&&("hide"===t?i.classList.add("hide"):i.classList.contains("hide")&&i.classList.remove("hide"))})},t.prototype.stickHeaderFunForIM=function(){window.onscroll=function(){var e=document.querySelector(".sticky-block"),t=document.getElementById("jobHeaderActionsDesktop");if(document.querySelectorAll(".ph-sticky-header"),t&&e){var o=t.getBoundingClientRect().bottom-60,i=document.querySelector(".showing-following-widget");if(o<=0&&i){e.classList.add("sticky-block-fixed");var n=document.querySelectorAll(".ph-sticky-header"),a=0;n&&n.length&&(n&&n.forEach(function(e){a+=e&&e.offsetHeight}),e.style.top=a+"px");var r=document.querySelector(".sticky-block").offsetHeight;i.style.paddingTop=r+"px"}else if(i){e.classList.remove("sticky-block-fixed");var s=window.getComputedStyle(document.querySelector(".showing-following-widget")).getPropertyValue("padding-bottom");i.style.paddingTop=s}}var l=document.getElementById("mobileFixedBottomHeader"),c=document.getElementById("stickyHeaderBlock");return c&&l&&(c.getBoundingClientRect().bottom<=0?l.classList.add("mobile-fixed-bottom-header"):l.classList.remove("mobile-fixed-bottom-header")),!0}},t.prototype.checkAlumniUser=function(){var e=this;this.jobDetailsService.validateToken(s,n.WidgetConfig.v1.ddoKeyValidateToken).then(function(t){t&&"ALUMNI"==t.userProfileType&&(e.isAlumniUser=!0)})},t.prototype.isVisibleAction=function(e,t){return this.jobDetail&&"ALUMNI"==this.jobDetail.userProfileType?(["External","Internal/External"].findIndex(function(e){return e===t}),!0):-1!==e.findIndex(function(e){return e===t})},t.prototype.checkSbts=function(){var e=(this.commonService.getSessionParam("selected_fields"),this.commonService.getSessionParam("pageName")),t=this.commonService.getSessionParam("pageType"),o=this.commonService.getSessionParam("referer"),i=this.commonService.getSessionParam("keywords"),n=this.commonService.getSessionParam("from"),a="",r=["/search-results","/c/"],s=!1,l=this.commonService.getSiteSettings("eagerLoadSearch"),c=this.commonService.getSessionParam("jdsource"),p=this.commonService.getSessionParam("triggerSpellCheck");if(l){o&&-1!=o.indexOf("?")&&(o=o.substring(0,o.indexOf("?")));for(var d=0;d<r.length;d++)if(o&&-1!=o.indexOf(r[d])){s=!0;break}o&&o.length>0&&s&&(void 0!=i&&(a+="keywords="+i+"&",void 0!=p&&(a+="triggerSpellCheck="+p+"&")),n&&n.length?(n=parseInt(n),a+=n<=0?"s=1":"from="+n+"&s=1"):a="s=1",a.length&&(this.btsUrl=o+"?"+a),this.showBackToSearchResults=!0)}else"search-results"!=e&&"category"!=t&&"featuredOpportunities"!=t&&"businessUnit"!=t&&"landingPage"!=t||(this.showBackToSearchResults=!0,this.btsUrl=o,void 0!=o&&o.length>0&&-1==o.indexOf("?s=")&&-1==o.indexOf("&s=")&&(this.btsUrl+=-1!=o.indexOf("?")?"&s=1":"?s=1"));if(void 0!=c&&"facets"==c){if(this.showBackToSearchResults=!0,this.btsUrl=o,o&&o.length>0){var h="";void 0!=i&&(h+="keywords="+i,void 0!=p&&(h+="&triggerSpellCheck="+p)),a.length&&(this.btsUrl=o+"?"+h)}void 0!=o&&o.length>0&&-1==o.indexOf("?s=")&&-1==o.indexOf("&s=")&&(this.btsUrl+=-1!=this.btsUrl.indexOf("?")?"&s=1":"?s=1")}else this.showBackToSearchResults=!1;if(n&&(n.length||n>0)&&this.btsUrl&&(n=parseInt(n))>0)try{var f=new URL(this.btsUrl),u=f.searchParams;u.get("from")?(u.set("from",n),this.btsUrl=f.href):this.btsUrl+=-1!=this.btsUrl.indexOf("?")?"&from="+n:"?from="+n}catch(e){}},t.prototype.created=function(){var t=this;e.prototype.unhideLoader.call(this),this.checkSbts(),this.getGeoLocationData(),this.siteViewType=this.commonService.getSiteType(),"internal"==this.siteViewType&&this.checkAlumniUser();var o={},i=this.getJobSeqNo();if(o.pageName="job",o.jobSeqNo=i,this.jobSeqNo=i,"e"==e.prototype.getQueryParam.call(this,"vt")&&(o.siteType="external"),o.siteType=this.siteViewType,this.commonService.getSiteSettings("disableJobFilters")){o.disableFilters=!0;var a;this.jobDetailsService.jobVisibility(s,n.WidgetConfig.v1.ddoKeyJobVisibility,o).then(function(e){a=e._totalHits||0,o.disableFilters=!1,t.getJobDetails(o,a)})}else this.getJobDetails(o);document.addEventListener("ph:ex:recruiterApplyBotLoaded",function(e){t.isRecruiterApplyBotLoaded=!0,t.jobDetail.isRecruiterApplyBotLoaded=!0})},t.prototype.fetchSmartHighlights=function(){if(this.enabledFields.hasOwnProperty("pjfSmartHighlights")&&this.jobDetail&&null!=this.jobDetail.ml_job_parser&&null!=this.jobDetail.ml_job_parser.ml_job_cards){var e=this.jobDetail.ml_job_parser.ml_job_cards,t=[];for(var o in e)t.push(o);this.jobDetail.smartHighlightsKeys=t,this.jobDetail.smartHighlights=e}},t.prototype.fetchJobImages=function(){var e=this;if(this.enabledFields.hasOwnProperty("pjfJobImages")){var t,o=this.enabledFields.pjfJobImages,i=o.settings&&o.settings.jobTagValue||"category",n={jobField:i,tags:[],jobWidget:s,imageType:"jobImage"};return this.jobDetail.hasOwnProperty(i)&&!n.tags.includes("jobImage#"+this.jobDetail[i])&&n.tags.push("jobImage#"+this.jobDetail[i]),this.commonService.getDDO(s,"jobImageBasedOnTags",n).then(function(o){if(t=o&&o.jobImageBasedOnTags&&o.jobImageBasedOnTags.data||{},t.hasOwnProperty("jobImage#"+e.jobDetail[i])){var n=t["jobImage#"+e.jobDetail[i]];e.jobDetail.image=n&&n.length>0&&n[0]&&n[0]}})}},t.prototype.fetchJobBadges=function(){var e=this;if(this.enabledFields.hasOwnProperty("pjfJobBadges")){var t,o=this.enabledFields.pjfJobBadges,i=o.settings&&o.settings.jobTagValue||"company",n=this.getJobFieldMapper(i)||i,a={jobField:n,tags:[],jobWidget:s,imageType:"jobBadge"};return this.jobDetail.hasOwnProperty(n)&&!a.tags.includes("jobBadge#"+this.jobDetail[n])&&a.tags.push("jobBadge#"+this.jobDetail[n]),this.commonService.getDDO(s,"jobImageBasedOnTags",a).then(function(o){if(t=o&&o.jobImageBasedOnTags&&o.jobImageBasedOnTags.data||{},t.hasOwnProperty("jobBadge#"+e.jobDetail[n])){var i=t["jobBadge#"+e.jobDetail[n]];e.jobDetail.badgeImage=i&&i.length>0&&i[0]&&i[0]}})}},t.prototype.getJobFieldMapper=function(e){switch(e){case"companyLogo":return"companyName";case"countryFlag":return"country";case"categoryIcon":return"category";case"default":return e}},t.prototype.getGeoLocationData=function(){var e=this,t=this.commonService.getLocalStorageContext("userLocation")||"";t?(t=JSON.parse(t),this.geoLongitude=t.longitude,this.geoLatitude=t.latitude):this.subscriptions.push(this.eventAggregator.subscribe("GeoLocationDetails",function(t){i.logger.debug("payload location ::"+t),e.geoLongitude=t.coords.longitude,e.geoLatitude=t.coords.latitude}))},t.prototype.constructMapUtilityData=function(){this.mapUtilityObject.multi_location=this.jobDetail.multi_location||[],!this.jobDetail||this.jobDetail.multi_location&&this.jobDetail.multi_location.length||(this.mapUtilityObject.multi_location=[this.jobDetail])},t.prototype.getArchivedData=function(t,o){var i=this;t.jobId=t.jobSeqNo,t.siteType=window.phApp.siteType,e.prototype.unhideLoader.call(this),this.jobDetailsService.archivedData(s,n.WidgetConfig.v1.ddoKeygetArchivedData,t).then(function(t){if(200==t.status){var o=t.data;if("none"===o.siteType){var n=i.commonService.getBaseUrl();o.jobStatus,o.reqType,o.jobId,window.location.assign(n)}else e.prototype.hideLoader.call(i),i.jobDetail=o}else{var n=i.commonService.getBaseUrl();"internal"!==i.commonService.getSiteType()&&(n+="404"),window.location.assign(n)}})},t.prototype.getJobDetails=function(t,o){var i=this;this.jobDetailsService.jobDetails(s,n.WidgetConfig.v1.ddoKey,t).then(function(a){if(e.prototype.hideLoader.call(i),a&&a.jobSeqNo){var r=i.commonService.getCachedDDO(n.WidgetConfig.v1.ddoKey),l=i.commonService.getParam("isJobPageViewRaised");if(i.commonService.setPageState("exists"),i.eventAggregator.publish("updateJob",JSON.parse(JSON.stringify(a))),!l&&!r)try{var c=i.commonService.getQueryParam("referrerToken"),p={trait5:a.jobSeqNo,trait14:a.category,trait282:a.jobId};c&&(p.trait281=c),i.commonService.processTrackingEvent("job_details_view",void 0,p),i.commonService.setParam("isJobPageViewRaised",!0)}catch(e){console.log(e.message)}if(i.bulkcart&&!i.commonService.isCrawlerUserAgent()){var d=[];a.isJobSaved=null,a.saveJobInterState=null,a.inProgress=!1,d.push(a.jobSeqNo);var h={jobSeqNos:d};i.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyStatusList,h).then(function(t){if(e.prototype.hideLoader.call(i),t&&t.data){var o=t.data;a.isJobSaved=o[a.jobSeqNo]||!1,a.saveJobInterState=o[a.jobSeqNo]||!1}})}a.teamName=i.jobDetail.teamName;var f=new Date(a.postedDate),u=new Date,g=u-f;g=Math.round(g/864e5),a.durationDays=g,i.jobDetail=a,i.fetchVideoId(),i.constructMapUtilityData(),o&&(i.jobDetail._totalHits=o),e.prototype.raiseEvent.call(i,"JOB_DETAIL_OBJECT",i.jobDetail),i.getNextAndPrevJobDetails();var m=i.commonService.getSiteSettings("referer");m&&(i.jobDetail.referer=m),"true"==i.addSummaryBorderClass&&i.addSummaryBorderClassAction(),i.fetchJobBannerUrl(),i.fetchRecommendedImageUrl(a),i.enableJobViewCount&&i.fetchJobViewCount(),i.fetchRecommendedImages(),i.jobDetail.isRecruiterApplyBotLoaded&&(i.isRecruiterApplyBotLoaded=!0)}else"archive"===i.mode?i.getArchivedData(t,o):(i.jobNotFound=!0,i.commonService.setPageState("expired"));i.commonService.isCrawlerUserAgent()||(i.fetchJobWidgetSettings(),i.jobFitSettingsPromise=i.fetchFitScoreConfig(),i.jobTagSettingsPromise=i.fetchJobTagsConfig(),i.fetchJobFitWeightage())})},t.prototype.fetchVideoId=function(){var e=this.jobDetail[this.videoKey];if(e){var t="";e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/watch\/)/)||e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,this.jobDetail.youtubeVideoId=t,this.jobDetail.videoId=t}},t.prototype.fetchJobBannerUrl=function(){var t=this;this.showCategoryImg&&!this.isMasterData?(e.prototype.unhideLoader.call(this),this.jobDetailsService.getCategoryContent(s,n.WidgetConfig.v1.ddoKeyCategoryContent).then(function(o){var i=t.jobDetail.internalCategoryId;i&&o&&o[i]&&o[i].images&&o[i].images.bannerImage&&(t.bannerImageUrl=o[i].images.bannerImage||""),e.prototype.hideLoader.call(t)})):this.isMasterData&&(e.prototype.unhideLoader.call(this),this.jobDetailsService.getCategoryMasterData(s,n.WidgetConfig.v1.ddoKeyMasterDatav2).then(function(o){var i=t.jobDetail.internalCategoryId;if(i&&o&&o.categories&&o.categories.length){var n=o.categories,a=n.find(function(e){return e.categoryInternalId==i});a&&(t.bannerImageUrl=a.banner_image,t.videoData=a.video||{},t.videoData.coverImage?t.videoCoverImage=t.videoData.coverImage:t.videoCoverImage=t.bannerImageUrl)}e.prototype.hideLoader.call(t)}))},t.prototype.fetchRecommendedImageUrl=function(e){var t=this;this.commonService.isCrawlerUserAgent()||!this.isRecommendation()?(this.recommendDynamicImage=!1,this.removeVisibleHidden()):this.isRecommendHeroImg&&setTimeout(function(){var o=t.element.querySelector("#defaultHeroImage");o?o.complete?t.getRecommendedBannerImage(o,e):o.addEventListener("load",function(i){t.getRecommendedBannerImage(o,e)}):t.removeVisibleHidden()},100)},t.prototype.getRecommendedBannerImage=function(e,t){var o=this,i=e.width,a=e.height,r=i/a,l=this.getBannerFontColor(),c={jobSeqNo:t.jobSeqNo,minWidth:i,aspectRatio:r,count:1,fontColor:l,type:"banner_img"};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDynamicJDContent,c).then(function(e){if(o.removeVisibleHidden(),"object"==typeof e&&e.status&&"success"==e.status&&e.data){var t=e.data[0];t&&t.url&&t.url.length&&o.checkAspectRatio(t,r)}})},t.prototype.checkAspectRatio=function(e,t){var o=e.url;if(e.width&&e.height){var i=e.width/e.height;Math.abs(t-i)<2&&(this.dynamicHeroImageUrl=o,this.recommendDynamicImage=!0)}else this.dynamicHeroImageUrl=o,this.recommendDynamicImage=!0},t.prototype.removeVisibleHidden=function(){var e=this;setTimeout(function(){var t=e.element.querySelector("#defaultHeroImage");t&&t.classList.remove("visible-hidden")},100)},t.prototype.getBannerFontColor=function(){var e="",t=document.querySelector(".job-title");return t&&(e=window.getComputedStyle(t).color),e},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this);var o=this.element.getAttribute("show-title");if(this.showTitle="true"==o,"internal"==this.commonService.getSiteType()){setTimeout(function(){t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"hide")},100),this.isImFitScore=this.commonService.getSiteSettings("isImFitScore");try{this.getModulerConfig()}catch(e){console.log(e.message)}}this.enableTeamDetails&&this.subscribers.push(this.eventAggregator.subscribe("teamName",function(e){t.jobDetail.teamName=e})),"archive"===this.mode&&this.isJobApplied(),document.addEventListener("keyup",function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||t.imagePopUp&&t.closePopUp()}),this.isAtsProfileClient?this.getATSProfile():this.showReferrals=!0},t.prototype.detached=function(){this.subscribers.forEach(function(e){e.dispose()})},t.prototype.fetchJobWidgetSettings=function(){var e=this,t={},o=void 0,i=void 0;this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyJobWidgets,{}).then(function(n){n=n||{},n&&n.data&&(n=n.data,n.widgets&&n.widgets[s]&&(t=n.widgets[s],o=t.fields,i=t.actions),e.jobFields=o||n.fields||[],e.jobActions=i||n.actions||[]),e.getJobFields(),e.getJobActions()})},t.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.fitScore){var o={},i={},a=void 0,r={feature:"fitScore",fieldMap:{fieldName:"jobFits",finalFieldName:"jobWidgetFits"},avoidWidgetHideOnFail:!0};return this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyFitScoreSettings,r).then(function(t){o=t&&t.data&&t.data.jobWidgetFits,o&&(e.jobFitsSettConfig=o.settings||{},o.widgets&&o.widgets[s]&&(i=o.widgets[s],a=i.jobFits),e.jobFits=a||o.jobFits||{}),e.getJobFits()})}return new Promise(function(e,t){e({enabled:!1})})},t.prototype.fetchJobTagsConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.jobTags){var o={},i={},a=void 0,r={feature:"jobTags",fieldMap:{fieldName:"jobTags",finalFieldName:"jobWidgetTags"},avoidWidgetHideOnFail:!0};return this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyJobTagsSettings,r).then(function(t){o=t&&t.data&&t.data.jobWidgetTags,o&&(o.widgets&&o.widgets[s]&&(i=o.widgets[s],a=i.jobTags),e.jobTagsConfig=a||o.jobTags||{}),e.getJobTags()})}return new Promise(function(e,t){e({enabled:!1})})},t.prototype.getJobFields=function(){var e=this;try{this.jobFields=JSON.parse(this.element.getAttribute("job-fields"))||this.jobFields}catch(e){i.logger.error(e)}if(this.jobFields.forEach(function(t){e.enabledFields[t.name]=t}),this.jobFields.length&&this.enabledFields.hasOwnProperty("drivingTime"))if(this.geoLongitude&&this.geoLatitude)this.getJobFieldDrivingTime(this.geoLongitude,this.geoLatitude);else{var t=function(t){e.geoLongitude=t&&t.coords&&t.coords.longitude,e.geoLatitude=t&&t.coords&&t.coords.latitude,e.geoLongitude&&e.geoLatitude&&e.getJobFieldDrivingTime(e.geoLongitude,e.geoLatitude)},o=this.geoLocationService.askForLocation();o?t(o):this.geoLocationService.getGeoLocation().then(function(e){t(e)})}this.fetchSmartHighlights(),this.fetchJobBadges(),this.fetchJobImages()},t.prototype.getJobFieldDrivingTime=function(t,o){var i=this,n=this.commonService.getSiteSettings("maps"),a=n?n.mapbox||{}:{},r=a&&a.apiKey;if(r&&!window.mapboxSdk){var s=this.commonService.getPlatformAssetsBaseUrl(),l=s+"mapbox-sdk.js";e.prototype.loadScript.call(this,l,function(){i.mapboxClient=window.mapboxSdk({accessToken:r}),i.mapboxClient&&i.checkForDuplicateCoordinates(t,o)},["mapboxSdk"])}else r&&(this.mapboxClient=window.mapboxSdk({accessToken:r}),this.mapboxClient&&this.checkForDuplicateCoordinates(t,o))},t.prototype.checkForDuplicateCoordinates=function(e,t){if(this.jobDetail.multi_location_array&&this.jobDetail.multi_location_array.length>1)for(var o=this.jobDetail.multi_location_array,i=0;i<o.length;i++){var n=o[i].latlong;n&&n.lat&&n.lon&&this.makeReqForDrivingTimeToMapBox(e,t,n.lon,n.lat,i)}else{var n=this.jobDetail.latlong||this.jobDetail.multi_location_array&&this.jobDetail.multi_location_array[0]&&this.jobDetail.multi_location_array[0].latlong;this.makeReqForDrivingTimeToMapBox(e,t,n.lon,n.lat)}},t.prototype.makeReqForDrivingTimeToMapBox=function(e,t,o,n,a){var r=this;return new Promise(function(s,l){r.mapboxClient.directions.getDirections({profile:"driving-traffic",waypoints:[{coordinates:[e,t],approach:"unrestricted"},{coordinates:[o,n]}]}).send().then(function(e){s(e);var t=e.body&&e.body.routes&&e.body.routes[0]&&e.body.routes[0].duration;if(t){t=Number(t);var o={};o.inHours=Math.floor(t/3600),o.inMinutes=Math.floor(t%3600/60),o.inHours||o.inMinutes||(o.inMinutes=5),a||0==a?r.jobDetail.multi_location_array[a].drivingTime=o||{}:r.jobDetail.drivingTime=o||{}}else if(0==t){var o={};o.inMinutes=5,a||0==a?r.jobDetail.multi_location_array[a].drivingTime=o:r.jobDetail.drivingTime=o}else a||0==a?r.jobDetail.multi_location_array[a].drivingTime={}:r.jobDetail.drivingTime={}},function(e){a||0==a?r.jobDetail.multi_location_array[a].drivingTime={}:r.jobDetail.drivingTime={},i.logger.debug(e),l()})})},t.prototype.getJobActions=function(){var e=this;try{this.jobActions=JSON.parse(this.element.getAttribute("job-actions"))||this.jobActions}catch(e){i.logger.error(e)}this.jobActions.forEach(function(t){e.enabledActions[t.name]=t})},t.prototype.getJobTags=function(){var e=this;try{this.jobTagsConfig=JSON.parse(this.element.getAttribute("job-tags"))||this.jobTagsConfig||{}}catch(e){i.logger.error(e)}this.jobTagsConfig.tags=this.jobTagsConfig.tags||[],this.jobTags=this.jobTagsConfig.tags,this.jobTags.forEach(function(t){e.enabledTags[t.name]=t})},t.prototype.getJobFits=function(){var e=this;try{this.jobFits=JSON.parse(this.element.getAttribute("job-fits"))||this.jobFits||{}}catch(e){i.logger.error(e)}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.name]=t})},t.prototype.fetchJobFitWeightage=function(){var e=this,t=this.jobDetail.jobSeqNo,o={jobSeqNo:[t],requiredTags:[],size:1,avoidWidgetHideOnFail:!0,isEagerLoad:!0},i={jobIdentifierList:[t],outputFields:[],size:1,avoidWidgetHideOnFail:!0,isEagerLoad:!0};this.jobTagSettingsPromise.then(function(t){t&&!t.enabled||(o.tagLimit=e.jobTagsConfig.layout&&e.jobTagsConfig.layout.maxDisplayCount||1,e.fetchJobTags(o))}),this.jobFitSettingsPromise.then(function(t){t&&!t.enabled||e.fetchFitScore(i)})},t.prototype.fetchJobTags=function(e){var t=this;this.jobTags&&this.jobTags.length&&(this.jobTags.forEach(function(t){e.requiredTags.push(t.name)}),this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeySmartJobTags,e).then(function(e){if(e&&e.data&&e.data.jobTags){var o=e.data.jobTags;for(var i in o)!function(e){o[e].length&&o[e].forEach(function(o){t.jobTagsData[e]=t.jobTagsData[e]||{},t.jobTagsData[e][o.tag]=o})}(i)}}))},t.prototype.fetchFitScore=function(e){var t=this,o=this.jobDetail.jobSeqNo;this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length&&this.jobFitsSettConfig.allowedWidgets&&-1!=this.jobFitsSettConfig.allowedWidgets.indexOf(s)?(this.jobFits&&this.jobFits.requiredFields&&this.jobFits.requiredFields.length&&this.jobFits.requiredFields.forEach(function(t){e.outputFields.push(t)}),this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyFetchFitScore,e).then(function(e){e&&e.data&&e.data.jobFitScores&&(e=e.data.jobFitScores,t.jobDetail.fitLevel=e[o].data.fitLevel,e[o].data.skillGap&&(t.jobDetail.matchingSkills=e[o].data.skillGap),t.jobFitPromise=!0)})):this.jobFitPromise=!0},t.prototype.handleSaveJob=function(e){var t=document.querySelector('[id="jobCountSrOnly"]');if(t&&t.removeAttribute("aria-hidden"),this.bulkcart)if(e.inProgress=!0,e.saveJobInterState){if(this.deleteJobFromCart(e),this.isPopupRequired){this.showAlertPopup=!0,this.isUndoDone=!0;var o=this;setTimeout(function(){o.showAlertPopup=!1},3e3)}}else{if(this.isPopupRequired){this.showAlertPopup=!0,this.isUndoDone=!1;var o=this;setTimeout(function(){o.showAlertPopup=!1},4e3)}this.addToJobCart(e)}},t.prototype.addToJobCart=function(t){var o=this,i={jobSeqNo:t.jobSeqNo};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyAdd,i).then(function(i){if(t.inProgress=!1,"602"==i.status){var a={jobSeqNo:t.jobSeqNo,category:t.category};t.saveJobInterState=!0,o.eventAggregator.publish("jobCartCount","+1"),o.eventAggregator.publish("jobCartUpdatedCount",""),o.commonService.raiseCustomEvent&&o.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),e.prototype.trackWidgetClick.call(o,"job_added_to_jobcart",a),o.jobDetailsService.jobCartCount(s,n.WidgetConfig.v1.ddoKeyJobCartCount,{}).then(function(e){o.jobCartCount=e.result,o.jobAdded=!0,o.jobRemoved=!1}),setTimeout(function(){o.jobAdded=!1,o.jobRemoved=!1},0),setTimeout(function(){document.querySelector('[id="jobCountSrOnly"]').setAttribute("aria-hidden","true")},1e3)}else t.isJobSaved=!1,t.saveJobInterState=!1})},t.prototype.deleteJobFromCart=function(t){var o=this,i={jobSeqNo:t.jobSeqNo};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDelete,i).then(function(i){if(t.inProgress=!1,"605"==i.status){t.saveJobInterState=!1,o.eventAggregator.publish("jobCartCount","-1"),o.eventAggregator.publish("jobCartUpdatedCount",""),o.commonService.raiseCustomEvent&&o.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount","");var a={jobSeqNo:t.jobSeqNo,category:t.category};e.prototype.trackWidgetClick.call(o,"job_unfavorited",a),document.querySelector('[id="jobCountSrOnly"]').removeAttribute("aria-hidden"),o.jobDetailsService.jobCartCount(s,n.WidgetConfig.v1.ddoKeyJobCartCount,{}).then(function(e){o.jobCartCount=e.result,o.jobRemoved=!0,o.jobAdded=!1}),setTimeout(function(){o.jobRemoved=!1,o.jobAdded=!1},0),setTimeout(function(){document.querySelector('[id="jobCountSrOnly"]').setAttribute("aria-hidden","true")},1e3)}else t.isJobSaved=!0,t.saveJobInterState=!0})},t.prototype.openEmailPopup=function(){var t=this;if("internal"==this.siteViewType){var o={};o.trait5=this.jobDetail.jobSeqNo,o.trait14=this.jobDetail.category,this.commonService.processTrackingEvent("apply_click",void 0,o),window.location=this.commonService.getBaseUrl()+"apply?jobSeqNo="+this.jobDetail.jobSeqNo+"&applyType=internalApply"}else this.jobDetailsService.validateToken(s,n.WidgetConfig.v1.ddoKeyValidateToken).then(function(o){o&&o.access_token&&(t.isUserLoggedIn=!0,t.email=o.user_name||"");var i={};if(i.trait5=t.jobDetail.jobSeqNo,i.trait14=t.jobDetail.category,t.commonService.processTrackingEvent("apply_click",void 0,i),t.isUserLoggedIn){var n=e.prototype.getQueryParam.call(t,"referrerToken");window.location=t.commonService.getBaseUrl()+"apply?jobSeqNo="+t.jobDetail.jobSeqNo+"&loginType=apply"+(n?"&referrerToken="+n:"")}else{t.showEmailPopup=!t.showEmailPopup,""!=t.applyJobModel.email||t.showEmailPopup||(t.errors.email.error=!1);var a=t.element.querySelector("#applyalertcontent"),r=t.element.querySelector("#apply-email1"),s=t.element.querySelector(".quick-apply-btn");a&&e.prototype.openDialogPopup.call(t,a,s,r)}})},t.prototype.closePopup=function(){e.prototype.closeDialogPopup.call(this)},t.prototype.redirectToApplyPage=function(e,t){var o=window.phApp.recommendedTrackingConfig.job;if(o)try{var i=o.ddoKeysToStore[0]||"jobSeqNo",n=o.maxKeysToStore||4,a=this.commonService.getLocale(),r=a.split("_"),s=r[1],l=s+"_"+a+"_"+o.storageKey,c=this.localStorage.getItem(l);c&&(c=c.filter(function(e){if(e)return e[i]!=t})),c||(this.localStorage.setItem(l,[]),c=this.localStorage.getItem(l));var p={};o.ddoKeysToStore.forEach(function(e){p[e]=t,p.timeStamp=(new Date).toUTCString()}),c.unshift(p),c.length>n&&(c.length=n),this.localStorage.setItem(l,c)}catch(e){console.log(e.message)}var d=this.commonService.getBaseUrl()+e+"?jobSeqNo="+t;window.location.assign(d)},t.prototype.isRegisteredEmail=function(){var t=this,o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.errors.email={},this.applyJobModel.email?o.test(this.applyJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101"),!this.hasErrors||this.isUserLoggedIn){this.applyJobModel.jobSeqNo=this.jobDetail.jobSeqNo,this.applyJobModel.userName=this.applyJobModel.email;var i=e.prototype.getQueryParams.call(this),a=[];a=i.split("&");for(var r in a)if(a.hasOwnProperty(r)){var l=r.split("=")[0],c=r.split("=")[1];this.applyJobModel[l]=c}this.jobDetailsService.isRegisteredEmail(s,n.WidgetConfig.v1.ddoKeyRegisteredEmail,this.applyJobModel).then(function(o){var i={};i.trait27=t.applyJobModel.userName,i.trait5=t.jobDetail.jobSeqNo,i.trait14=t.jobDetail.category,t.commonService.processTrackingEvent("apply_email_submit_click",void 0,i);var n=o.redirectURL;"/"==n.charAt(0)&&(n=n.substring(1));var a=e.prototype.getQueryParam.call(t,"referrerToken");a&&(n=-1==n.indexOf("?")?n+"?referrerToken="+a:n+="&referrerToken="+a),window.location=t.commonService.getBaseUrl()+n})}else{var p=this.element.querySelector("#apply-email1");p&&this.errors.email.error&&p.focus()}},t.prototype.btsClick=function(){return this.localStorage.setItem("btsClick","true"),!0},t.prototype.applyUrl=function(t){if(this.jobDetail.isChatBotApply)return this.commonService.raiseCustomEvent("ph:ex:recruiterApplyBot",{}),e.prototype.trackWidgetClick.call(this,"chat_Bot_Apply",{jobSeqNo:this.jobDetail.jobSeqNo}),!1;if(t){var o=t,i=e.prototype.getQueryParams.call(this);i&&i.length&&(o+=-1!=o.indexOf("?")?"&":"?",o+=i),o=-1==t.indexOf("http")?this.commonService.getBaseUrl()+o:o;var n=this.cookieManager.get("ext_trk");return this.jobDetail.hasOwnProperty("externalTracking")&&("true"==this.jobDetail.externalTracking||1==this.jobDetail.externalTracking)&&n&&(o+=-1!=o.indexOf("?")?"&":"?",o+=n),o}},t.prototype.imApplyUrl=function(){var e=this;if("internal"==this.siteViewType){var t=this.commonService.getBaseUrl()+"apply?jobSeqNo="+this.jobDetail.jobSeqNo,o="",i=!1;if(this.applyParams&&this.applyParams.length){var n=t;this.jobDetail.hasOwnProperty("imExternalApply")&&(n=this.jobDetail.imExternalApply?this.jobDetail.imApplyUrl:t),this.applyParams.forEach(function(t){-1==n.indexOf(t.key)&&t.isFromJob&&t.value&&t.value.length&&e.jobDetail[t.value]?o+=o&&o.length?"&"+t.key+"="+e.jobDetail[t.value]:t.key+"="+e.jobDetail[t.value]:-1==n.indexOf(t.key)&&!t.isFromJob&&t.value&&t.value.length&&(o+=o&&o.length?"&"+t.key+"="+t.value:t.key+"="+t.value),t.isEncode&&(i=t.isEncode)})}return this.jobDetail.hasOwnProperty("imExternalApply")&&this.jobDetail.imExternalApply?(o&&o.length&&(o=-1==this.jobDetail.imApplyUrl.indexOf("?")?"?"+o:"&"+o,this.jobDetail.imApplyUrl=i?this.jobDetail.imApplyUrl+encodeURIComponent(o):this.jobDetail.imApplyUrl+o),this.jobDetail.imApplyUrl):(o&&o.length&&(o=-1==t.indexOf("?")?"?"+o:"&"+o,t+=o),t)}},t.prototype.openReferPopup=function(){
var e={};e.jobSeqNo=this.jobDetail.jobSeqNo,e.category=this.jobDetail.category,e.jobId=this.jobDetail.jobId,this.eventAggregator.publish(this.eventTag+"prefillData",e)},t.prototype.getJobSeqNo=function(){var e=this.commonService.getBaseUrl().length,t=window.location.href.slice(e),o=t.split("/"),i=this.commonService.getRawUrl("job"),n=i.split("/"),a=n.findIndex(function(e){return":jobSeqNo"===e||":jobId"===e});if(-1!==a){1==o.length&&(a=0);var r=-1!=o[a].indexOf("?")?o[a].split("?")[0]:o[a];return decodeURIComponent(r)}},t.prototype.handleReferJob=function(e){this.referJob=JSON.parse(JSON.stringify(this.jobDetail)),this.questionnaireMode==l?(document.body.classList.add("modal-open"),this.showReferView=!this.showReferView,this.showReferView||this.closeRefer()):"first"==this.questionnaireMode?e?"ph-questionnaire"==e?(this.showReferView=!0,this.showQuestionnaireView=!1):this.closeRefer():(document.body.classList.add("modal-open"),this.showReferView=!1,this.showQuestionnaireView=!0):"last"==this.questionnaireMode&&(e?"ph-refer-friend"==e?(this.showReferView=!1,this.showQuestionnaireView=!0):this.closeRefer():(document.body.classList.add("modal-open"),this.showReferView=!0,this.showQuestionnaireView=!1))},t.prototype.closeRefer=function(){this.showReferView=!1,this.showQuestionnaireView=!1,document.body.classList.remove("modal-open"),this.referralId=""},t.prototype.addSummaryBorderClassAction=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".summary-col");if(t&&t.childElementCount){var o=t.offsetWidth,i=t.children[0].offsetWidth,n=Math.round(o/i),a=t.childElementCount,r=a-1;do{t.children[r].classList.add("no-border"),r--}while((r+1)%n!=0)}},250)},t.prototype.fetchJobViewCount=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i;return __generator(this,function(a){switch(a.label){case 0:return e=n.WidgetConfig.v1.ddoKeyGetJobViewCount,t=new Date,t.setDate(t.getDate()-7),o={jobId:this.jobDetail.jobId,from:t.getTime()},[4,this.jobDetailsService.makeDDORequest(s,e,o)];case 1:return i=a.sent(),i&&"success"==i.status&&i.data&&i.data.viewCount?(this.jobViewCount=i.data.viewCount,this.jobViewCount>100&&(this.jobViewCount-=this.jobViewCount%10)):this.jobViewCount=0,[2]}})})},t.prototype.openMultiLocationModal=function(){var t=this;this.showMultiLocation=!0,setTimeout(function(){var o=t.element.querySelector(".multi-location-popup"),i=t.element.querySelector(".ph-a11y-multi-location"),n=t.element.querySelector(".ph-a11y-close-multi-location");o&&i&&n&&e.prototype.openDialogPopup.call(t,"multi-location-popup",i,n)},50);var o={jobSeqNo:this.jobDetail.jobSeqNo,category:this.jobDetail.category};e.prototype.trackWidgetClick.call(this,"multi_location_click",o)},t.prototype.closeMultiLocationModal=function(){this.showMultiLocation=!1,e.prototype.closeDialogPopup.call(this);var t={jobSeqNo:this.jobDetail.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)},t.prototype.openMultiCategoryModal=function(){var t=this;this.showMultiCategory=!0,setTimeout(function(){var o=t.element.querySelector(".multi-category-popup"),i=t.element.querySelector(".ph-a11y-multi-category"),n=t.element.querySelector(".ph-a11y-close-multi-category");o&&i&&n&&e.prototype.openDialogPopup.call(t,"multi-category-popup",i,n)},50);var o={jobSeqNo:this.jobDetail.jobSeqNo,category:this.jobDetail.category};e.prototype.trackWidgetClick.call(this,"multi_category_click",o)},t.prototype.closeMultiCategoryModal=function(){this.showMultiCategory=!1,e.prototype.closeDialogPopup.call(this);var t={jobSeqNo:this.jobDetail.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)},t.prototype.fetchRecommendedImages=function(){var e=this;this.commonService.isCrawlerUserAgent()||!this.isRecommendation()||this.jobDetail.franchiseeId?this.removeVisibleHidden():this.recomImageConfig&&this.recomImageConfig.isRecommendedImagesReq&&setTimeout(function(){var t={};if(e.recomImageConfig)if("banner_img"==e.recomImageConfig.type){var o=e.element.querySelector("#defaultHeroImage");o&&(o.onload=function(){e.updateBannerImageDimensions(o),t=e.getRecomImgsPayload(),e.setContentImageUrls(t)},o.complete&&o.onload())}else t=e.getRecomImgsPayload(),e.setContentImageUrls(t)},100)},t.prototype.updateBannerImageDimensions=function(e){this.recomImageConfig&&(this.recomImageConfig.minWidth=e.width,this.recomImageConfig.height=e.height,this.recomImageConfig.aspectRatio=this.recomImageConfig.minWidth/this.recomImageConfig.height,this.recomImageConfig.fontColor=this.getBannerFontColor())},t.prototype.setContentImageUrls=function(e){var t=this;e.strictFilters.mappingId||"award_img"==this.recomImageConfig.type||"logo_img"==this.recomImageConfig.type?this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDynamicJDContent,e).then(function(o){o&&"success"==o.status&&o.data?"workplace_img"==t.recomImageConfig.type?t.getWorkPlaceImages(e,o.data):t.contentRecomImgUrls=o.data:t.removeVisibleHidden()}):"banner_img"==this.recomImageConfig.type&&this.removeVisibleHidden()},t.prototype.getRecomImgsPayload=function(){this.jobDetail&&this.jobDetail.jobSeqNo&&(this.recomImageConfig.jobSeqNo=this.jobDetail.jobSeqNo);var e=this.recomImageConfig,t={},o=[];if("award_img"==this.recomImageConfig.type)o.push(this.jobDetail.country),t.location=o;else if("logo_img"==this.recomImageConfig.type){var i=[];i.push(this.jobDetail.brand),t.brand=i}else if(this.jobDetail.locabbrev){var n=[];n.push(this.jobDetail.locabbrev),t.mappingId=n}return t&&(e.strictFilters=t),e.imagesOnly=!0,e},t.prototype.openPopUp=function(t,o){this.activeSlide=o,this.imagePopUp=!0;var i=o+1,n=this.element.querySelector(".container .workplaceImages:nth-child("+i+") a"),a=this.element.querySelector(".modal");e.prototype.openDialogPopup.call(this,"modal",n,a)},t.prototype.closePopUp=function(){this.imagePopUp=!1,this.activeSlide=void 0,e.prototype.closeDialogPopup.call(this)},t.prototype.getWorkPlaceImages=function(e,t){var o,i=[],n=e.minWidth,a=e.aspectRatio;o=1==a?n:n/a;for(var r=e.popUpWidth,s=e.popUpHeight,l=!1,c=0;c<t.length;c++){var p={};if(p.croppedImageUrl=t[c].croppedImageUrl,p.sourceImageUrl=t[c].sourceImageUrl,p.alt_text=t[c].alt_text,p.url=this.getRequiredImageDimension(n,o,t[c].url),p.popUpImageUrl=this.getRequiredImageDimension(r,s,t[c].url),!p.popUpImageUrl){var d=this.getSortedUrls(t[c].url);p.popUpImageUrl=this.getNearSizeImage(r,d)}p.url?i.push(p):l=!0}l||(this.contentRecomImgUrls=i)},t.prototype.getRequiredImageDimension=function(e,t,o){var i=void 0,n=(o||[]).filter(function(o){return o.width==e&&o.height==t});return n&&n[0]&&(i=n[0].url),i},t.prototype.getSortedUrls=function(e){return e.sort(function(e,t){return e.width-t.width})},t.prototype.getNearSizeImage=function(e,t){for(var o=void 0,i=1;i<t.length;i++)if(e<=t[i].width&&e>=t[i-1].width){o=t[i-1].url;break}return o||(o=t[t.length-1].url),o},t.prototype.getATSProfile=function(){var e=this;this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyATSProfileUrl,{}).then(function(t){t&&t.division&&"External"!=t.division&&(e.showReferrals=!0)})},t.prototype.isJobApplied=function(){var e=this;this.jobDetailsService.isUserApplied(s,n.WidgetConfig.v1.ddoKeyIsUserApplied,{jobId:1!=this.jobSeqNo.indexOf("?")?this.jobSeqNo.split("?")[0]:this.jobSeqNo}).then(function(t){e.userAppliedState=t.status||200})},t.prototype.isRecommendation=function(){return!!(this.recomImageConfig&&this.recomImageConfig.isRecommendedImagesReq||this.isRecommendHeroImg)},t.prototype.copyLink=function(){var t=this,o=document.createElement("input"),i=window.location.href;document.body.appendChild(o),o.value=i,o.select(),document.execCommand("copy"),document.body.removeChild(o),this.linkCopied=!0,setTimeout(function(){t.linkCopied=!1,e.prototype.focusElement.call(t,".job-share-copylink",50)},2e3)},t.prototype.handleBlur=function(e){if(e&&e.target){var t=this.element.querySelector(".share-options");t&&(t.contains(e.relatedTarget)?this.jobDetail.toggleOpen=!0:this.jobDetail.toggleOpen=!1)}},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopupRequired",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isRecommendHeroImg",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"recommendedImgDimension",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"defaultRecommendedImg",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"videoKey",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isAtsProfileClient",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"showCategoryImg",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"eventTag",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"enableTeamDetails",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isMasterData",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"questionnaireMode",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"addSummaryBorderClass",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"enableJobViewCount",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"userAppliedState",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"activeSlide",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopUpUrlAvailable",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"disableFilters",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"recomImageConfig",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,a.JobDetailsService,r.EventAggregator,"function"==typeof(p=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&p||Object,"function"==typeof(d=void 0!==i.CookieManager&&i.CookieManager)&&d||Object,"function"==typeof(h=void 0!==i.GeoLocationService&&i.GeoLocationService)&&h||Object])],t);var c,p,d,h}(i.PhenomWidget);t.JobDetails=c}),define("text!v1/ph-job-details.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-candidate-login-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeyCandidateSignIn:"candidateLogin",ddoKeyCandidateRegistration:"candidateRegister",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfileV2",ddoKeyLogout:"jwtLogout",ddoKeyEagerLoad:"eagerLoadFyfSession",ddoKeyResetPassword:"candidateResetPassword",ddoKeySendResetPasswordLink:"candidateResetPasswordLink",ddoKeyIsValidToken:"validateOtp",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-login-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CandidateLoginService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-login",["require","exports","aurelia-framework","ph-common","./ph-candidate-login-config","./ph-candidate-login-service","aurelia-event-aggregator"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-candidate-login-v1",l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,p="signIn",d={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},h={upperCase:{regex:/(.*[A-Z].*)/,literal:"",hasError:!1},lowerCase:{regex:/(.*[a-z].*)/,literal:"",hasError:!1},numeric:{regex:/(.*\d.*)/,literal:"",hasError:!1},passwordLength:{regex:/(.{8,})/,literal:"",hasError:!1}},f={headerSignIn:"signInPopUpHeading",headerSignup:"createAccountPopUpHeading",fyf_signIn:"fyfFlowSignInHeading",fyf_signUp:"fyfFlowSignUpHeading",apply_signIn:"applyFlowSignInHeading",apply_signUp:"applyFlowSignUpHeading",visitor_saved_jobs_signUp:"savedJobsSignUpHeading",visitor_saved_jobs_signIn:"savedJobsSignInHeading"},u=function(e){function t(t,o,i,n){var a=e.call(this,t,o,s)||this;return a.commonService=o,a.candidateLoginService=i,a.eventAggregator=n,a.isDisabled=!1,a.isPasswordVisible=!1,a.staySignIn=!0,a.privacyDataConsent=!1,a.privacyConsentError=!1,a.privacyConsentReqFlag=!1,a.profileDetails={},a.isLoggedIn=!1,a.isDialogOpen=!1,a.signInModel={email:"",password:""},a.hasErrors=!1,a.errors={email:{},password:{},server:{}},a.step=p,a.isValidEmail=!1,a.isValidPassword=!1,a.isDropdownOpen=!1,a.socialProvider="",a.invalidCredentials=!1,a.subscriptions=[],a.resendEmail=!1,a.resetPasswordModel={rpToken:"",newPassword:""},a.pwdRegexMap=h,a.isHeadingDisabled=!1,a.cvUploaded=!1,a.tokenInvalid=!1,a.anonymousEmail="",a.showPasswordSrOnly=!1,a.passwordErrorSrOnly=!1,a.passwordInstructSrOnly=!1,a.isFirstTimeUser=!0,a.userState="",a.isProfileDataAvailable=!1,a.registeredSuccessfully=!1,a.piiConsentData={},a.piiConsentError=!1,a.piiConsentContext={},a.showConsentsForm=!1,a.submitData=!1,a.consentPrefill=!0,a.socialLoginContext={},a.handleEscape=function(e){var t=a.element.querySelector(".ph-a11y-modal-area");"Escape"!=e.key&&27!==e.keyCode&&27!==e.which&&e.target!=t||a.closePopup()},a.handleDropdownOutsideScope=function(){var e=a.handleOutsideScopeEvents(event,"post-sign-in-action-area");void 0!=e&&(a.isDropdownOpen=e)},a.handleOutsideScopeEvents=function(e,t){var o,i,n=e.target,a=!1;if(e.keyCode===d.RETURN||e.keyCode==d.TAB||void 0==e.keyCode)for(;n;)if(n=n.parentElement,i=n&&n.classList)if(null!=n&&i.contains(t)){if(i.contains(t)){a=!1;break}}else a=!0;else n||(a=!0);return(a||e.keyCode==d.ESC)&&(o=!1),o},a.resetProfileData=function(){a.anonymousEmail="",a.signInModel.email=""},a.element=t,a}return __extends(t,e),t.prototype.attached=function(){var t=this,o=this.commonService.getSiteSettings("navItems");if(o&&o.candidateHome){e.prototype.attached.call(this),this.getPiiConsentData(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.widgetContext=this.widgetContext||{},this.userState=this.commonService.getSegmentedUserState&&this.commonService.getSegmentedUserState();var i=window.location.hash;this.subscriptions.push(this.eventAggregator.subscribe("ph:hash:triggerCandidatePopup",function(e){t.ignoreMulTriggerHashPopup=!0,setTimeout(function(){t.isEventRaisedForTriggerHashPopup&&!t.isLoggedIn&&("#profilelogin"===i?t.handleDialogModal("signIn"):"#createprofile"===i&&t.handleDialogModal("signUp"))},150)})),this.fetchValidateJwtToken().then(function(){t.getContextBasedHeading(),t.getStateBasedHeading();var o=t.widgetContext.context;"fyf"==o&&e.prototype.focusElement.call(t,".ph-a11y-focus",200),t.isLoggedIn||"header"!==o||t.isEventRaisedForTriggerHashPopup||t.ignoreMulTriggerHashPopup||(t.isEventRaisedForTriggerHashPopup=!0,t.eventAggregator.publish("ph:hash:triggerCandidatePopup",{}))}),this.subscribeEvents(),this.isPrivacyDataConsentCheckBoxRequired(),this.flowType=this.flowType||"signUp",this.initialFlowType=this.flowType,window.localStorage&&window.localStorage.getItem("_li")&&(this.isFirstTimeUser=!1),document.addEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.addEventListener("keyup",this.handleDropdownOutsideScope,!0),"resetPassword"==this.initialFlowType&&this.checkValidToken()}},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.candidateLoginService.makeDDORequest(s,t).then(function(o){if(o&&o.status&&"success"==o.status&&o.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=o),e.piiConsentData=o.data,e.handleConsentData();else{var i=e.commonService.getSiteSettings("piiConsentConfig");i&&(e.piiConsentData=JSON.parse(JSON.stringify(i)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.signUp.bind(this),this.piiConsentContext.submitFocus=this.element.querySelector(".submit"),this.socialLoginContext.consentData=this.piiConsentData,this.socialLoginContext.checkConsentError=this.hasPiiErrors.bind(this),this.socialLoginContext.handleError=this.socialLoginError.bind(this))},t.prototype.socialLoginError=function(){this.piiConsentError&&(this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(),e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{}),this.consentsForm())},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox")},t.prototype.widgetContextChanged=function(e,t){e&&e.triggerPopup&&(this.isHeadingDisabled=!0,this.handleDialogModal(this.flowType,e.closeSelector)),e&&e.profile&&e.profile.email&&(this.anonymousEmail=e.profile.email)&&(this.signInModel.email=this.anonymousEmail),e&&e.resumeUploaded&&(this.cvUploaded=!0),this.getContextBasedHeading()},t.prototype.getContextBasedHeading=function(){if(this.widgetContext&&this.widgetContext.context&&this.widgetContext.context.length&&this.widgetBundle)switch(this.widgetContext.context){case"fyf":case"fyf_container":this.widgetBundle[f.fyf_signIn]&&(this.widgetBundle[f.headerSignIn]=this.widgetBundle[f.fyf_signIn]),this.widgetBundle[f.fyf_signUp]&&(this.widgetBundle[f.headerSignup]=this.widgetBundle[f.fyf_signUp]);break;case"apply":this.widgetBundle[f.apply_signIn]&&(this.widgetBundle[f.headerSignIn]=this.widgetBundle[f.apply_signIn]),this.widgetBundle[f.apply_signUp]&&(this.widgetBundle[f.headerSignup]=this.widgetBundle[f.apply_signUp])}},t.prototype.getStateBasedHeading=function(){(!this.widgetContext||this.widgetContext&&"apply"!=this.widgetContext.context)&&("visitor"==this.userState&&!this.isProfileDataAvailable&&this.widgetBundle?(this.widgetBundle[f.visitor_saved_jobs_signIn]&&(this.widgetBundle[f.headerSignIn]=this.widgetBundle[f.visitor_saved_jobs_signIn]),this.widgetBundle[f.visitor_saved_jobs_signUp]&&(this.widgetBundle[f.headerSignup]=this.widgetBundle[f.visitor_saved_jobs_signUp])):this.isProfileDataAvailable&&this.widgetBundle&&(this.widgetBundle[f.fyf_signIn]&&(this.widgetBundle[f.headerSignIn]=this.widgetBundle[f.fyf_signIn]),this.widgetBundle[f.fyf_signUp]&&(this.widgetBundle[f.headerSignup]=this.widgetBundle[f.fyf_signUp])))},t.prototype.setValueInLocalStorage=function(){window.localStorage&&!window.localStorage.getItem("_li")&&window.localStorage.setItem("_li","1")},t.prototype.hasPiiErrors=function(){var e=this;return this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)}),this.piiConsentError},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)}),!this.isButtonDisabled&&(this.piiConsentError=!1)},t.prototype.signIn=function(){var t=this,o=this.validateEmail(!0),i=this.validatePassword(this.signInModel.password,!0,o);this.hasErrors=o||i,this.errors.server={};var a=this.widgetContext&&this.widgetContext.context||"";if(this.hasErrors)this.focusToErrorField();else{var r={email:this.signInModel.email,password:this.signInModel.password};!this.staySignIn&&(r.unTrustedDevice=!0),"apply"===a&&e.prototype.trackWidgetClick.call(this,"ch_signin_trigger_apply_ty"),this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyCandidateSignIn,r).then(function(o){if(o&&"success"==o.status&&200==o.code){t.setEagerLoadFlowType();var i={context:a||t.commonService.getPageName()};e.prototype.trackWidgetClick.call(t,"profile_signIn_click",i),"resetPassword"==t.initialFlowType?window.location.href=t.commonService.getBaseUrl():(t.fetchValidateJwtToken(!0),t.closePopup(),t.resetErrorFields()),t.setValueInLocalStorage(),"apply"===a&&e.prototype.trackWidgetClick.call(t,"ch_signin_apply_ty")}else o&&"failure"==o.status&&405==o.code&&o.data?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E103",t.errors.email.socialProvider=o.data.socialProvider,t.focusToField("[ref='loginEmail']")):o&&"failure"==o.status&&404==o.code?(t.isValidPassword=!1,t.errors.password.error=!0,t.errors.password.code="E103",t.focusToField("[ref='loginPassword']")):o&&"failure"==o.status&&401==o.code?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E105",t.focusToField("[ref='loginEmail']")):t.showErrorMsg("E500")})}},t.prototype.fetchValidateJwtToken=function(t){var o=this;return t=t||!1,e.prototype.unhideLoader.call(this),this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(i){return i&&i.data?(o.isLoggedIn=i.data.isValidToken&&!i.data.isAnonymous,i.data.isSocialLogin&&o.setValueInLocalStorage(),o.isLoggedIn?(o.isProfileDataAvailable=!0,o.fetchProfileData(t,!1)):i.data.isAnonymous?(o.isProfileDataAvailable=!0,o.fetchProfileData(t,!0)):e.prototype.hideLoader.call(o)):e.prototype.hideLoader.call(o),!0},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.fetchProfileData=function(t,o){var i=this;this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyMergedProfile,{}).then(function(n){if(n&&Object.keys(n).length&&"success"==n.status){if(o?(i.anonymousEmail=n.email,i.anonymousEmail&&(i.signInModel.email=i.anonymousEmail)):i.profileDetails.profile=n,t){i.publishSignInEvents(n);var a={context:"candidateProfile"};i.widgetContext=i.widgetContext||{context:"header"},a.widgetContext=i.widgetContext.context,i.eventAggregator.publish("getUserProfileData",a)}i.piiConsentData&&i.piiConsentData.length&&i.consentPrefill&&i.piiConsentData.forEach(function(e){n&&n[e.type]&&(e.isChecked=!0)})}else i.isLoggedIn=!1;e.prototype.hideLoader.call(i)},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.publishSignInEvents=function(e){this.eventAggregator.publish("ph:candidateLoggedinEvent",e),this.eventAggregator.publish("jobCartUpdatedCount"),this.commonService.raiseCustomEvent&&this.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount","")},t.prototype.checkEmailValidation=function(){this.isValidEmail=l.test(this.signInModel.email)},t.prototype.checkPasswordValidation=function(e){var t=this,o=this.element.querySelector('[id="createPassword"]');o&&o.removeAttribute("aria-describedby"),e=e||this.signInModel.password,this.isValidPassword=c.test(e),this.errors.password.error?(o&&o.setAttribute("aria-describedby","errorCreatePasswordSrOnly"),this.passwordErrorSrOnly=!0):o&&o.setAttribute("aria-describedby","errorCreatePassword"),setTimeout(function(){t.passwordErrorSrOnly=!1},1e3)},t.prototype.validateEmail=function(e){var t=this;this.errors.email.error=!1,this.errors.email.srHidden=!!e;var o=!1;return this.signInModel.email?l.test(this.signInModel.email)?(this.errors.email.code=void 0,o=!1):(this.errors.email.code="E102",o=!0):(this.errors.email.code="E101",o=!0),setTimeout(function(){t.errors.email.error=o},0),o},t.prototype.validatePassword=function(e,t,o){var i=this;e=e||this.signInModel.password,this.errors.password.error=!1,this.errors.password.srHidden=!!o;var n=!1;return t?e.length?(this.errors.password.code=void 0,n=!1):(this.errors.password.code="E101",n=!0):c.test(e)?(this.errors.password.code=void 0,Object.keys(this.pwdRegexMap).forEach(function(e){i.pwdRegexMap[e].hasError=!1}),n=!1):(Object.keys(this.pwdRegexMap).forEach(function(t){i.pwdRegexMap[t].regex.test(e)?i.pwdRegexMap[t].hasError=!1:i.pwdRegexMap[t].hasError=!0}),n=!0),this.errors.password.error=n,n},t.prototype.validateNewPassword=function(){return this.validatePassword(this.resetPasswordModel.newPassword)},t.prototype.forgotPassword=function(){var t=this;this.resetErrorFields(),e.prototype.unhideLoader.call(this),e.prototype.hideLoader.call(this),this.step="forgotPassword",setTimeout(function(){t.focusToField("[ref='loginEmail']")},100)},t.prototype.sendPswdResetLink=function(){var t=this;if(this.hasErrors=this.validateEmail(!0),this.hasErrors)this.focusToField("[ref='loginEmail']");else{var o={email:this.signInModel.email};this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeySendResetPasswordLink,o).then(function(o){!o||"success"!=o.status&&200!=o.status?o&&"failure"==o.status&&401==o.code?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E105",t.focusToField("[ref='loginEmail']")):t.showErrorMsg("E500"):(e.prototype.trackWidgetClick.call(t,"reset_password_link_click"),t.resetErrorFields(),e.prototype.unhideLoader.call(t),e.prototype.hideLoader.call(t),t.step="resetPasswordLink",setTimeout(function(){t.focusToField(".ph-a11y-popup-start-focus ")},100),t.tokenInvalid=!1)})}},t.prototype.resendPswrdResetLink=function(){this.resendEmail=!0,this.sendPswdResetLink()},t.prototype.changeFlowType=function(e,t){var o=this;this.resetErrorFields(),this.flowType=e,this.step=t||p,this.signInModel.password="",this.resetPasswordModel.newPassword="",this.isPasswordVisible=!1,this.isValidPassword=!1,this.staySignIn=!0,this.privacyConsentError=!1,Object.keys(this.pwdRegexMap).forEach(function(e){o.pwdRegexMap[e].hasError=!1}),setTimeout(function(){o.focusToField("[ref='loginEmail']")},100)},t.prototype.isPrivacyConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.handleDialogModal=function(e,t){this.isDialogOpen=!0,t?(this.isDialogOpen=!0,this.addModalPopup("[ref='loginEmail']",t)):(this.flowType=e,this.initialFlowType=e,this.isDialogOpen=!0,"signIn"==e?this.addModalPopup("[ref='loginEmail']",".sign-in-link"):"signUp"==e&&this.addModalPopup("[ref='loginEmail']",".create-account-link"))},t.prototype.addModalPopup=function(t,o){var i=this;setTimeout(function(){var n="string"==typeof o?i.element.querySelector(o):o,a=i.element.querySelector(t);i.element.addEventListener("keyup",i.handleEscape),i.element.addEventListener("click",i.handleEscape),e.prototype.openDialogPopup.call(i,"ph-a11y-modal-area",n,a)},0),setTimeout(function(){i.element.querySelector("[ref='loginEmail']")&&i.anonymousEmail&&i.anonymousEmail.length&&(i.element.querySelector("[ref='loginEmail']").value=i.anonymousEmail)},50)},t.prototype.closePopup=function(){this.isDialogOpen=!1,e.prototype.closeDialogPopup.call(this),this.signInModel.password="",this.signInModel.email="",this.resetPasswordModel.newPassword="",this.step=p,this.flowType=this.initialFlowType,this.isValidEmail=!1,this.isValidPassword=!1,this.resendEmail=!1,this.isPasswordVisible=!1,this.cvUploaded=!1,this.piiConsentError=!1,this.showConsentsForm=!1,this.resetErrorFields(),this.privacyConsentError=!1,this.widgetContext&&"fyf_container"==this.widgetContext.context&&this.widgetContext.widgetRef&&this.widgetContext.widgetRef.closePopup&&this.widgetContext.widgetRef.closePopup(),this.element.removeEventListener("keyup",this.handleEscape),this.element.removeEventListener("click",this.handleEscape)},t.prototype.toggleDropDown=function(){this.isDropdownOpen=!this.isDropdownOpen},t.prototype.consentsForm=function(t){var o=this;this.piiConsentData&&this.piiConsentData.length>=3&&(e.prototype.unhideLoader.call(this),e.prototype.hideLoader.call(this),this.showConsentsForm=!0,this.submitData=!!t,this.isButtonDisabled(),setTimeout(function(){o.focusToField(".back-btn")},100))},t.prototype.closeConsentsForm=function(t){var o=this;this.showConsentsForm=!1,t?e.prototype.trackWidgetClick.call(this,"pii-consent-submit",{}):e.prototype.trackWidgetClick.call(this,"pii-consent-done",{}),setTimeout(function(){o.focusToField(".consents-link")},100)},t.prototype.signUp=function(){var t=this;this.privacyConsentError=!1;var o=this.validateEmail(!0),i=this.validatePassword(this.signInModel.password,!1,o);this.hasErrors=o||i,this.errors.server={};var a=this.widgetContext&&this.widgetContext.context||"";if(this.hasErrors)return this.privacyConsentReqFlag&&!this.privacyDataConsent?void(this.privacyConsentError=!0):void this.focusToErrorField();if(this.hasPiiErrors(),this.piiConsentError&&!this.hasErrors)return this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(!0),e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{}),void this.consentsForm(!0);if(this.hasErrors){if(this.privacyConsentReqFlag&&!this.privacyDataConsent)return void(this.privacyConsentError=!0);this.focusToErrorField()}else{if(this.closeConsentsForm(!0),this.submitData=!1,this.privacyConsentReqFlag&&!this.privacyDataConsent&&(!this.piiConsentData||!this.piiConsentData.length))return void(this.privacyConsentError=!0);var r={email:this.signInModel.email,password:this.signInModel.password};!this.staySignIn&&(r.unTrustedDevice=!0),"apply"===a&&e.prototype.trackWidgetClick.call(this,"ch_signup_trigger_apply_ty"),r.profile={},this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(r.profile[e.type]=!!e.isChecked)}),this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyCandidateRegistration,r).then(function(o){if(o&&"success"==o.status&&200==o.code){t.setEagerLoadFlowType();var i={context:a||t.commonService.getPageName()};e.prototype.trackWidgetClick.call(t,"profile_signUp_click",i),t.closePopup(),t.fetchValidateJwtToken(!0),t.resetErrorFields(),t.setValueInLocalStorage(),e.prototype.focusElement.call(t,".uploadSuccess",300),"apply"===a&&e.prototype.trackWidgetClick.call(t,"ch_signup_apply_ty"),setTimeout(function(){t.registeredSuccessfully=!0,setTimeout(function(){t.registeredSuccessfully=!1},2e3)},1e3)}else o&&"failure"==o.status&&405==o.code&&o.data?(t.isValidEmail=!1,t.errors.email.error=!0,
t.errors.email.code="E103",t.errors.email.socialProvider=o.data.socialProvider,t.focusToField("[ref='loginEmail']")):o&&"failure"==o.status&&402==o.code?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E104",t.focusToField("[ref='loginEmail']")):t.showErrorMsg("E500")})}},t.prototype.detached=function(){document.removeEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.removeEventListener("keyup",this.handleDropdownOutsideScope,!0),document.removeEventListener("ph:site:removeProfile",this.resetProfileData),document.removeEventListener("ph:bot:removeProfile",this.resetProfileData),this.subscriptions.forEach(function(e){e.dispose()}),this.changeFlowType(this.initialFlowType)},t.prototype.resetErrorFields=function(){var e=this;setTimeout(function(){e.errors.email={},e.errors.password={},e.errors.server={},e.socialProvider="",Object.keys(e.pwdRegexMap).length&&Object.keys(e.pwdRegexMap).forEach(function(t){e.pwdRegexMap[t]&&(e.pwdRegexMap[t].hasError=!1)})},0)},t.prototype.showErrorMsg=function(e){this.errors.server.error=!0,this.errors.server.code=e},t.prototype.subscribeEvents=function(){var e=this;this.subscriptions.push(this.eventAggregator.subscribe("candidateProfileUpdated",function(t){e.profileDetails.profile=t,e.isLoggedIn=!0})),this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(t){e.profileDetails.profile=t,e.isLoggedIn=!0})),this.subscriptions.push(this.eventAggregator.subscribe("getUserProfileData",function(t){"candidateProfile"!=t.context&&e.fetchProfileData(!1,!0)})),document.addEventListener("ph:site:removeProfile",this.resetProfileData),document.addEventListener("ph:bot:removeProfile",this.resetProfileData)},t.prototype.checkValidToken=function(){var t=this;this.resetPasswordModel.rpToken=e.prototype.getQueryParam.call(this,"rp");var o={rpToken:this.resetPasswordModel.rpToken};this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyIsValidToken,o).then(function(e){e&&"success"==e.status?t.tokenInvalid=!1:e&&"failure"==e.status&&403==e.code&&(t.tokenInvalid=!0,t.changeFlowType("signIn","forgotPassword"))},function(e){new Error(e)})},t.prototype.resetPassword=function(){var t=this;if(this.hasErrors=!this.tokenInvalid&&this.validateNewPassword(),this.errors.server={},this.hasErrors||this.tokenInvalid)this.focusToField("[ref='loginPassword']");else{this.resetPasswordModel.rpToken=this.resetPasswordModel.rpToken||e.prototype.getQueryParam.call(this,"rp");var o={rpToken:this.resetPasswordModel.rpToken,newPassword:this.resetPasswordModel.newPassword};this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyResetPassword,o).then(function(o){o&&"success"==o.status?(e.prototype.trackWidgetClick.call(t,"reset_password_click"),t.resetErrorFields(),t.resetPasswordModel.password="",t.changeFlowType("signIn")):o&&"failure"==o.status&&403==o.code?(t.resetPasswordModel.password="",t.tokenInvalid=!0):t.showErrorMsg("E500")})}},t.prototype.setEagerLoadFlowType=function(){var e={};e.flowType="candidateProfile",this.candidateLoginService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyEagerLoad,e).then(function(e){})},t.prototype.showHidePassword=function(){var e,t=this;this.isPasswordVisible=!this.isPasswordVisible,clearTimeout(e),this.showPasswordSrOnly=!0,e=setTimeout(function(){t.showPasswordSrOnly=!1},50)},t.prototype.focusToField=function(e){this.element.querySelector(e)&&this.element.querySelector(e).focus()},t.prototype.focusToErrorField=function(){var e=this;setTimeout(function(){if(e.errors.email.error)e.focusToField("[ref='loginEmail']");else if(e.errors.password.error){var t=document.querySelector('[id="createPassword"]');t.setAttribute("aria-describedby","errorCreatePasswordSrOnly"),e.focusToField("[ref='loginPassword']")}},0)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"flowType",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"widgetContext",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==i.CommonService&&i.CommonService)&&u||Object,a.CandidateLoginService,r.EventAggregator])],t);var u}(i.PhenomWidget);t.CandidateLogin=u}),define("text!v1/ph-candidate-login.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-candidate-login-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/widget-constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.MAP_PROVIDERS={GOOGLE:"google",MAPBOX:"mapbox"},e.MAP_LOAD_MODES={STATIC:"s",STATIC_INLINE:"si",JS:"i",NONE:"n"},e.GLOBAL_VAR_GOOGLE="google",e.DEFAULT_MAPBOX_BG_TYPE="streets",e.DEFAULT_GOOGLE_BG_TYPE="retro",e.MAP_SCRIPTS={google:{apiScript:"https://maps.googleapis.com/maps/api/js",clusterJsScript:"markerclusterer-v1.js",gmapsInfoBoxScript:"gmaps-infobox-v1.js"},mapbox:{mapboxScript:"mapbox-gl-v1.3.0.js",superClusterJsScript:"supercluster.min.js",mapboxTurf:"mapbox-turf.min-v1.js",mapboxSearch:"mapbox-gl-geocoder.min.js",mapboxDirections:"mapbox-gl-directions.js"}},e.mapConfig={enableDirections:{modules:[{name:"job"},{name:"event"}]}},e.MAP_BOX_DATE_LINE={mapboxTileSetId:"phenompeople.8t381n4o",mapboxTileSetUrl:"mapbox://phenompeople.8t381n4o",mapboxTileSetSource:"dateline-2g6kzo"},e}();t.WidgetConstants=o}),define("v1/ph-location-map-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"",jobDetailDDOKey:"jobDetail",apiScript:"https://maps.googleapis.com/maps/api/js",apiKey:"AIzaSyDkcktRULLQ5kwHIVz0I0mfXEUzj-LFuuI",apiLibraries:"",mapboxScript:"mapbox-gl-v1.js",locationmapsettings:"locationmapsettings"}}}),define("v1/base-map-provider",["require","exports","./ph-location-map-config"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,o,i,n,a,r,s){this.providerOptions={},this.element=e,this.widgetRef=i,this.providerOptions=s,this.widgetTagName=t,this.widgetVersion=o,this.eventAggregator=n,this.searchResultMode=a,this.hideLocationPopup=r}return e.prototype.getWidgetConfig=function(e){return o.WidgetConfig[this.widgetVersion][e]},e.prototype.getMapContainer=function(){return this.widgetRef.element.querySelector("#map")},e.prototype.resolveMapData=function(){var e=this;return this.widgetRef.resolveMapData().then(function(t){return e.mapData=t,t})},e.prototype.prepareMarkerInfoWindowContent=function(e){return this.widgetRef.prepareMarkerInfoWindowContent(e)},e.prototype.loadScript=function(e,t,o,i,n,a){this.widgetRef.loadScript(e,t,o,i,n,a)},e.prototype.handleWidgetTrack=function(e){var t=this;e.searchType="marker",e.isSearchType&&(e.searchType="search bar"),this.widgetRef.trackWidgetClick("map_location_selector",e),setTimeout(function(){var o=t.widgetRef.element.querySelector(".map .phs-location-link");o&&o.addEventListener("click",function(){t.widgetRef.trackWidgetClick("view_all_jobs_click",e)})},500)},e.prototype.loadMap=function(e){},e.prototype.renderMap1=function(){},e.prototype.loadInfoWindow=function(){},e.prototype.markerClickHandler=function(){},e.prototype.markerCloseTracking=function(e){this.widgetRef.trackWidgetClick("marker_close_click",{})},e.prototype.storeUserLocation=function(e){this.widgetRef.commonService.setLocalStorageContext("userLocation",e)},e}();t.BaseMapProvider=i}),define("v1/debounce",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.FUNC_ERROR_TEXT="Expected a function",this.NAN=NaN,this.symbolTag="[object Symbol]",this.reTrim=/^\s+|\s+$/g,this.reIsBadHex=/^[-+]0x[0-9a-f]+$/i,this.reIsBinary=/^0b[01]+$/i,this.reIsOctal=/^0o[0-7]+$/i,this.freeParseInt=parseInt,this.freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,this.freeSelf="object"==typeof self&&self&&self.Object===Object&&self,this.root=this.freeGlobal||this.freeSelf||Function("return this")(),this.objectProto=Object.prototype,this.objectToString=this.objectProto.toString,this.nativeMax=Math.max,this.nativeMin=Math.min}return e.prototype.now=function(){return this.root.Date.now()},e.prototype.debounce=function(e,t,o){function i(t){var o=h,i=f;return h=f=void 0,v=t,g=e.apply(i,o)}function n(e){return v=e,m=setTimeout(s,t),b?i(e):g}function a(e){var o=e-y,i=e-v,n=t-o;return S?this.nativeMin(n,u-i):n}function r(e){var o=e-y,i=e-v;return void 0===y||o>=t||o<0||S&&i>=u}function s(){var e=_.now();if(r(e))return l(e);m=setTimeout(s,a(e))}function l(e){return m=void 0,w&&h?i(e):(h=f=void 0,g)}function c(){void 0!==m&&clearTimeout(m),v=0,h=y=f=m=void 0}function p(){return void 0===m?g:l(_.now())}function d(){var e=_.now(),o=r(e);if(h=arguments,f=this,y=e,o){if(void 0===m)return n(y);if(S)return m=setTimeout(s,t),i(y)}return void 0===m&&(m=setTimeout(s,t)),g}var h,f,u,g,m,y,v=0,b=!1,S=!1,w=!0,_=this;if("function"!=typeof e)throw new TypeError(this.FUNC_ERROR_TEXT);return t=this.toNumber(t)||0,this.isObject(o)&&(b=!!o.leading,S="maxWait"in o,u=S?this.nativeMax(this.toNumber(o.maxWait)||0,t):u,w="trailing"in o?!!o.trailing:w),d.cancel=c,d.flush=p,d},e.prototype.isObject=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},e.prototype.isObjectLike=function(e){return!!e&&"object"==typeof e},e.prototype.isSymbol=function(e){return"symbol"==typeof e||this.isObjectLike(e)&&this.objectToString.call(e)==this.symbolTag},e.prototype.toNumber=function(e){if("number"==typeof e)return e;if(this.isSymbol(e))return this.NAN;if(this.isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=this.isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(this.reTrim,"");var o=this.reIsBinary.test(e);return o||this.reIsOctal.test(e)?this.freeParseInt(e.slice(2),o?2:8):this.reIsBadHex.test(e)?this.NAN:+e},e}();t.Debounce=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/google-map-provider",["require","exports","./widget-constants","./base-map-provider"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.markers=[],t.gMapsLoaded=function(){if(t.providerOptions.useClusters){var i=o.WidgetConstants.MAP_SCRIPTS[o.WidgetConstants.MAP_PROVIDERS.GOOGLE],n=t.providerOptions.platformAssetsBaseUrl,a=n+(t.providerOptions.clusterJsScript||i.clusterJsScript),r=n+(t.providerOptions.gmapsInfoBoxScript||i.gmapsInfoBoxScript);e.prototype.loadScript.call(t,r,function(){},[]),e.prototype.loadScript.call(t,a,function(){t.renderMap()},[])}else t.renderMap()},t.renderMap=function(){t.resolveMapData().then(function(e){var o=t.getLocationData(t.mapData),i=t.fetchDefaultSettings(t.providerOptions.bgType),n=t.getMapContainer();if(t.mapBounds=new google.maps.LatLngBounds,n&&o&&o.length&&(n.style.height=n.style.height||"350px",t.mapRef=new google.maps.Map(n,{zoom:12,center:new google.maps.LatLng(o[0].latLngObj.lat,o[0].latLngObj.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:i}),t.mapBounds=new google.maps.LatLngBounds,o&&o.length>1&&t.setZoom(),t.createMarkers(),t.providerOptions.useClusters)){var a={};t.providerOptions.assetUrls&&(a.imagePath=t.providerOptions.assetUrls.clusterAssetUrl,a.styles=t.providerOptions.assetUrls.styles),new MarkerClusterer(t.mapRef,t.markers,a),o&&o.length>1&&t.setZoom()}})},t}return __extends(t,e),t.prototype.loadMap=function(t){if(window&&!window.initMap&&(window.initMap=this.gMapsLoaded),e.prototype.loadMap.call(this,t),!window[o.WidgetConstants.GLOBAL_VAR_GOOGLE]&&this.providerOptions.apiKey){var i=o.WidgetConstants.MAP_SCRIPTS[o.WidgetConstants.MAP_PROVIDERS.GOOGLE],n=(this.providerOptions.apiScript||i.apiScript)+"?key="+this.providerOptions.apiKey+"&callback=initMap";e.prototype.loadScript.call(this,n,function(){},[o.WidgetConstants.GLOBAL_VAR_GOOGLE],!0,!0)}else this.providerOptions.apiKey&&this.gMapsLoaded()},t.prototype.createClusters=function(){},t.prototype.getLocationData=function(e){var t=Array.isArray(e),o=[];return t?e.forEach(function(e){e.latlong?(e.latlong.lng=e.latlong.lon,o.push({latLngObj:e.latlong,data:e})):o.push({latLngObj:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},data:e})}):o.push({latLngObj:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},data:e}),o},t.prototype.createMarkers=function(){var t=this,o=this.getLocationData(this.mapData);this.infoWindow=this.infoWindow||new google.maps.InfoWindow({}),o&&o&&o.length&&o.forEach(function(i,n){var a={lat:parseFloat(i.latLngObj.lat),lng:parseFloat(i.latLngObj.lng),lon:parseFloat(i.latLngObj.lon)},r={position:a,map:t.mapRef};t.providerOptions.assetUrls&&(r.icon=t.providerOptions.assetUrls.pinAssetUrl);var s=new google.maps.Marker(r);i.data.marker=s,s.addListener("click",function(){t.prepareMarkerInfoWindowContent(i.data).then(function(e){t.infoWindow.setContent(e),t.infoWindow.open(t.mapRef,s)}),i.locationSearchKey=i.data.locationKey,e.prototype.handleWidgetTrack.call(t,i.data)}),t.markers.push(s),o.length<2&&0==n&&t.prepareMarkerInfoWindowContent(i.data).then(function(e){t.infoWindow.setContent(e),t.infoWindow.open(t.mapRef,s)})})},t.prototype.setZoom=function(){var e=this;this.getLocationData(this.mapData).forEach(function(t){e.mapBounds.extend(t.latLngObj)}),this.mapRef.fitBounds(this.mapBounds)},t.prototype.gotoMarker=function(e){this.mapRef.setZoom(12),this.mapRef.panTo(e.marker.position),e.isSearchType=!0,new google.maps.event.trigger(e.marker,"click")},t.prototype.resetCluster=function(){this.mapRef.setZoom(4),this.mapRef.fitBounds(this.mapBounds)},t.prototype.fetchDefaultSettings=function(e){var t={sliver:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],retro:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],dark:[{elementType:"geometry",stylers:[{color:"#212121"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],night:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],abuergine:[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]};return t[e]||t.retro},t}(i.BaseMapProvider);t.GoogleMapProvider=n}),define("v1/lazy-map-intersection-observer",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=window,i=function(){function e(e){var t=this;if(o.IntersectionObserver){var i=e.fetchPageSpeedConfig&&e.fetchPageSpeedConfig();i&&i.rootMargin,this.lazyMapObserver=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){var o=e.target;t.callback(),t.lazyMapObserver.unobserve(o)}})})}}return e.prototype.observeMap=function(e,t){this.callback=t,this.lazyMapObserver.observe(e)},e}();t.LazyMapIntersectionObserver=i}),define("v1/mapbox-accessibility",["require","exports","./debounce"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.clearMarkers=function(){t.features&&t.features.forEach(function(e){e.marker&&(t.mapRef.getCanvasContainer().removeChild(e.marker),delete e.marker)})},this.queryFeatures=function(){t._debouncedQueryFeatures.cancel(),t.clearMarkers(),t.features=t.mapRef.queryRenderedFeatures({layers:t.options.layers}),t.features.map(function(e,o){var i=t.options,n=i.width,a=i.height;t.options.clusterText=t.options.clusterText||"",t.options.clusterLocationText=t.options.clusterLocationText||"",t.options.markerText=t.options.markerText||"";var r,s=e.properties[t.options.accessibleLabelProperty];"cluster-count"==e.layer.id&&e.properties.point_count&&(r=e.properties.point_count+" "+t.options.clusterLocationText),e.marker=document.createElement("button"),e.marker.setAttribute("aria-label",s?s+" "+t.options.markerText:t.options.clusterText+" "+r),e.marker.setAttribute("title",s?s+" "+t.options.markerText:t.options.clusterText+" "+r),t.options.searchResultMode?(e.marker.setAttribute("tabindex",-1),e.marker.setAttribute("aria-hidden",!0)):e.marker.setAttribute("tabindex",0),e.marker.setAttribute("role","button"),e.marker.setAttribute("type","button"),e.marker.setAttribute("data-index",o),e.marker.style.display="block";var l;if("Point"===e.geometry.type)l=t.mapRef.project(e.geometry.coordinates);else{var c=turf.bboxPolygon(e),p=t.mapRef.project([c[0],c[1]]),d=t.mapRef.project([c[2],c[3]]);n=Math.abs(d.x-p.x),a=Math.abs(d.y-p.y),l={x:(d.x+p.x)/2,y:(d.y+p.y)/2}}return e.marker.style.width=n+"px",e.marker.style.height=a+"px",e.marker.style.transform="translate(-50%, -50%) translate("+l.x+"px, "+l.y+"px)",e.marker.className="mapboxgl-accessibility-marker","unclustered-count"==e.layer.id?e.marker.addEventListener("click",function(e){var o=parseInt(e.target.getAttribute("data-index"));-1!=o&&t.options.handleMarker(t.features[o],o)}):e.marker.addEventListener("click",function(e){var o=parseInt(e.target.getAttribute("data-index"));if(-1!=o){var i=t.features[o].properties.cluster_id,n=t.features[o]._geometry.coordinates;t.options.handleCluster(i,n)}}),t.mapRef.getCanvasContainer().appendChild(e.marker),e})},this._movestart=function(){t._debouncedQueryFeatures.cancel(),t.clearMarkers()},this._render=function(){t.mapRef.isMoving()||t._debouncedQueryFeatures()};var i={width:24,height:24};if(this.debounceClass=new o.Debounce,!e&&!e.layers)throw new Error("An array of layers is required");if(!e&&!e.accessibleLabelProperty)throw new Error("a valid accessibleLabelProperty is required");this.options=Object.assign(i,e)}return e.prototype.onAdd=function(e){return this.mapRef=e,this._debouncedQueryFeatures=this.debounceClass.debounce(this.queryFeatures,100),this.mapRef.on("movestart",this._movestart),this.mapRef.on("moveend",this._render),this.mapRef.on("render",this._render),this.container=document.createElement("div"),this.container},e.prototype.onRemove=function(){this.container.parentNode.removeChild(this.container),this.mapRef.off("movestart",this._movestart),this.mapRef.off("moveend",this._render),this.mapRef.off("render",this._render),this._debouncedQueryFeatures.cancel(),delete this.mapRef},e}();t.MapboxAccessibility=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/map-box-provider",["require","exports","./widget-constants","./base-map-provider","./mapbox-accessibility","moment"],function(e,t,o,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window,s={jobLocation:"",restaurants:"food_and_drink",shopping:"",parking:""},l=["CN","IN","US"],c={driving:"icon-car-3",walking:"icon-walk",cycling:"icon-bicycle"},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.convertedData={},t.onInitMapBox=function(){t.resolveMapData().then(function(e){if(t.mapData&&Object.keys(t.mapData).length){var o=t.getLocationData(t.mapData),i=t.getMapContainer();if(r.mapboxgl.accessToken=t.providerOptions.apiKey,t.providerOptions.baseApiUrl&&(r.mapboxgl.baseApiUrl=t.providerOptions.baseApiUrl),t.boundbox=new r.mapboxgl.LngLatBounds,i&&o&&o.length){if(i.style.minHeight=i.style.minHeight||"350px",t.mapRef=new r.mapboxgl.Map({container:i,style:t.fetchDefaultSettings(t.providerOptions.bgType),attributionControl:!1,zoom:t.providerOptions.zoomMap,renderWorldCopies:!0,scrollZoom:!1,dragRotate:!1,sprite:"mapbox://sprites/mapbox/bright-v8"}),t.fetchMapBounds(),o&&1==o.length?(!t.searchResultMode||t.searchResultMode&&0!=t.widgetRef.totalJobs)&&t.createMarkers():(t.providerOptions.useClusters||o&&o.length>1)&&(!t.searchResultMode||t.searchResultMode&&0!=t.widgetRef.totalJobs)&&t.createClusters(),t.widgetRef.mapboxGeoSearch){var n=new r.MapboxGeocoder({accessToken:r.mapboxgl.accessToken,mapboxgl:r.mapboxgl,marker:!1,types:"country,region,postcode,district,place,locality,neighborhood,address"});t.element.querySelector("#geocoder").appendChild(n.onAdd(t.mapRef))}if(t.mapRef.addControl(new r.mapboxgl.NavigationControl),t.mapRef.on("zoomend",function(){var e=(new r.mapboxgl.Popup({closeOnClick:!0}),t.element.getElementsByClassName("mapboxgl-popup"));e[0]&&e.length>1&&e[0].remove()}),t.searchResultMode){var a=t.element.querySelector("#map"),s=a.querySelectorAll("[tabindex]");s&&s.forEach(function(e){e&&e.setAttribute("tabindex","-1"),e&&e.setAttribute("aria-hidden","true")});for(var l=t.element.querySelectorAll(".mapboxgl-ctrl button,.mapboxgl-ctrl a"),c=0;c<l.length;c++)l[c]&&l[c].setAttribute("tabindex","-1"),l[c]&&l[c].setAttribute("aria-hidden","true");var p=a.querySelector(".mapboxgl-ctrl-compass");p.classList&&p.classList.add("hide"),setTimeout(function(){for(var e=a.querySelectorAll(".phs-location-link, .infoTitle, .infoState, .mapboxgl-popup-close-button"),t=0;t<e.length;t++)e[t]&&e[t].setAttribute("tabindex","-1"),e[t]&&e[t].setAttribute("aria-hidden","true")},500)}else t.mapRef.addControl(new r.mapboxgl.FullscreenControl)}}})},t.handleMarker=function(e,o){e.isSearchType=!1,t.searchResultMode&&t.city!=e.properties.city&&t.count!=e.properties.count?(t.city=e.properties.city,t.count=e.properties.count,t.raiseMarkerEvent()):t.searchResultMode||(t.openPopup(e,o),t.setDestination(e,void 0,!0))},t.handleClusterClick=function(e,o){t.mapRef.getSource("location").getClusterExpansionZoom(e,function(e,i){e||t.mapRef.easeTo({center:o,zoom:i})});var i=t.element.querySelector("#map");i&&(i.setAttribute("tabindex","0"),i.setAttribute("aria-label","map"),setTimeout(function(){i.focus()},250))},t.handleCluster=function(e){var o=t.mapRef.queryRenderedFeatures(e.point,{layers:["cluster-count"]}),i=o[0].properties.cluster_id;t.mapRef.getSource("location").getClusterExpansionZoom(i,function(e,i){e||t.mapRef.easeTo({center:o[0].geometry.coordinates,zoom:i})});var n=t.element.querySelector("#map");n&&(n.setAttribute("tabindex","0"),n.setAttribute("aria-label","map"),setTimeout(function(){n.focus()},250))},t}return __extends(t,e),t.prototype.loadMap=function(t){var i=this;if(!r.mapboxgl&&this.providerOptions.apiKey){var n=o.WidgetConstants.MAP_SCRIPTS[o.WidgetConstants.MAP_PROVIDERS.MAPBOX],a=this.widgetRef.commonService.getSiteSettings("mapBoxGlScript")||n.mapboxScript,s=this.providerOptions.mapboxTurf||n.mapboxTurf,l=this.providerOptions.platformAssetsBaseUrl+a,c=this.providerOptions.platformAssetsBaseUrl+s;e.prototype.loadScript.call(this,c,function(){e.prototype.loadScript.call(i,l,function(){if(i.widgetRef.mapboxGeoSearch){var t=i.providerOptions.mapboxSearch||n.mapboxSearch,o=i.providerOptions.platformAssetsBaseUrl+t;i.widgetRef.enableMapboxDirections?e.prototype.loadScript.call(i,o,null,[]):e.prototype.loadScript.call(i,o,i.onInitMapBox,[])}if(i.widgetRef.enableMapboxDirections){var a=i.providerOptions.mapboxDirections||n.mapboxDirections,r=i.providerOptions.platformAssetsBaseUrl+a;e.prototype.loadScript.call(i,r,i.onInitMapBox,[])}i.widgetRef.enableMapboxDirections||i.widgetRef.mapboxGeoSearch||i.onInitMapBox()},["mapboxgl"])},["turf"])}else this.onInitMapBox()},t.prototype.fetchMapBounds=function(){var e=this;if(this.convertedData.features.forEach(function(t,o){e.boundbox.extend(t.geometry.coordinates)}),r.turf){var t=this.mapData.reduce(function(t,o){var i=e.convertLocData(o);return t.push(i),t},[]),o={type:"FeatureCollection",features:t},i=r.turf.extent(o),n=[i[0]-1,i[1]-1,i[2]+1,i[3]+1];this.mapRef.fitBounds(n,{padding:{top:10,bottom:25,left:25,right:50}},{animate:!1})}else this.mapRef.fitBounds(this.boundbox,{animate:!1});this.mapRef.fitBounds(this.boundbox,{animate:!1}),this.convertedData.features.length<10&&this.mapRef.setZoom(this.mapRef.getZoom()-1)},t.prototype.convertLocData=function(e){var t={};t.type="Feature",t.geometry={},t.geometry.type="Point",t.properties={},t.properties.type="Point";for(var o in e)e[o]&&(t.properties[o]=e[o]);if(e.key){var i=e.key.trim();t.properties.key=i,t.key=i,t.properties.count=e.count}return t.geometry.coordinates=[],t.geometry.coordinates.push(e.latlong.lon),t.geometry.coordinates.push(e.latlong.lat),t},t.prototype.setBoundaryPositions=function(){var e=this,t=this.widgetRef.commonService.getParam("worldViewMapBoxCountry");t&&-1!=l.indexOf(t)&&["admin-0-boundary","admin-1-boundary","admin-0-boundary-disputed","admin-1-boundary-bg","admin-0-boundary-bg"].forEach(function(o){try{e.mapRef.getFilter(o)&&e.mapRef.setFilter(o,["match",["get","worldview"],["all",t],!0,!1])}catch(e){}})},t.prototype.handleMapBoxFullScreen=function(){var e=this,t=this.element.querySelector(".mapboxgl-ctrl-fullscreen");t&&t.addEventListener("click",function(t){setTimeout(function(){e.mapRef.resize()},300)})},t.prototype.createClusters=function(){var e=this;this.mapRef.on("load",function(){e.mapRef.resize(),e.mapRef.loadImage(e.providerOptions.assetUrls.clusterAssetUrl,function(t,i){e.mapRef.addImage("clusterImg",i),e.mapRef.loadImage(e.providerOptions.assetUrls.pinAssetUrl,function(t,i){e.mapRef.addImage("markerImg",i),e.mapRef.addSource("location",{type:"geojson",data:e.convertedData,cluster:!0,clusterMaxZoom:14,clusterRadius:e.providerOptions.clusterRadius}),e.mapRef.addLayer({id:"cluster-count",type:"symbol",source:"location",filter:["has","point_count"],layout:{"icon-image":"clusterImg","icon-size":.75,"text-field":"{point_count_abbreviated}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":parseInt(e.providerOptions.assetUrls.styles[0].textSize)},paint:{"text-color":e.providerOptions.assetUrls.styles[0].textColor}}),e.mapRef.addLayer({id:"unclustered-count",type:"symbol",source:"location",filter:["!",["has","point_count"]],layout:{"icon-image":"markerImg","icon-size":1},paint:{"text-color":"red"}}),e.mapRef.addControl(new n.MapboxAccessibility({accessibleLabelProperty:"city",layers:["unclustered-count","cluster-count"],handleMarker:e.handleMarker,handleCluster:e.handleClusterClick,markerText:e.widgetRef.widgetBundle.markerText,clusterText:e.widgetRef.widgetBundle.clusterText,clusterLocationText:e.widgetRef.widgetBundle.clusterLocationText,searchResultMode:e.searchResultMode})),e.mapRef.addLayer({id:o.WidgetConstants.MAP_BOX_DATE_LINE.mapboxTileSetId,type:"line",source:{type:"vector",url:o.WidgetConstants.MAP_BOX_DATE_LINE.mapboxTileSetUrl},"source-layer":o.WidgetConstants.MAP_BOX_DATE_LINE.mapboxTileSetSource,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":e.providerOptions.dateLineColor,"line-width":2,"line-dasharray":[5,2]}}),e.mapRef.on("mouseenter","cluster-count",function(){e.mapRef.getCanvas().style.cursor="pointer"}),e.mapRef.on("mouseleave","cluster-count",function(){e.mapRef.getCanvas().style.cursor=""}),e.mapRef.on("mouseenter","unclustered-count",function(){e.mapRef.getCanvas().style.cursor="pointer"}),e.mapRef.on("mouseleave","unclustered-count",function(){e.mapRef.getCanvas().style.cursor=""}),e.mapRef.on("click","unclustered-count",function(t){var o=t.features[0];e.handleMarker(o)}),e.mapRef.on("click","cluster-count",function(t){e.handleCluster(t)}),e.handleMapBoxFullScreen()})}),e.setBoundaryPositions()})},t.prototype.convertLocationData=function(e){var t=this,o={};return o.features=[],Array.isArray(e)?(e.forEach(function(e){var i=t.convertData(e);o.features.push(i)}),this.convertedData=o,o.features):Array.isArray(e)?void 0:this.convertData(e)},t.prototype.convertData=function(e){var t={};t.type="Feature",t.geometry={},t.geometry.type="Point",t.properties={},t.type="Point";for(var o in e)e[o]&&(t.properties[o]=e[o]);if(e.key){var i=e.key.trim();t.properties.key=i,t.key=i,t.properties.count=e.count}return t.geometry.coordinates=[],t.geometry.coordinates.push(e.latlong.lon),t.geometry.coordinates.push(e.latlong.lat),t},t.prototype.getLocationData=function(e){var t=this.convertLocationData(e),o=Array.isArray(t),i=[];return o?t.forEach(function(e){e.geometry.coordinates?i.push({latLngObj:e.geometry.coordinates,data:e}):i.push({latLngObj:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},data:e})}):i.push({latLngObj:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},data:e}),i},t.prototype.openPopup=function(t,o){var i=this;t.locationSearchKey=t.properties.locationKey,e.prototype.handleWidgetTrack.call(this,t),this.prepareMarkerInfoWindowContent(t.properties).then(function(e){var n=(new r.mapboxgl.Popup({closeOnClick:!0}),i.element.getElementsByClassName("mapboxgl-popup"));n[0]&&n[0].remove(),new r.mapboxgl.Popup({closeOnClick:!0}).setLngLat(t.geometry.coordinates).setHTML(e).addTo(i.mapRef),setTimeout(function(){var e=i.element.querySelector("#map .mapboxgl-popup-content");if(e){var n=e.querySelector(".mapboxgl-popup-close-button");i.searchResultMode?(e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")):e.setAttribute("tabindex","0"),n.addEventListener("click",function(){i.markerPopupClose(t.properties,o)}),n.focus()}},250)})},t.prototype.markerPopupClose=function(t,o){e.prototype.markerCloseTracking.call(this,t);var i=this.element.querySelector("#map .mapboxgl-accessibility-marker[data-index='"+o+"']");return i&&i.focus(),!0},t.prototype.gotoMarker=function(e){var t=this.convertLocationData(e);this.mapRef.flyTo({center:t.geometry.coordinates,zoom:this.providerOptions.zoomMap,animate:!1}),t.isSearchType=!0,this.openPopup(t)},t.prototype.resetCluster=function(){var e=(new r.mapboxgl.Popup({closeOnClick:!0}),this.element.getElementsByClassName("mapboxgl-popup"));e[0]&&e[0].remove(),this.mapRef.flyTo({zoom:this.providerOptions.zoomMap}),this.fetchMapBounds()},t.prototype.createMarkers=function(){var t=this,o=new r.mapboxgl.LngLatBounds,i=this.getLocationData(this.mapData);if(i&&i&&i.length&&(i.forEach(function(n,a){1==i.length&&t.mapRef.setZoom(12);var s=new r.mapboxgl.LngLat(parseFloat(n.latLngObj[0]),parseFloat(n.latLngObj[1]));o.extend(s),t.prepareMarkerInfoWindowContent(n.data.properties).then(function(o){t.mapRef.loadImage(t.providerOptions.assetUrls.pinAssetUrl,function(a,l){var c,p;p=new r.mapboxgl.Popup,l&&(l.alt="location marker",l.setAttribute("key-alt","location marker")),"false"!=t.hideLocationPopup&&0!=t.hideLocationPopup||(p=(new mapboxgl.Popup).setHTML(o).setLngLat(s).addTo(t.mapRef)),c=new r.mapboxgl.Marker(l).setLngLat(s).setPopup(p).addTo(t.mapRef),p.on("open",function(){t.widgetRef.trackWidgetClick("map_location_selector",n)}),p.on("close",function(){e.prototype.markerCloseTracking.call(t)}),1!=i.length||p.isOpen()||(c.togglePopup(),setTimeout(function(){var e=t.widgetRef.element.querySelector(".map .phs-location-link")
;e&&e.addEventListener("click",function(){t.widgetRef.trackWidgetClick("view_all_jobs_click",n)})},100))})})}),this.widgetRef.enableMapboxDirections&&!this.directionsRef)){var n=!1;this.directionsRef=new r.MapboxDirections({accessToken:r.mapboxgl.accessToken}),this.mapRef.addControl(this.directionsRef,"top-left"),this.directionsRef.setDestination(myLatLng.lng+","+myLatLng.lat),this.directionsRef.on("origin",function(o){if(o&&o.feature&&o.feature.geometry&&o.feature.geometry.coordinates&&o.feature.geometry.coordinates.length){var i={};i.longitude=o.feature.geometry.coordinates[0],i.latitude=o.feature.geometry.coordinates[1],e.prototype.storeUserLocation.call(t,JSON.stringify(i)),mark&&mark.remove(),n=!0}}),this.directionsRef.on("clear",function(e){e&&mark&&n&&(mark.addTo(t.mapRef),popup.addTo(t.mapRef),n=!1)})}var a=this.boundbox.getCenter();this.mapRef.setCenter(a),this.mapRef.setZoom(this.mapRef.getZoom()-1),this.mapRef.on("load",function(){t.mapRef.resize(),t.handleMapBoxFullScreen(),t.setBoundaryPositions(),t.setDestination()})},t.prototype.fetchDefaultSettings=function(e){e={retro:"outdoors",silver:"light",night:"navigationPreviewNight",abuergine:"navigationGuidanceNight"}[e]||e;var t={streets:"mapbox://styles/mapbox/streets-v11",outdoors:"mapbox://styles/mapbox/outdoors-v11",light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/mapbox/dark-v10",satellite:"mapbox://styles/mapbox/satellite-v9",satelliteStreets:"mapbox://styles/mapbox/satellite-streets-v11",navigationPreview:"mapbox://styles/mapbox/navigation-preview-day-v4",navigationPreviewNight:"mapbox://styles/mapbox/navigation-preview-night-v4",navigationGuidanceDay:"mapbox://styles/mapbox/navigation-guidance-day-v4",navigationGuidanceNight:"mapbox://styles/mapbox/navigation-guidance-night-v4",mapboxCN:{streets:"mapbox://styles/mapbox/streets-zh-v1",light:"mapbox://styles/mapbox/light-zh-v1",dark:"mapbox://styles/mapbox/dark-zh-v1"}};if(this.providerOptions.isMapboxcn&&this.providerOptions.mapConfigKey){var o=this.providerOptions.mapConfigKey;return t[o][e]||t[o].streets}var i=this.widgetRef.commonService.getParam("worldViewMapBoxCountry");return i&&-1!=l.indexOf(i)?t[e]||t.streets:(t[e]||t.streets)+"?optimize=true"},t.prototype.fetchPlaces=function(e){s[e]&&this.mapRef.setFilter("poi-label",["==","class",s[e]])},t.prototype.handleMapLoadState=function(){var e=this,t=0,o=setInterval(function(){e.mapRef.isMoving()||0==t||(e.widgetRef.freezeScreen=!1,clearInterval(o)),t++},100)},t.prototype.setDestination=function(e,t,o){var i;this.widgetRef.freezeScreen=!0,t?(i=[e.latlong.lon,e.latlong.lat],this.mapRef.flyTo({center:i,zoom:this.providerOptions.zoomMap,animate:!0})):i=e?e.geometry.coordinates:this.getLocationData(this.mapData)[0].latLngObj;var n=e;o&&(this.widgetRef.isDestinationSet=!0,this.widgetRef.showTransportDirections=!0,this.widgetRef.showAllJobLocations=!1,this.handleMapLoadState(),n=e.properties),this.destinationAddress=void 0!==e?n.cityStateCountry:this.mapData[0].cityStateCountry,this.myDestination=new r.mapboxgl.LngLat(i[0],i[1]),this.handleMapLoadState(),e||this.mapRef.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:this.myDestination}}]}}})},t.prototype.drawRoute=function(e,t){this.widgetRef.freezeScreen=!0;var o=e.geometry.coordinates.length-1,i=e.geometry.coordinates[o],n=new r.mapboxgl.LngLat(i[0],i[1]);this.searchMarker&&this.searchMarker.remove();var a=document.createElement("img");a.src=this.providerOptions.assetUrls.pinAssetUrl,this.searchMarker=new r.mapboxgl.Marker(a).setLngLat(n).addTo(this.mapRef),this.handleMapLoadState(),this.mapRef.getSource("route")?this.mapRef.getSource("route").setData(e):this.mapRef.addLayer({id:"route",type:"line",source:{type:"geojson",data:e},paint:{"line-color":"#658eff","line-width":5,"line-opacity":1}});var s=e.geometry.coordinates.reduce(function(e,t){return e.extend(t)},new r.mapboxgl.LngLatBounds(0,0));this.mapRef.fitBounds(s,{padding:20});var l=e.geometry.coordinates[Math.floor(o/2)],p=c[this.widgetRef.travelType],d=this.element.getElementsByClassName("mapboxgl-popup");d[0]&&d[0].remove(),new r.mapboxgl.Popup({closeButton:!1,closeOnClick:!1}).setLngLat(l).setHTML('<div class="icon-and-time">\n                  <i class="icon '+p+'" aria-hidden="true"></i>\n                  <span class="hours">'+(this.widgetRef.travelDuration.hours?this.widgetRef.travelDuration.hours+"hr":"")+'</span>\n                  <span class="minutes">'+(this.widgetRef.travelDuration.minutes?this.widgetRef.travelDuration.minutes+"min":"")+'</span>\n                </div>\n                <div class="distance">\n                  <span class="distance-km">'+t+"km</span>\n                  </div>").addTo(this.mapRef)},t.prototype.getRoutingDetails=function(e){var t=this;this.widgetRef.http.fetch(e).then(function(e){return e.json()}).then(function(e){if("Ok"===e.code&&0!==e.routes.length){var o=e.routes[0],i=o.geometry.coordinates,n={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}};t.widgetRef.travelDuration=t.convertTime(o.duration),t.widgetRef.travelDuration.distance=(o.distance/1e3).toFixed(1),t.drawRoute(n,t.widgetRef.travelDuration.distance),t.widgetRef.noRootFound=!1,t.widgetRef.errorMsg=void 0}else t.widgetRef.noRootFound=!0,t.widgetRef.errorMsg="Sorry, we could not calculate "+t.widgetRef.travelType+' directions from "'+t.destinationAddress+'" to "'+t.widgetRef.searchString+'"'})},t.prototype.getRoute=function(e){var t="https://api.mapbox.com/directions/v5/mapbox/"+this.widgetRef.travelType+"/"+this.myDestination.lng+","+this.myDestination.lat+";"+e.geometry.coordinates[0]+","+e.geometry.coordinates[1]+"?access_token="+this.providerOptions.apiKey+"&geometries=geojson";this.getRoutingDetails(t)},t.prototype.convertTime=function(e){e=Number(e);var t=a.duration(e,"s");return{hours:Math.floor(t.asHours())>0?""+Math.floor(t.asHours()):"",minutes:t.minutes()>0?""+t.minutes():""}},t.prototype.raiseMarkerEvent=function(){this.eventAggregator.publish("ph:marker",{city:this.city,count:this.count})},t}(i.BaseMapProvider);t.MapBoxProvider=p}),define("v1/map-provider-factory",["require","exports","./google-map-provider","./map-box-provider"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.createProvider=function(e,t,n,a,r,s,l,c,p){return"google"===t?new o.GoogleMapProvider(e,n,a,r,s,l,c,p):"mapbox"===t?new i.MapBoxProvider(e,n,a,r,s,l,c,p):void 0},e}();t.MapProviderFactory=n});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-location-map-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.getDefaultSettings=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.LocationMapService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-location-map",["require","exports","aurelia-framework","ph-common","./ph-location-map-config","./widget-constants","./ph-location-map-service","aurelia-fetch-client","./lazy-map-intersection-observer","aurelia-event-aggregator","./map-provider-factory"],function(e,t,o,i,n,a,r,s,l,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d="ph-location-map-v1",h="ph-pin-info-window",f=window,u=function(e){function t(t,o,i,n,r,s){var c=e.call(this,t,o,d)||this;return c.element=t,c.commonService=o,c.locationMapService=i,c.eventAggregator=n,c.http=r,c.searchFilterValueConverter=s,c.zoomMap=12,c.fullDetails=!1,c.hideOnMultiLoc=!1,c.isErrorMsgReqd=!1,c.provider=a.WidgetConstants.MAP_PROVIDERS.MAPBOX,c.mode=a.WidgetConstants.MAP_LOAD_MODES.JS,c.pinTmplSelector=h,c.clusterRadius=35,c.isPopup=!1,c.hideTitle=!0,c.hideSubTitle=!0,c.dateLineColor="#045572",c.mapboxGeoSearch=!1,c.jobSearchString="",c.noRootFound=!1,c.showAllLocations=!1,c.travelType="driving",c.searchResultMode=!1,c.hideLocationPopup=!1,c.isDestinationSet=!1,c.showSearchResults=!1,c.searchResults=[],c.isGettingDirections=!1,c.showErrorMsg=!1,c.providerOptions={},c.isIEBrowser=!1,c.isUseCluster=!1,c.showMap=!1,c.isChildFocus=!1,c.showTransportDirections=!0,c.showAllJobLocations=!1,c.nearByJobLocationList=[],c.isPopupLoadingForFirstTime=!0,c.enableMapboxDirections=!1,c.initiateIntersection=function(){c.mapData=c.recactorMapData(),c.mapData&&c.mapData.multi_location&&c.mapData.multi_location.length>1&&(c.toggleAllJobsList(),c.showTransportDirections=!1);var e=c.commonService.getSiteSettings("googleMapApiKey"),t=c.commonService.getSiteSettings("maps"),o=c.commonService.getSiteSettings("mapkeyConfig")?c.commonService.getSiteSettings("mapkeyConfig").mapbox:"",i=c.commonService.getSiteSettings("isMapboxcn");i&&t&&t[o]&&(t.mapbox=t[o]);var n=t?t[c.provider]||{}:{};!n.apiKey&&e&&(n.apiKey=e,n.provider=a.WidgetConstants.GLOBAL_VAR_GOOGLE,c.provider=a.WidgetConstants.GLOBAL_VAR_GOOGLE,c.bgType=a.WidgetConstants.DEFAULT_GOOGLE_BG_TYPE),c.providerOptions=n,c.providerOptions.isMapboxcn=i,c.providerOptions.mapConfigKey=o||"",c.providerOptions.platformAssetsBaseUrl=c.commonService.getPlatformAssetsBaseUrl(),c.providerOptions.useClusters=c.isUseCluster,c.providerOptions.zoomMap=c.zoomMap,c.providerOptions.bgType=c.bgType,c.providerOptions.dateLineColor=c.dateLineColor,c.providerOptions.clusterRadius=c.clusterRadius>=35?c.clusterRadius:35;var r=c.commonService.getSiteSettings("mapConfig");if(r&&r.enableDirections&&r.enableDirections.modules&&c.mapData&&c.mapData.multi_location){var s=c.commonService.getPageName(),l=c.commonService.getPageType();r.enableDirections.modules.forEach(function(e){if(e.name==l||e.name==s)return void(c.enableMapboxDirections=!0)})}c.searchArray=c.mapData||[],c.assetUrls?c.initiateMap():c.getAssetUrls().then(function(e){c.assetUrls=JSON.parse(JSON.stringify(e)),c.initiateMap()})},c.lazyMapIntersectionObserver=new l.LazyMapIntersectionObserver(c.commonService),c}return __extends(t,e),t.prototype.attached=function(){if(this.mapData=this.recactorMapData(),void 0==this.mapData||this.mapData&&0===Object.keys(this.mapData).length)this.showMap=!1,this.handleError();else{e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.initiateClickEvent(),this.checkIsClusterEnabled(),this.checkIEBrowser();var t=navigator.userAgent,o=t&&(-1!=t.indexOf("Trident")||-1!=t.indexOf("MSIE"));f.IntersectionObserver&&!o?this.lazyMapIntersectionObserver.observeMap(this.element,this.initiateIntersection):this.initiateIntersection()}},t.prototype.checkIEBrowser=function(){var e="";window.navigator&&(e=window.navigator.userAgent),this.isIEBrowser=e.includes("MSIE")||!!document.documentMode},t.prototype.initiateMap=function(){var e=this;this.providerOptions.assetUrls=this.constructAssetUrls(),setTimeout(function(){e.isPopup||e.loadMap()},100)},t.prototype.created=function(){var e=this;this.eventAggregator.subscribe("ph:mapDataTotalJobs",function(t){e.totalJobs=t.totalJobs})},t.prototype.getAssetUrls=function(){return this.locationMapService.getDefaultSettings(d,n.WidgetConfig.v1.locationmapsettings,{}).then(function(e){if(e&&e.data&&e.data.settings)return e.data.settings})},t.prototype.recactorMapData=function(){if(Array.isArray(this.mapData)){var e=[];return(this.mapData||[]).forEach(function(t){t&&t.latlong&&e.push(t)}),e}return this.mapData},t.prototype.constructAssetUrls=function(){if(this.assetUrls&&Object.keys(this.assetUrls).length){var e,t,o=this.assetUrls,i=this.commonService.getCdnUrl();return e=i+(this.markerImgName?this.markerImgName:o.markerImageUrl&&o.markerImageUrl.url),t=i+(this.clusterImgName?this.clusterImgName:o.clusterImageUrl&&o.clusterImageUrl.url),this.clusterImgWidth=this.clusterImgWidth||o.clusterImageUrl.width,this.clusterImgHeight=this.clusterImgHeight||o.clusterImageUrl.height,this.clusterTextColor=this.clusterTextColor||o.clusterTextColor,this.clusterTextFontSize=this.clusterTextFontSize||o.clusterTextFontSize,this.bgType=this.bgType||o.bgType||a.WidgetConstants.DEFAULT_MAPBOX_BG_TYPE,this.providerOptions.bgType=this.bgType,this.assetUrls={pinAssetUrl:e,clusterAssetUrl:t,styles:[{url:t,width:this.clusterImgWidth,height:this.clusterImgHeight,textColor:this.clusterTextColor,textSize:this.clusterTextFontSize,fontFamily:"inherit"}]}}},t.prototype.mapDataChanged=function(e,t){if(e&&(Object.keys(e).length||Array.isArray(e))&&this.mapDataPromiseResolver)if(Object.keys(e).length&&(e.latitude||e.latLng)){var o=void 0;e.jobSeqNo&&((o=e.multi_location)||(o=e)),this.mapDataPromiseResolver(o),this.loadMap()}else Array.isArray(e)&&e.length&&(this.mapDataPromiseResolver(e),this.loadMap())},t.prototype.resolveMapData=function(){var t=this;return new Promise(function(o,i){if(t.mapDataPromiseResolver=o,!t.mapData)return void e.prototype.hideLoader.call(t);if(t.isUseCluster)t.isUseCluster&&t.mapDataPromiseResolver(t.mapData);else{var n=t.mapData.multi_location;t.mapDataPromiseResolver(n)}e.prototype.hideLoader.call(t)})},t.prototype.checkIsClusterEnabled=function(){this.mapData&&this.mapData.multi_location&&Object.keys(this.mapData.multi_location).length?this.isUseCluster=!1:Array.isArray(this.mapData)&&this.mapData.length&&(this.isUseCluster=!0)},t.prototype.dropdownAccessbility=function(e,t,o,i){var n=this;if(e instanceof HTMLElement||(e=this.element.querySelector(e)),this.element.querySelectorAll(o).length,o.length,e){var a=-1;e.addEventListener("keyup",function(e){switch(e.which){case 40:a<n.element.querySelectorAll(o).length?a++:a=n.element.querySelectorAll(o).length;break;case 38:a>=0?a--:a=0;break;default:return}if(t||(a=0),a<n.element.querySelectorAll(o).length&&!(a<0)){var r=void 0;n.element.querySelectorAll(o).length&&n.element.querySelectorAll(o)[a]&&(r=i?n.element.querySelectorAll(o)[a].querySelector("a"):n.element.querySelectorAll(o)[a]),r&&r.focus()}})}},t.prototype.loadMap=function(){this.mapProvider=p.MapProviderFactory.createProvider(this.element,this.provider,d,"v1",this,this.eventAggregator,this.searchResultMode,this.hideLocationPopup,this.providerOptions),this.mapProvider&&this.mapProvider.loadMap()},t.prototype.openInfoWindow=function(){},t.prototype.markerClickHandler=function(){},t.prototype.getLocalWidgetBundle=function(){return{location:"{{location}}",pinInfoTitle:"{{key}}",pinInfoState:"{{state}}",pinLink:"{{locationUrl}}",pinkLinkText:"View {{count}} opportunities",searchPlaceHolderText:"Search Location",pinInfoAddressLine1:"{{address1}}",pinInfoAddressLine2:"{{address2}}",pinInfoAddressLine3:"{{location}} {{zipCode}}",markerText:"location",clusterText:"cluster have",clusterLocationText:"locations"}},t.prototype.prepareMarkerInfoWindowContent=function(t){var o=this;return t=t||this.mapData,new Promise(function(i,n){e.prototype.applyWidgetBundleToTmpl.call(o,o.pinTmplSelector,t,{}).then(function(e){i(e)})})},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.fetchJobLocations=function(e){this.showLocationDropdown=!0,Array.isArray(this.mapData)&&this.mapData.length&&!e?this.isChildFocus=!1:this.isChildFocus=!0},t.prototype.gotoMarker=function(e){var t=this;this.filterKey=e.key,this.mapProvider.gotoMarker(e),setTimeout(function(){t.showLocationDropdown=!1,t.isChildFocus=!1},250)},t.prototype.resetCluster=function(){var t={};t.trait6=this.filterKey,this.commonService.processTrackingEvent("clear_search_click",void 0,t),this.filterKey=void 0,this.mapProvider.resetCluster(),e.prototype.focusElement.call(this,".ph-a11y-dropdown-box input",100)},t.prototype.blurHandler=function(e,t){var o=this;t?this.showLocationDropdown=!0:(this.blurTimer&&clearTimeout(this.blurTimer),this.blurTimer=setTimeout(function(){o.isChildFocus||(o.showLocationDropdown=!1)},350))},t.prototype.toggleMap=function(){var t=this;if(this.showMap=!0,this.showMap){var o=document.querySelector(".ph-a11y-map-button"),i=this.element.querySelector(".ph-a11y-close-btn");e.prototype.openDialogPopup.call(this,"ph-ally-map-box",o,i,void 0,void 0,!0),this.isPopupLoadingForFirstTime&&(this.isPopupLoadingForFirstTime=!1,setTimeout(function(){t.loadMap()},0))}},t.prototype.closeLocationDialog=function(){e.prototype.closeDialogPopup.call(this),this.showMap=!1},t.prototype.getFieldOptions=function(e){var t=this.element.querySelector(".ph-a11y-dropdown-box input");return t&&t.hasAttribute("aria-activedescendant")&&t.removeAttribute("aria-activedescendant"),this.mapData&&(this.mapData=this.searchArray.reduce(function(e,t){return t.key&&e.push(t),e},[]),this.mapData=this.searchFilterValueConverter.toView(this.mapData,this.filterKey,"key")),this.mapData.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}),this.filterKey&&this.filterKey.length||this.resetCluster(),this.mapData},t.prototype.setFieldValue=function(e,t){if(this.mapData.length&&this.mapData[t]){this.filterKey=this.mapData[t].key;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}},t.prototype.getActiveIndex=function(e){var t=this;return this.mapData.findIndex(function(e){return e.key==t.filterKey})},t.prototype.clearFieldValue=function(e){},t.prototype.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},t.prototype.detached=function(){},t.prototype.getLocationSearchResults=function(e){var t=this;if(this.searchString&&this.searchString.length>0){this.eventListner=!1,this.isGettingDirections=!1,this.travelDuration=void 0;var o=encodeURI(this.searchString),i="https://api.mapbox.com/geocoding/v5/mapbox.places/"+o+".json?access_token="+this.providerOptions.apiKey;this.http.fetch(i).then(function(e){return e.json()}).then(function(e){e.features.length>0?(t.searchResults=e.features,t.showSearchResults=!0):t.showSearchResults=!1})}else this.showSearchResults=!1},t.prototype.clearSearch=function(){this.searchString="",this.showSearchResults=!1,this.noRootFound=!1},t.prototype.getNearByJobs=function(e){if(e||!0!==this.showAllLocations){var t=this.jobSearchString.toLowerCase().trim()||"";""===t&&(this.nearByJobLocationList=this.mapData.multi_location),this.nearByJobLocationList=this.mapData.multi_location.filter(function(e){if(e.cityStateCountry)return e.cityStateCountry.toLowerCase().includes(t)})}else this.showAllLocations=!1},t.prototype.clickNearByJobs=function(){this.showAllLocations=!this.showAllLocations,this.showAllLocations?this.getNearByJobs():this.nearByJobLocationList=[]},t.prototype.setDestination=function(e,t){if(this.isDestinationSet=!0,this.mapProvider.setDestination(e,!0),this.toggleAllJobsList(),t)var o=t.target.closest(".phs-location-overview-map-area"),i=setTimeout(function(){var e=o.querySelector(".transport-button.driving");e&&e.focus(),t&&t.stopPropagation(),clearTimeout(i)})},t.prototype.backToAllLocation=function(e){if(this.nearByJobLocationList=this.mapData.multi_location,this.showAllJobLocations=!1,this.jobSearchString="",this.searchString="",this.noRootFound=!1,this.toggleAllJobsList(),e&&e.target){var t=e.target.closest(".phs-location-overview-map-area");if(t)var o=setTimeout(function(){var e=t.querySelector(".inputArea input");e&&e.focus(),clearTimeout(o)},100)}},t.prototype.toggleAllJobsList=function(){this.showTransportDirections=!this.showTransportDirections,this.showAllJobLocations=!this.showAllJobLocations},t.prototype.getDirection=function(e){this.isGettingDirections=!0,this.showSearchResults=!1,this.searchLocObject=e,this.searchString=e.place_name,this.getRouteInfo(this.travelType)},t.prototype.getRouteInfo=function(e){e=["walking","cycling","driving"].includes(e)?e:"driving",this.travelDuration=void 0,this.travelType=e,this.searchLocObject&&this.mapProvider.getRoute(this.searchLocObject,this.travelType)},t.prototype.fetchPlaces=function(e){this.mapProvider.fetchPlaces&&this.mapProvider.fetchPlaces(e)},t.prototype.initiateClickEvent=function(){var e=this;document.addEventListener("click",function(t){t.target.closest(".inputArea")||(e.showAllLocations=!1,e.nearByJobLocationList=[])})},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObject",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"zoomMap",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"fullDetails",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"hideOnMultiLoc",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"provider",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"mapData",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"pinTmplSelector",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"assetUrls",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"filteredMarker",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"bgType",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"markerImgName",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clusterImgName",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"clusterImgWidth",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"clusterImgHeight",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clusterTextColor",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clusterTextFontSize",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"clusterRadius",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"dateLineColor",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"mapboxGeoSearch",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"searchString",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"jobSearchString",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"noRootFound",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"errorMsg",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showAllLocations",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"travelDuration",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"travelType",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"searchResultMode",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"hideLocationPopup",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"nearByJobLocationList",void 0),t=__decorate([o.customElement(d),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==i.CommonService&&i.CommonService)&&u||Object,r.LocationMapService,c.EventAggregator,s.HttpClient,"function"==typeof(g=void 0!==i.SearchFilterValueConverter&&i.SearchFilterValueConverter)&&g||Object])],t);var u,g}(i.PhenomWidget);t.LocationMap=u}),define("text!v1/ph-location-map.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-location-map-v1/default/view.html",["module"],function(e){e.exports='<template>\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="phs-location-map-area ph-widget-box" if.bind="!showLoader">\n        <div class="overview-cntr" if.bind="mapData.length">\n            <div class="hide" style="display:none;" id="ph-pin-info-window" class="ph-pin-info-window">\n                <div class="info-details">\n                    <h5 tkey="pinInfoTitle" tkeys="1" class="infoTitle">\n                        View {{location}} has {{count}} opportunities\n                    </h5>\n                    <div tkey="pinInfoState" tkeys="1" class="infoState">\n\n                    </div>\n                </div>\n                <div class="job-link">\n                    <a tkey-href="pinLink" tkey="pinkLinkText" tkeys="1" class="phs-location-link">\n                    </a>\n                    <i class="icon icon-arrow-right"></i>\n                </div>\n            </div>\n            <div>\n                <input focus.trigger="fetchJobLocations()" blur.trigger="blurHandler($event)" title="locationPlaceholderText" key-title="locationsearchboxtitle"\n                    placeholder.bind="widgetBundle[\'searchPlaceHolderText\'] | pht">\n                <a href="javascript:void(0)" click.delegate="resetCluster()" show.bind="filterKey">\n                    a\n                    <i class="icon icon-cancel">close</i>\n                </a>\n                <ul show.bind="showLocationDropdown" class="on-focus">\n                    <li repeat.for="loc of mapData|searchFilter:filterKey:\'key\'">\n                        <a style="cursor: pointer;" click.delegate="gotoMarker(loc)" blur.trigger="blurHandler($event, true)">\n                            <div class="icon-block">\n\n                                <i class="icon icon-map-pin"></i>\n                            </div>\n                            <div class="location-data">\n                                ${loc.key}\n                            </div>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div class="map-cntr" if.bind="mapData.multi_location">\n            <div class="hide" style="display:none;" id="ph-pin-info-window">\n                <div tkey="location" tkeys="1"> ${location}</div>\n            </div>\n        </div>\n        <div class="no-data-view" show.bind="showErrorMsg">\n            <p tabindex="0" class="no-locations">\n                <ppc-content>\n                    No locations found\n                </ppc-content>\n            </p>\n        </div>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/base-step-provider",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},i=function(){function e(e,t,i,n,a,r){var s=this;this.destroy=function(){},this.handleActionOutsideScope=function(e){var t,i=e.target,n=!1;if(e.keyCode===o.RETURN||e.keyCode==o.TAB||void 0==e.keyCode)for(;i;)if(i=i.parentElement,!(t=i&&i.className)||t.constructor!=Array&&t.constructor!=String)i||(n=!0);else if(null==i||-1==t.indexOf("ph-combobox-dropdown-area"))n=!0;else if(t.indexOf("ph-combobox-dropdown-area")>=0){n=!1;break}if(n||e.keyCode==o.ESC){var a=s.element.querySelector(".search-dropdown-list");a&&(a.scrollTop=0),s.handleBlur()}},this.handleKeyup=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case o.UP:case o.DOWN:case o.RETURN:case o.ESC:return void e.preventDefault();case o.BACKSPACE:if(!t.value)return void s.onBackspace()}s.handleStepKeyup(t)}},this.handleKeydown=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case o.DOWN:s.moveDown(t);break;case o.UP:s.moveUp(t);break;case o.RETURN:return void s.onEnter(t)}s.handleStepKeydown()}},this.element=e,this.widgetRef=n,this.stepConfig=a,this.elementTag=t,this.version=i,this.a11yAutoComplete=r}return e.prototype.makeDdoRequest=function(e,t,o){return this.widgetRef.makeDdoRequest(e,t,o)},e.prototype.handleFyfActions=function(e,t){this.widgetRef.handleFyfActions(e,t)},e.prototype.fetchAutoCompleteInput=function(e){var t=this;setTimeout(function(){var o=t.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(o)for(var i=0;i<o.length;i++)o[i];t.inputField=t.element.querySelector("[data-ph-autocomplete-input]"),t.inputField&&t.setupEventListeners(t.inputField),e&&e()},300)},e.prototype.setupEventListeners=function(e){},e.prototype.focusToStepBlock=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".ph-common-slection-area");t&&(t.scrollTop=t.scrollHeight);var o=e.element.querySelector(".ph-a11y-fyf-step-block");if(o)return o.focus(),o.setActive&&o.setActive(),document.activeElement===o},500)},e.prototype.focusSearch=function(){var e=this;this.widgetRef.showFocus=!0,setTimeout(function(){e.inputField&&e.inputField.focus()},150)},e.prototype.addSelectionRemovalSronly=function(e){var t=this;this.widgetRef.selectionRemovalSrText=e,this.widgetRef.selectionRemovalSronly=!0,setTimeout(function(){t.widgetRef.selectionRemovalSronly=!1},100)},e}();t.BaseStepProvider=i}),define("v1/ph-find-your-fit-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyStepConfig:"fyfConfig",ddokeyStepPosition:"",ddoKeyProfileData:"mergedProfileV2",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyFreshProfileCreation:"uploadCvMergeFlow",ddoKeyCategories:"categories",ddoKeyMasterDataV2:"categoryMasterDataV2",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyworkExperience:"",ddoKeyLocations:"fyfLocations",ddoKeyPreferredLocations:"ddoKeyPreferredLocations",ddoKeyContactInfo:"ddoKeyContactInfo",ddoKeySubCategories:"subCategories",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig"}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),
t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-authorise",["require","exports","./base-step-provider"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.focusToStepBlock.call(this)},t.prototype.handlePrevStep=function(){this.widgetRef.fyfStepConfig.prevStepRef("firstStep")},t}(o.BaseStepProvider);t.FyfStepAuthorise=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-category",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.categories||[]));this.widgetRef.fyfStepConfig.categories={},this.widgetRef.fyfStepConfig.categories.selectedCategories=[],this.widgetRef.fyfStepConfig.categories.selectedCategories=e,this.getCategories()},t.prototype.getCategoryMasterData=function(t){var o=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyMasterDataV2,{}).then(function(i){i=i.data||{},o.widgetRef.stepData=o.widgetRef.stepData||{},o.widgetRef.stepData.categories=o.mergeMasterCatWithSearchCat(i,t),o.widgetRef.stepData.categories.length?o.widgetRef.noCategories=!1:o.widgetRef.fyfStepConfig.showEmptyCategories?o.widgetRef.noCategories=!0:"next"==o.widgetRef.handleEmptyCatFlow?o.widgetRef.fyfStepConfig.funRef(!1):o.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(o),o.widgetRef.hideLoader()})},t.prototype.getCategories=function(){var e=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyCategories,{}).then(function(t){t&&t.data&&t.data.category&&(e.getCategoryMasterData(t.data.category),e.widgetRef.hideLoader())})},t.prototype.mergeMasterCatWithSearchCat=function(e,t){var o=[],i=[],n=[],a=[];if(this.widgetRef.fyfStepConfig.orderType&&"default"!=this.widgetRef.fyfStepConfig.orderType?"custom"==this.widgetRef.fyfStepConfig.orderType&&(o=e.categories||[],i=t):(o=t,i=e.categories||[]),o.length){var r=void 0,s=void 0,l=void 0,c=void 0,p=void 0;for(s=0;s<o.length;s++)n.push(o[s].internalId);for(l=0;l<i.length;l++)a.push(i[l].internalId);for(c=0;c<n.length;c++)if(o[c].isRemoveEle=!0,-1!=(r=a.indexOf(n[c]))){o[c].isRemoveEle=!1,p=i[r];for(var d in p)(void 0==o[c][d]&&p.hasOwnProperty(d)||p.hasOwnProperty(d)&&!o[c].hasOwnProperty(d))&&(o[c][d]=p[d])}o.length&&o.forEach(function(e){e.key||(e.key=e.category)})}return o||[]},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.categories.selectedCategories||[],o=this.widgetRef.fyfStepConfig.profileData.categories||[];if(t.length){if(t.length==o.length){for(var i=0;i<t.length;i++)!function(i){var n=t[i];-1==o.findIndex(function(e){return e==n})&&(e=!0)}(i);t=e?t:"unChanged"}}else t=!1,o&&o.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.categories.selectedCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(o.BaseStepProvider);t.FyfStepCategory=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-contactInfo-v1",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.name={},this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,o=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&o.length>6&&o.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(o){o.optional||o.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=this.nameFieldValidation(),t=this.emailFieldValidation(),o=this.phoneFieldValidation(),i=!1;if(i=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||o),i&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var n=!1;this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),n=!0):this.widgetRef.stepData.email.error&&!n?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),n=!0):this.widgetRef.stepData.phone.error&&!n&&this.widgetRef.focusElement(".ph-a11y-form-control-phone",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(o.BaseStepProvider);t.FyfStepContactInfoV1=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-contactInfo",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.acceptTerms=!1,this.widgetRef.termsError=!1,this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.name={},this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,o=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&o.length>6&&o.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(o){o.optional||o.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=this.nameFieldValidation(),t=this.emailFieldValidation(),o=this.phoneFieldValidation(),i=!1;if(i=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||o),i&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var n=!1;this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),n=!0):this.widgetRef.stepData.email.error&&!n?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),n=!0):this.widgetRef.stepData.phone.error&&!n?this.widgetRef.focusElement(".ph-a11y-form-control-phone",50):this.widgetRef.termsError&&this.widgetRef.focusElement(".ph-a11y-terms-check-box",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(o.BaseStepProvider);t.FyfStepContactInfo=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-location",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var o=e&&e.target&&e.target.value;t.widgetRef.stepData.locations&&t.widgetRef.stepData.locations.length&&o&&(t.widgetRef.stepData.showLocationDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var o=e.value;o&&o.length?t.fetchData():t.widgetRef.stepData.showLocationDropdown=!1},t.handleStepKeydown=function(e){},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.preferredLocation||[]));this.widgetRef.fyfStepConfig.preferredLocation=t,this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.locations=[],this.widgetRef.showFocus=!1,this.constructSelectedLocationListOnInit(),e.prototype.fetchAutoCompleteInput.call(this),e.prototype.focusToStepBlock.call(this)},t.prototype.constructSelectedLocationListOnInit=function(){var e=this;this.widgetRef.fyfStepConfig.selectedLocation=[],this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(t){e.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display)})},t.prototype.handleBlur=function(){this.widgetRef.stepData.showLocationDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){var t=this;this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var o=this.widgetRef.stepData.locations||[];if(this.widgetRef.stepData.showLocationDropdown&&o.length){var i=!1;this.widgetRef.fyfStepConfig.preferredLocation.length&&this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(e,n){e.location_display==o[t.widgetRef.stepData.activeIndex].location_display&&(i=!0)}),i||this.populateSelectedData(o[this.widgetRef.stepData.activeIndex])}},t.prototype.autoFillValue=function(){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var e=this.widgetRef.stepData.locations||[];e.length&&this.widgetRef.stepData.showLocationDropdown&&this.widgetRef.fyfStepConfig.preferredLocation.length&&(this.widgetRef.fyfStepConfig.preferredLocationValue=e[this.widgetRef.stepData.activeIndex].location_display)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.preferredLocationValue||"";if(t.length){var o=this.widgetRef.fyfStepConfig.locationKey||"",n=o.split(","),a={};return a.keywords=t,a.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyLocations,a).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.locations=[],t.data.results.forEach(function(t,o){n.find(function(e){return e.trim()==t.type})&&e.widgetRef.stepData.locations.push(t)})):e.widgetRef.stepData.locations=[],e.widgetRef.stepData.showLocationDropdown=!0,e.widgetRef.stepData.locations})}},t.prototype.populateSelectedData=function(t){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var o={};-1==(this.widgetRef.fyfStepConfig.selectedLocation||[]).indexOf(t.location_display)&&(o.standardlocation=t.standardlocation||"",o.location_display=t.location_display||"",o.latlong=t.latlong||{},this.widgetRef.fyfStepConfig.preferredLocation.push(o),this.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display),t.isLocationSelected=!0,this.widgetRef.fyfStepConfig.preferredLocationValue=""),this.widgetRef.stepData.showLocationDropdown=!1;var i=t.location_display+" location selected";e.prototype.addSelectionRemovalSronly.call(this,i),this.focusSearch()},t.prototype.clearSearch=function(){var e={};e.trait6=this.widgetRef.fyfStepConfig.preferredLocationValue,this.widgetRef.trackWidgetClick("clear_text_click",e),this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.showLocationDropdown=!1,this.focusSearch()},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.preferredLocationValue||this.clearSearch()},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||[],t=this.widgetRef.fyfStepConfig.profileData.preferredLocation||[],o=!1;if(e.length){if(e.length==t.length){for(var i=0;i<e.length;i++)!function(i){var n=e[i].location_display;-1==t.findIndex(function(e){return e.location_display==n})&&(o=!0)}(i);e=o?e:"unChanged"}}else e=!1,t&&t.length>0&&(e=[]);this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.removeSelectedData=function(t){var o=this,i=this.widgetRef.stepData.locations.findIndex(function(e){return e.location_display==o.widgetRef.fyfStepConfig.selectedLocation[t]}),n=this.widgetRef.fyfStepConfig.selectedLocation[t]+" location removed";e.prototype.addSelectionRemovalSronly.call(this,n),this.widgetRef.fyfStepConfig.preferredLocation.splice(t,1),this.widgetRef.fyfStepConfig.selectedLocation.splice(t,1),-1!=i&&(this.widgetRef.stepData.locations[i].isLocationSelected=!1)},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(o.BaseStepProvider);t.FyfStepLocation=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-recentTitle",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="clear_text_click",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var o=e&&e.target&&e.target.value;t.widgetRef.stepData.recentTitles&&t.widgetRef.stepData.recentTitles.length&&o&&(t.widgetRef.stepData.showRecentTitleDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var o=e.value;o&&o.length?t.fetchData():t.widgetRef.stepData.showRecentTitleDropdown=!1},t.handleStepKeydown=function(e){},t.clearSearch=function(e){var o={};o.trait6=t.widgetRef.fyfStepConfig.recentTitle.value,t.widgetRef.stepData.recentTitles=[],t.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",t.widgetRef.stepData.showRecentTitleDropdown=!1,t.widgetRef.fyfStepConfig.typed_recentTitle=[],t.widgetRef.fyfStepConfig.selected_recentTitle=[],e||(t.widgetRef.trackWidgetClick(n,o),t.focusSearch()),setTimeout(function(){t.widgetRef.fyfStepConfig.recentTitle.value=""},150)},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.fyfStepConfig.recentTitle=this.widgetRef.fyfStepConfig.recentTitle||{},this.widgetRef.stepData.recentTitles=[],this.widgetRef.fyfStepConfig.recentTitle.flag=1==this.widgetRef.fyfStepConfig.profileData.relevantExperience,this.widgetRef.fyfStepConfig.recentTitle.flag?(this.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",this.widgetRef.fyfStepConfig.recentTitle.value=""):(this.widgetRef.fyfStepConfig.recentTitle.value=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.value&&(this.widgetRef.fyfStepConfig.isClickOption=!0)),e.prototype.focusToStepBlock.call(this),e.prototype.fetchAutoCompleteInput.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t={};t.title=this.widgetRef.fyfStepConfig.recentTitle.value||"",t.title.length&&this.populateSelectedData(t)}},t.prototype.populateSelectedData=function(e,t){this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=e.title,this.widgetRef.fyfStepConfig.recentTitle.value=e.title,this.widgetRef.stepData.showRecentTitleDropdown=!1,this.focusSearch()},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.recentTitles;this.widgetRef.stepData.showRecentTitleDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.recentTitle.value=e[this.widgetRef.stepData.activeIndex].title)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.recentTitle.value;if(t.length){var o={};return o.keywords=t,o.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyRecentTitles,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.recentTitles=t.data.results):e.widgetRef.stepData.recentTitles=[],e.widgetRef.stepData.showRecentTitleDropdown=!0,e.widgetRef.stepData.recentTitles},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.recentTitle.value||this.clearSearch()},t.prototype.hideDropDown=function(){var e=this;return setTimeout(function(){e.widgetRef.stepData.showRecentTitleDropdown=!1},150),!0},t.prototype.disableJobTitle=function(){this.widgetRef.fyfStepConfig.recentTitle.flag&&this.clearSearch(!0)},t.prototype.handleActions=function(){var e="false";this.widgetRef.fyfStepConfig.recentTitle.flag?e="true":!this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")||this.widgetRef.fyfStepConfig.profileData.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag&&this.widgetRef._tempProfileData.profile.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag?this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")&&this.widgetRef.fyfStepConfig.profileData.relevantExperience!=this.widgetRef.fyfStepConfig.recentTitle.flag||(e=this.widgetRef.fyfStepConfig.recentTitle.value?"false":""):e="false";var t=this.widgetRef.fyfStepConfig.recentTitle.value||this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",o=this.widgetRef.fyfStepConfig.profileData.recentTitle||"";if(t?t==o&&(!this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.selectedTitle.length?(t="",e="false"):t="unChanged"):(t=!1,o&&o.length&&(t="",this.widgetRef.fyfStepConfig.profileData.recentTitle="","true"==e||(e="false"))),this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.value!=this.widgetRef.fyfStepConfig.profileData.recentTitle&&!this.widgetRef.fyfStepConfig.selected_recentTitle.length||this.widgetRef.fyfStepConfig.selected_recentTitle.length&&this.widgetRef.fyfStepConfig.selected_recentTitle[0]!=this.widgetRef.fyfStepConfig.recentTitle.value){var i=this.widgetRef.fyfStepConfig.recentTitle.value,n=!1;if(this.widgetRef.stepData.recentTitles.length)for(var a=this.widgetRef.stepData.recentTitles,r=0,s=a;r<s.length;r++){var l=s[r];l.title.toLowerCase()===i.toLowerCase()&&(this.widgetRef.fyfStepConfig.selected_recentTitle=[i],this.widgetRef.fyfStepConfig.typed_recentTitle=[],n=!0)}n||(this.widgetRef.fyfStepConfig.typed_recentTitle=[i],this.widgetRef.fyfStepConfig.selected_recentTitle=[])}this.handleFyfActions(t,e),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",t=this.widgetRef.fyfStepConfig.recentTitle.flag?"true":"false";this.widgetRef.fyfStepConfig.prevStepRef(e,t),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(o.BaseStepProvider);t.FyfStepRecentTitle=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-skills",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="clear_text_click",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var o=e&&e.target&&e.target.value;t.widgetRef.stepData.skills&&t.widgetRef.stepData.skills.length&&o&&(t.widgetRef.stepData.showSkillsDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var o=e.value;o&&o.length?t.fetchData():t.widgetRef.stepData.showSkillsDropdown=!1},t.handleInputFieldLength=function(){var e=t.widgetRef.fyfStepConfig.skills&&t.widgetRef.fyfStepConfig.skills.value||"",o=t.widgetRef.widgetBundle.fyfSkillsPlaceHolderText||"";t.inputField&&(t.inputField.style.width=10*((e.length||o.length)+1)+"px")},t.handleStepKeydown=function(e){},t.clearSearch=function(){var e={};e.trait6=t.widgetRef.fyfStepConfig.skills.value,t.widgetRef.trackWidgetClick(n,e),
t.widgetRef.stepData.showSkillsDropdown=!1,t.widgetRef.fyfStepConfig.skills.value="",t.focusSearch()},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.skills||[]));this.widgetRef.fyfStepConfig.skills={},this.widgetRef.stepData.skills=[],this.widgetRef.stepData.suggestedSkills=[],this.widgetRef.fyfStepConfig.skills.selectedSkill=t,this.widgetRef.fyfStepConfig.typed_skills=this.widgetRef.fyfStepConfig.profileData.typed_skills||[],this.widgetRef.fyfStepConfig.selected_skills=this.widgetRef.fyfStepConfig.profileData.selected_skills||[],this.widgetRef.showFocus=!1,this.fetchSuggestedSkills(),e.prototype.fetchAutoCompleteInput.call(this,this.handleInputFieldLength),e.prototype.focusToStepBlock.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showSkillsDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var o=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,o),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t={};t.skill=this.widgetRef.fyfStepConfig.skills.value||"",t.skill.length&&this.populateSelectedData(t,"onEnter")}},t.prototype.populateSelectedData=function(e,t){-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(e.skill)&&(this.widgetRef.fyfStepConfig.skills.selectedSkill.push(e.skill),this.widgetRef.fyfStepConfig.skills.value="","onEnter"==t&&this.widgetRef.fyfStepConfig.typed_skills.push(e.skill)),e.isSkillSelected=!0,this.handleInputFieldLength(),this.focusSearch(),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.skills||[];this.widgetRef.stepData.showSkillsDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.skills.value=e[this.widgetRef.stepData.activeIndex].skill)},t.prototype.fetchSuggestedSkills=function(){var e=this,t={},o=this.widgetRef.fyfStepConfig.profileData.recentTitle;o=o?[o]:[],t.titles=o,t.categories=this.widgetRef.fyfStepConfig.profileData.categories||[],t.skills=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],t.size=parseInt(this.widgetRef.fyfStepConfig.suggestedSkillSize)||7,this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.suggestedSkills=t.data.results)})},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.skills.value||"";if(t.length){var o={},n=this.widgetRef.fyfStepConfig.skills.selectedSkill;return o.keywords=t,o.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,o.addedSkills=n.length?n:[],this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeySkills,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.skills=t.data.results):e.widgetRef.stepData.skills=[],e.widgetRef.stepData.showSkillsDropdown=!0,e.widgetRef.stepData.skills},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.skills.value||this.clearSearch()},t.prototype.handleActions=function(){if(this.widgetRef.fyfStepConfig.skills.value){var e=this.widgetRef.fyfStepConfig.skills.value;if(this.widgetRef.stepData.skills&&this.widgetRef.stepData.skills.length)for(var t=this.widgetRef.stepData.skills,o=0,i=t;o<i.length;o++){var n=i[o];n.skill.toLowerCase()===e.toLowerCase()&&this.widgetRef.fyfStepConfig.selected_skills.push(e)}this.widgetRef.fyfStepConfig.typed_skills.push(e),this.widgetRef.fyfStepConfig.skills.selectedSkill.push(this.widgetRef.fyfStepConfig.skills.value)}var a=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],r=this.widgetRef.fyfStepConfig.profileData.skills||[],s=!1;if(a.length)if(a.length==r.length){for(var l=0;l<a.length;l++)!function(e){var t=a[e];-1==r.findIndex(function(e){return e==t})&&(s=!0)}(l);a=s?a:"unChanged"}else a.length&&(a=Array.from(new Set(a)));else a=!1,r&&r.length>0&&(a=[]);this.handleFyfActions(a),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.skills.selectedSkill||"";this.widgetRef.fyfStepConfig.prevStepRef(e),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.selectSuggestions=function(t,o){var i=this;if(this.widgetRef.fyfStepConfig.skills.selectedSkill=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(t)){this.widgetRef.fyfStepConfig.skills.selectedSkill.push(t),this.widgetRef.fyfStepConfig.selected_skills.push(t),this.widgetRef.stepData.suggestedSkills.splice(o,1);var n=this.element.querySelector(".ph-common-slection-area"),a=this.element.querySelector("[data-ph-autocomplete-input]"),r=t+" skill selected";e.prototype.addSelectionRemovalSronly.call(this,r),setTimeout(function(){a&&(a.focus(),i.widgetRef.fyfStepConfig.skills.value=""),n&&(n.scrollTop=n.scrollHeight)},150)}},t.prototype.removeSelectedData=function(t){var o=this,i=this.widgetRef.stepData.skills.findIndex(function(e){return e.skill==o.widgetRef.fyfStepConfig.skills.selectedSkill[t]}),n=this.widgetRef.fyfStepConfig.skills.selectedSkill[t]+" skill removed";if(e.prototype.addSelectionRemovalSronly.call(this,n),this.focusSearch(),setTimeout(function(){o.widgetRef.fyfStepConfig.skills.selectedSkill.splice(t,1)},200),-1!=i&&(this.widgetRef.stepData.skills[i].isSkillSelected=!1),this.widgetRef.fyfStepConfig.selected_skills&&this.widgetRef.fyfStepConfig.selected_skills.length){var a=this.widgetRef.fyfStepConfig.selected_skills.findIndex(function(e){return e==o.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=a&&this.widgetRef.fyfStepConfig.selected_skills.splice(a,1)}if(this.widgetRef.fyfStepConfig.typed_skills&&this.widgetRef.fyfStepConfig.typed_skills.length){var a=this.widgetRef.fyfStepConfig.typed_skills.findIndex(function(e){return e==o.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=a&&this.widgetRef.fyfStepConfig.typed_skills.splice(a,1)}},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(o.BaseStepProvider);t.FyfStepSkills=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-workExperience",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.workExperience={data:{results:[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}]}},t}return __extends(t,e),t.prototype.init=function(){var t=this;this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.workExperience=this.workExperience.data.results,this.widgetRef.fyfStepConfig.workExperience={},this.widgetRef.fyfStepConfig.profileData.workExperience=this.widgetRef.fyfStepConfig.profileData.workExperience||{},this.widgetRef.fyfStepConfig.workExperience.selectedExp=this.workExperience.data.results.find(function(e){return e.displayName==(t.widgetRef.fyfStepConfig.profileData.workExperience.displayName||"")}),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchWorkExperience=function(){var e=this;this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeyworkExperience,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.workExperience=t.data)})},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||{},t=this.widgetRef.fyfStepConfig.profileData.workExperience||{};Object.keys(e).length?e.displayName==t.displayName&&(e="unChanged"):(e=!1,t&&t.displayName&&(e={},this.widgetRef.fyfStepConfig.profileData.workExperience={})),this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(o.BaseStepProvider);t.FyfStepWorkExperience=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();define("v1/fyf-step-subCategory",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.subCategories||[]));this.widgetRef.fyfStepConfig.subCategories={},this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=[],this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=e,this.getSubCategories()},t.prototype.setSubCategories=function(t){this.widgetRef.unhideLoader(),this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.subCategories=this.refineSubCategories(t),this.widgetRef.stepData.subCategories.length?this.widgetRef.noSubCategories=!1:this.widgetRef.fyfStepConfig.showEmptySubCategories?this.widgetRef.noSubCategories=!0:"next"==this.widgetRef.handleEmptyCatFlow?this.widgetRef.fyfStepConfig.funRef(!1):this.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(this),this.widgetRef.hideLoader()},t.prototype.refineSubCategories=function(e){return e.filter(function(e){return e.subCategory&&e.subCategory.length})},t.prototype.getSubCategories=function(){var e=this;this.widgetRef.unhideLoader();var t={field:"subCategory"};this.makeDdoRequest(this.elementTag,i.WidgetConfig[this.version].ddoKeySubCategories,t).then(function(t){t&&t.data&&t.data.subCategory&&(e.setSubCategories(t.data.subCategory),e.widgetRef.hideLoader())})},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||[],o=this.widgetRef.fyfStepConfig.profileData.subCategories||[];if(t.length){if(t.length==o.length){for(var i=0;i<t.length;i++)!function(i){var n=t[i];-1==o.findIndex(function(e){return e==n})&&(e=!0)}(i);t=e?t:"unChanged"}}else t=!1,o&&o.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(o.BaseStepProvider);t.FyfStepSubCategory=n}),define("v1/fyf-step-provider-factory",["require","exports","./fyf-step-category","./fyf-step-recentTitle","./fyf-step-skills","./fyf-step-workExperience","./fyf-step-location","./fyf-step-contactInfo","./fyf-step-authorise","./fyf-step-contactInfo-v1","./fyf-step-subCategory"],function(e,t,o,i,n,a,r,s,l,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(){}return e.createProvider=function(e,t,d,h,f,u){return"authorise"===t?new l.FyfStepAuthorise(e,d,h,f,t):"categories"===t?new o.FyfStepCategory(e,d,h,f,t):"recentTitle"===t?new i.FyfStepRecentTitle(e,d,h,f,t,u):"skills"===t?new n.FyfStepSkills(e,d,h,f,t,u):"workExperience"===t?new a.FyfStepWorkExperience(e,d,h,f,t):"preferredLocation"===t?new r.FyfStepLocation(e,d,h,f,t,u):"contactInfo"===t?new s.FyfStepContactInfo(e,d,h,f,t):"contactInfoWithSocialOptions"===t?new c.FyfStepContactInfoV1(e,d,h,f,t):"subCategories"===t?new p.FyfStepSubCategory(e,d,h,f,t):void 0},e}();t.FyfStepProvideFactory=d}),define("v1/ph-find-your-fit-data",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.profileData={profile:{categories:[],recentTitle:"",skills:[],workExperience:{displayName:"",min:"",max:""},preferedLocation:[],firstName:"",email:"",phone:""},editType:"mergeProfile"}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.FindYourFitService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-config","./ph-find-your-fit-service","./ph-find-your-fit-data","./fyf-step-provider-factory","aurelia-event-aggregator"],function(e,t,o,i,n,a,r,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-find-your-fit-v1",p="next_click",d="previous_click",h="registration_submit",f={find_your_fit_flow:"find_your_fit"},u="suggestions",g=function(e){function t(t,o,i,n,a,s){var l=e.call(this,t,o,c)||this;return l.element=t,l.commonService=o,l.findYourFitService=i,l.eventAggregator=n,l.a11yAutoComplete=a,l.localStorage=s,l.isLoggedIn=!1,l.isUserSocialLoggedIn=!1,l.isAnonymousUser=!1,l.isActiveSession=!1,l.stepsData=[],l._tempStepData=[],l.profileData=r.profileData,l._tempProfileData={},l.stepPosition=0,l.currentStep=0,l.fyfStatus=!1,l.isLastStep=!1,l.isFirstStepClick=!1,l.stepStatus=0,l.showOnRevelantExp=!0,l.isProfileSaveFails=!1,l.isShiftKey=!1,l.isTabKey=!1,l.stepLandingInfo={},l.fyfProvider={},l.nonEditableFields={},l.isErrorMsgReqd=!1,l.fyfInfo={},l.showErrorMsg=!1,l.isProfileJobsAvailable=!1,l.profileRecomDataObj=!0,l.userActions=!1,l.isSiteLogin=!1,l.recentStepType="",l.fyfSocialOptions=[],l.isClickOption=!1,l.fyfSteps={},l.ProfileSaveFailsMsg=!1,l.handleEmptyCatFlow="next",l.noCategories=!1,l.disableSocialLogin=!1,l.disableContactInfo=!1,l.disableUploadResumeFlow=!1,l.trackingLocally=!0,l.subscriptions=[],l.contactInfoV1Enabled=!1,l.resultUpdated=!1,l.isCandidateHomeEnabled=!0,l.selectionRemovalSrText="",l.selectionRemovalSronly=!1,l.gdprConsent=!1,l.acceptTerms=!1,l.termsError=!1,l.piiConsentError=!1,l.piiConsentContext={},l.consentPrefill=!0,l.prevStep=function(t,o){var i={stepName:l.fyfStepConfig.stepType};if(e.prototype.trackWidgetClick.call(l,d,i),l.handleStepDestory(),l.recentStepType="",l.handleEmptyCatFlow="prev",0==l.currentStep){var n=l.profileData&&l.profileData.profile&&l.profileData.profile.flowType||l.userActions||l.isUserSocialLoggedIn?"Edit":"Start";l.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow,isFirstStep:n}),l.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow,isFirstStep:n})}else e.prototype.unhideLoader.call(l),t&&t.hasOwnProperty("email")&&!l.isProfileSaveFails?(l.profileData.profile.firstName=t.firstName,l.profileData.profile.email=t.email,l.profileData.profile.phone=t.phone):t&&(l.profileData.profile[l.fyfStepConfig.stepType]=t),o&&"true"==o?l.profileData.profile.relevantExperience=!0:o&&"false"==o&&(l.profileData.profile.relevantExperience=!1),l.currentStep>0&&(l.currentStep--,l.stepStatus--,l.handleNestedView()),l.hideLoader()},l.handleFyfActions=function(t,o){e.prototype.unhideLoader.call(l),l.handleStepDestory(),l.handleEmptyCatFlow="next",l.recentStepType="",l.piiConsentError=!1,l.isLastStep=l.currentStep==l.stepsData.length-1;var i=l.fyfStepConfig.stepType;"recentTitle"==i&&l.isLastStep&&"false"==o&&"workExperience"==l._tempStepData[l._tempStepData.length-1].stepType&&(l.isLastStep=!1);var n={stepName:l.fyfStepConfig.stepType},a={};if(a.editType="mergeProfile",a.profile={},!t&&(!l.isLastStep||l.isLastStep&&"contactInfo"!=i)&&(!o||"noSelection"==o)&&(!t&&!o||!l.ProfileSaveFailsMsg))return e.prototype.trackWidgetClick.call(l,p,n),l.isLastStep&&"contactInfo"!=i?(l.currentStep=0,l.stepStatus=0,l.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:l.isLastStep}),l.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:l.isLastStep})):(l.currentStep++,l.stepStatus++),l.handleNestedView(),void l.hideLoader();if("contactInfo"!=i&&"contactInfoWithSocialOptions"!=i||setTimeout(function(){l.profileRecomDataObj=!0},1e3),l.userActions=!0,l.profileRecomDataObj=!1,l.fyfStepConfig["typed_"+i]&&(l.profileData.profile["typed_"+i]=l.fyfStepConfig["typed_"+i]),l.fyfStepConfig["selected_"+i]&&(l.profileData.profile["selected_"+i]=l.fyfStepConfig["selected_"+i]),l.fyfStepConfig["typed_"+i]&&l.fyfStepConfig["typed_"+i].length||l.fyfStepConfig["selected_"+i]&&l.fyfStepConfig["selected_"+i].length){var r={stepName:i};if(l.fyfStepConfig["selected_"+i]&&l.fyfStepConfig["selected_"+i].length){l.fyfStepConfig["selected_"+i]=l.fyfStepConfig["selected_"+i].map(function(e){return e.toLowerCase()});var s=Array.from(new Set(l.fyfStepConfig["selected_"+i]));"skills"==i&&s.forEach(function(e,t){l.fyfStepConfig.profileData.skills&&-1!=l.fyfStepConfig.profileData.skills.indexOf(e)&&s.splice(t,1)}),s.length&&(r.selected_values=s)}else delete r.selected_values;if(l.fyfStepConfig["typed_"+i]&&l.fyfStepConfig["typed_"+i].length){l.fyfStepConfig["typed_"+i]=l.fyfStepConfig["typed_"+i].map(function(e){return e.toLowerCase()});var c=Array.from(new Set(l.fyfStepConfig["typed_"+i]));if("skills"==i){var d=!(!r.selected_values||!r.selected_values.length);c.forEach(function(e,t){l.fyfStepConfig.profileData.skills&&-1!=l.fyfStepConfig.profileData.skills.indexOf(e)&&c.splice(t,1),d&&c[t]&&c[t].length&&-1!=r.selected_values.indexOf(e)&&c.splice(t,1)})}c.length&&(r.typed_values=c)}else delete r.typed_values;Object.keys(r).length>1&&e.prototype.trackWidgetClick.call(l,u,r)}if(o){var g=!("true"==o);l.showOnRevelantExp=g,a.profile.relevantExperience=!g,l.profileData.profile.relevantExperience=!g,l.recentStepType=l.fyfStepConfig.stepType}if(l.isLastStep&&t.firstName){var m={email:t.email,firstName:t.firstName};a.profile={},a.profile.firstName=l.profileData.profile.firstName=t.firstName,a.profile.lastName=l.profileData.profile.lastName="",a.profile.email=l.profileData.profile.email=t.email,(t.phone&&t.phone.length>0||l.profileData.profile.phone)&&(a.profile.phone=l.profileData.profile.phone=t.phone,m.phone=t.phone),a.profile.finalStep=!0,l.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(l,h,m)}else t&&"unChanged"!=t&&"false"!=t||(t="unChanged"==t?l.profileData.profile[l.fyfStepConfig.stepType]:""),a.profile[l.fyfStepConfig.stepType]=t,l.profileData.profile[l.fyfStepConfig.stepType]=t,l.isLastStep?(a.profile.finalStep=!0,l.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(l,h,n)):(a.profile.finalStep=!1,l.profileData.profile.finalStep=!1,e.prototype.trackWidgetClick.call(l,p,n),l.hideLoader());l._tempProfileData.profile=l.getClonedObj(l.profileData.profile),!l.isLoggedIn||l.isLoggedIn&&l.isAnonymousUser&&!l.isActiveSession&&!l.isFirstStepClick?l.freshProfileCreation(a):(a.stepName=i,l.updateProfileData(a))},l.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;Object.keys(t).length&&l.isLoggedIn&&l.fetchProfileData()},l.handleSocialSkip=function(e,t,o){e&&e.length-1==t&&l.handleSkip(o)},l.handleSocialNextStep=function(e){l.handleNextKeyup(e)},l}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.getPiiConsentData(),this.subscribeToEventForExternalDepends(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1);var o=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=o&&o.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(e){t.profileData.profile=e})),this.subscriptions.push(this.eventAggregator.subscribe("getUserProfileData",function(e){"upload_resume"==e.context&&t.fetchValidateJwtToken()})),this.fetchValidateJwtToken(),this.fyfInfo&&this.fyfInfo.hasOwnProperty("isOptInChoosen")||(this.fyfInfo||(this.fyfInfo={}),this.fyfInfo.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",function(e){e.jobs&&e.jobs.length?t.isProfileJobsAvailable=!0:t.isProfileJobsAvailable=!1,t.profileRecomDataObj=!0})),this.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow}),this.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow})},t.prototype.checkStepLanding=function(){var e,t=this.localStorage.getItem("fyfStepLandInfo");this.isUserSocialLoggedIn&&t?e=t.success&&t.success.value:t&&(e=t.failure&&t.failure.value),e&&(this.currentStep=this.stepsData.findIndex(function(t){return t.stepType==e})),this.localStorage.removeItem("fyfStepLandInfo")},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitService.makeDDORequest(c,t).then(function(o){if(o&&o.status&&"success"==o.status&&o.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=o),e.piiConsentData=o.data,e.handleConsentData();else{var i=e.commonService.getSiteSettings("piiConsentConfig");i&&(e.piiConsentData=JSON.parse(JSON.stringify(i)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.handleActions.bind(this),this.piiConsentContext.widgetRef=this)},t.prototype.fetchValidateJwtToken=function(t){var o=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(e){e.data&&(o.isLoggedIn=e.data.isValidToken,o.isUserSocialLoggedIn=e.data.isSocialLogin&&o.isLoggedIn,o.isAnonymousUser=e.data.isAnonymous,o.isActiveSession=e.data.isActiveSession,o.isSiteLogin=e.data.isSiteLogin,o.isAnonymousUser&&o.isActiveSession||o.isUserSocialLoggedIn||o.isSiteLogin?o.fetchProfileData():(o.userActions=!1,o.profileData.profile={},o._tempProfileData.profile={},o.fyfStepConfig={},o.fyfStepConfig.profileData={},o.fetchStepsList(),o.isProfileJobsAvailable=!1))},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.fetchStepsList=function(){var t,o=this;if(this.fyfSteps&&this.fyfSteps.steps&&this.fyfSteps.steps.length)try{t=this.getClonedObj(this.fyfSteps.steps),this.fetchingFyfRootKeyVAlues(this.fyfSteps),this.fetchStepsData(t)}catch(e){t=void 0,i.logger.error(e)}t||this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(e){e&&e.data&&Array.isArray(e.data)?o.fetchStepsData(e.data):e&&e.data&&!Array.isArray(e.data)&&e.data.steps?(o.fetchingFyfRootKeyVAlues(e.data),o.fetchStepsData(e.data.steps)):o.handleError()},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.fetchingFyfRootKeyVAlues=function(e){this.fyfSocialOptions=this.getClonedObj(e.socialOptions)||[],this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.disableContactInfo=!(!e.disableContactInfo||"true"!=e.disableContactInfo),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent)},t.prototype.fetchStepsData=function(t){var o=this,i={stepType:"authorise",skip:"loggedIn"},n={stepType:"contactInfo",skip:"loggedIn"},a=[];t.forEach(function(e,t){e.isDisable||(a.push(e),"contactInfoWithSocialOptions"==e.stepType&&(o.isCandidateHomeEnabled&&a.pop(),!o.isCandidateHomeEnabled&&(o.contactInfoV1Enabled=!0)))}),t=a,this.stepsData=this.getClonedObj(t)||[],this._tempStepData=this.getClonedObj(t)||[],this.isCandidateHomeEnabled&&(this.disableSocialLogin=!0),this.disableSocialLogin||(this.stepsData.unshift(i),this._tempStepData.unshift(i)),this.disableContactInfo||(this.stepsData.push(n),this._tempStepData.push(n)),this.handleStepProcess(),this.checkStepLanding(),this.handleNestedView(),e.prototype.hideLoader.call(this)},t.prototype.fetchStepPosition=function(){var t=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddokeyStepPosition,{}).then(function(e){e&&e.data&&(t.stepPosition=e.data,t.fetchStepsList())},function(o){new Error(o),e.prototype.hideLoader.call(t)})},t.prototype.fetchProfileData=function(){var t=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyProfileData,{}).then(function(e){if(e&&Object.keys(e).length){e.profile?t.profileData=e:t.profileData.profile=e,t._tempProfileData=t.getClonedObj(t.profileData),t.profileData&&t.profileData.profile&&t.profileData.profile.optIn&&(t.fyfInfo.isOptInChoosen=t.profileData.profile.optIn),t.fetchStepsList();var o=e.nonEditableFields||[];t.piiConsentData&&t.piiConsentData.length&&t.consentPrefill&&t.piiConsentData.forEach(function(e){t.profileData&&t.profileData[e.type]&&(e.isChecked=!0)}),o.forEach(function(e){t.nonEditableFields[e]=e})}},function(o){new Error(o),e.prototype.hideLoader.call(t)})},t.prototype.handleStepProcess=function(){var e=this,t=[],o=0;this.stepsCount=0,this.isLastStep=!1,this.isUserSocialLoggedIn||this.isSiteLogin?(this.stepsData.forEach(function(i,n){"loggedIn"!=i.skip?t.push(i):("contactInfo"==i.stepType&&t.push(i),o++,e.stepsCount++)}),this.isLoggedIn&&(this.currentStep=(this.stepPosition||0)-o,this.currentStep=this.currentStep<0?this.currentStep=0:this.currentStep),this.stepsData=t,this._tempStepData=this.getClonedObj(this.stepsData),this.stepStatus=1):this.stepStatus=0,this.showOnRevelantExp=!(!this.profileData||!this.profileData.profile||this.profileData.profile.relevantExperience)||this.showOnRevelantExp,this.currentStep=this.fyfInfo&&this.fyfInfo.stepPosition?0:this.currentStep},t.prototype.handleNestedView=function(){var e=this,t=[],o=0;if(this.stepsData=this.getClonedObj(this._tempStepData),this.stepsCount=0,this.showOnRevelantExp=(!(this.profileData&&this.profileData.profile&&this.profileData.profile.relevantExperience)||0!=this.stepStatus&&0!=this.currentStep)&&this.showOnRevelantExp,this.stepsData.forEach(function(i,n){"true"!=i.showOnRevelantExp||e.showOnRevelantExp?(t.push(i),"loggedIn"!=i.skip&&e.stepsCount++,i.stepType!=e.recentStepType||e.ProfileSaveFailsMsg||(e.currentStep=e.isUserSocialLoggedIn||e.disableSocialLogin?e.stepsCount:e.stepsCount+1,e.stepStatus=e.disableSocialLogin&&!e.isUserSocialLoggedIn?e.stepsCount:e.stepsCount+1,e.recentStepType="")):o++}),this.stepsData=t,this.currentStep>this.stepsData.length-1)return this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:"true"}),void this.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:"true"});this.fyfStatus=!1,this.fyfStepConfig=this.stepsData[this.currentStep]||{},this.fyfStepConfig.profileData=this.profileData&&this.profileData.profile||{},this.fyfStepConfig.funRef=this.handleFyfActions,this.fyfStepConfig.prevStepRef=this.prevStep,this.fyfStepConfig.firstStep=!1,this.ProfileSaveFailsMsg=!1,this.currentStep==this.stepsData.length-1?this.fyfStepConfig.lastStep=!0:(0==this.currentStep&&(this.fyfStepConfig.firstStep=!0),this.fyfStepConfig.lastStep=!1);var i=this.currentStep+1;(i>this.stepsData.length-1||i<0)&&(i=0),this.stepStatus=0==this.stepStatus&&0!=this.currentStep?this.currentStep:this.stepStatus,this.stepLandingInfo={context:"fyf",failure:{key:"stepType",value:this.stepsData[this.currentStep].stepType},fyfFuncRef:this.handleSocialSkip,fyfNextStepFuncRef:this.handleSocialNextStep,optIn:this.fyfInfo.isOptInChoosen},this.contactInfoV1Enabled||(this.stepLandingInfo.success={key:"stepType",value:this.stepsData[i].stepType}),this.fyfSocialOptions&&this.fyfSocialOptions.length&&(this.stepLandingInfo.socialOptions=this.fyfSocialOptions||[]),this.loadStep()},t.prototype.skip=function(){var t={stepName:this.fyfStepConfig.stepType};e.prototype.trackWidgetClick.call(this,"skip_questions_click",t),this.handleStepDestory(),this.handleEmptyCatFlow="next",this.recentStepType="",this.currentStep==this.stepsData.length-1?(this.disableUploadResumeFlow&&!this.disableContactInfo&&(this.fyfInfo.isOptInChoosen=this.profileData.profile.optIn||!1),this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:"true"}),this.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:"true"})):(e.prototype.unhideLoader.call(this),this._tempProfileData.profile&&this._tempProfileData.profile[this.fyfStepConfig.stepType]&&!this.isProfileSaveFails&&(this.profileData.profile[this.fyfStepConfig.stepType]=this.getClonedObj(this._tempProfileData.profile[this.fyfStepConfig.stepType])),this.currentStep<this.stepsData.length-1&&(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.hideLoader())},t.prototype.hideLoader=function(){var t=this;setTimeout(function(){e.prototype.hideLoader.call(t)},250)},t.prototype.handleStepDestory=function(){this.fyfProvider.destroy&&this.fyfProvider.destroy()},t.prototype.getClonedObj=function(e){if(e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e?JSON.parse(JSON.stringify(e)):e},t.prototype.freshProfileCreation=function(t){var o=this;e.prototype.unhideLoader.call(this);var i=t;i.flowType=f.find_your_fit_flow,
this.profileData.profile.hasOwnProperty("optIn")&&this.profileData.profile.optIn==this.fyfInfo.isOptInChoosen||!this.profileData.profile.finalStep&&this.disableUploadResumeFlow||(i.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=i.profile.optIn),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(i.profile[e.type]=!!e.isChecked)}),this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyFreshProfileCreation,i).then(function(e){o.handleProfileResponse(e)},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.updateProfileData=function(t){var o=this;e.prototype.unhideLoader.call(this);var i=t;i.flowType=f.find_your_fit_flow,this.profileData.profile.hasOwnProperty("optIn")&&this.profileData.profile.optIn==this.fyfInfo.isOptInChoosen||!this.profileData.profile.finalStep&&this.disableUploadResumeFlow||(i.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=i.profile.optIn),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(i.profile[e.type]=!!e.isChecked)}),this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyCiProfileUpdate,i).then(function(e){o.handleProfileResponse(e)},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.handleProfileResponse=function(t){t&&"success"==t.status?(this.isLastStep?(this.currentStep=0,this.stepStatus=0,this.handleNestedView()):(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.eventAggregator.publish("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:this.isLastStep}),this.commonService.raiseCustomEvent("getUserProfileData",{context:f.find_your_fit_flow,isLastStep:this.isLastStep}),this.isFirstStepClick=!0,this.isLoggedIn=!0,this.isProfileSaveFails=!1,this.ProfileSaveFailsMsg=!1):!t||"failure"!=t.status&&"error"!=t.status&&500!=t.status||(this.isProfileSaveFails=!0,this.ProfileSaveFailsMsg=!0,this.isProfileJobsAvailable||(this.profileRecomDataObj=!0),this.isLastStep?(delete this.profileData.profile.firstName,delete this.profileData.profile.email,delete this.profileData.profile.phone):(delete this.profileData.profile[this.fyfStepConfig.stepType],this.recentStepType&&this.recentStepType.length&&delete this.profileData.profile.relevantExperience),this.focusFailureMessage()),e.prototype.hideLoader.call(this)},t.prototype.focusFailureMessage=function(){var e,t=this;setTimeout(function(){(e=t.element.querySelector(".ph-error-msg"))&&e.focus()},250)},t.prototype.loadStep=function(){var t=this;if(this.fyfProvider=s.FyfStepProvideFactory.createProvider(this.element,this.fyfStepConfig.stepType,c,"v1",this,this.a11yAutoComplete),this.fyfProvider){if(this.fyfProvider.init(),this.fyfStepConfig.selected_skills=[],this.fyfStepConfig.typed_skills=[],this.fyfStepConfig.selected_recentTitle=[],this.fyfStepConfig.typed_recentTitle=[],!this.isLastStep){var o=this.fyfStepConfig.stepType;e.prototype.trackWidgetClick.call(this,"fyf_step_loaded",{step:o})}var i=this.element.querySelector(".phs-step-count-block");if(i){var n=this.element.querySelector(".phs-aseertive");n&&!this.stepsData[this.currentStep].skip?setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");n.innerHTML=e?i.innerText+" "+e.innerText:i.innerText,setTimeout(function(){n.innerHTML=""},1500)},300):n&&setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");e&&(n.innerHTML=e.innerText),setTimeout(function(){n.innerHTML=""},1500)},300)}}},t.prototype.subscribeToEventForExternalDepends=function(){document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.makeDdoRequest=function(t,o,i){var n=this;return new Promise(function(a,r){n.findYourFitService.makeDDORequest(t,o,i).then(function(e){a(e)},function(t){new Error(t),e.prototype.hideLoader.call(n)})})},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.handleActions=function(){this.fyfProvider&&this.fyfProvider.handleActions&&this.fyfProvider.handleActions()},t.prototype.handlePrevStep=function(){this.fyfProvider&&this.fyfProvider.handlePrevStep&&this.fyfProvider.handlePrevStep()},t.prototype.fetchData=function(e){this.fyfProvider&&this.fyfProvider.fetchData&&this.fyfProvider.fetchData(e)},t.prototype.handleFocus=function(e){this.fyfProvider&&this.fyfProvider.handleFocus&&this.fyfProvider.handleFocus(e)},t.prototype.populateSelectedData=function(e,t){this.fyfProvider&&this.fyfProvider.populateSelectedData&&this.fyfProvider.populateSelectedData(e,t)},t.prototype.highlightSelectedData=function(e){this.fyfProvider&&this.fyfProvider.highlightSelectedData&&this.fyfProvider.highlightSelectedData(e)},t.prototype.hideDropDown=function(e){this.fyfProvider&&this.fyfProvider.hideDropDown&&this.fyfProvider.hideDropDown(e)},t.prototype.selectSuggestions=function(e,t){this.fyfProvider&&this.fyfProvider.selectSuggestions&&this.fyfProvider.selectSuggestions(e,t)},t.prototype.handleActionOutsideScope=function(e){this.fyfProvider&&this.fyfProvider.handleActionOutsideScope&&this.fyfProvider.handleActionOutsideScope(e)},t.prototype.handleBlur=function(){this.fyfProvider&&this.fyfProvider.handleBlur&&this.fyfProvider.handleBlur()},t.prototype.removeSelectedData=function(e){this.fyfProvider&&this.fyfProvider.removeSelectedData&&this.fyfProvider.removeSelectedData(e)},t.prototype.clearSearch=function(){this.fyfProvider&&this.fyfProvider.clearSearch&&this.fyfProvider.clearSearch()},t.prototype.focusSearch=function(){this.fyfProvider&&this.fyfProvider.focusSearch&&this.fyfProvider.focusSearch()},t.prototype.handleSkip=function(e){if(!this.isTabKey||!this.isShiftKey){var t=this.element.querySelector(".ph-a11y-skip");return t?(t.focus(),document.activeElement===t):void 0}},t.prototype.handleNextKeyup=function(e){return e&&(this.isTabKey=9===e.which,this.isShiftKey=e.shiftKey),!0},t.prototype.disableJobTitle=function(){this.fyfProvider&&this.fyfProvider.disableJobTitle&&this.fyfProvider.disableJobTitle()},t.prototype.fieldValidation=function(e){this.fyfProvider&&this.fyfProvider.fieldValidation&&this.fyfProvider.fieldValidation(e)},t.prototype.getFieldOptions=function(e){var t="";switch(e){case"skills":return t=this.fyfStepConfig.skills.value||"",this.isClickOption?(this.stepData.skills=[],this.isClickOption=!1,this.stepData.skills):t.length?this.fyfProvider.fetchData():(this.stepData.skills=[],this.stepData.skills);case"recentTitles":return t=this.fyfStepConfig.recentTitle.value||"",this.fyfStepConfig.isClickOption?(this.stepData.recentTitles=[],this.fyfStepConfig.isClickOption=!1,this.stepData.recentTitles):t.length?this.fyfProvider.fetchData():(this.stepData.recentTitles=[],this.stepData.recentTitles);case"locations":return t=this.fyfStepConfig.preferredLocationValue||"",this.isClickOption?(this.stepData.locations=[],this.isClickOption=!1,this.stepData.locations):t.length?this.fyfProvider.fetchData():(this.stepData.locations=[],this.stepData.locations)}},t.prototype.setFieldValue=function(e,t){var o=this;switch(e){case"skills":var i;if(this.stepData.skills.length&&this.stepData.skills[t]){if(i=this.stepData.skills[t].skill,this.fyfStepConfig[e].value=this.stepData.skills[t].skill,-1==this.fyfStepConfig[e].selectedSkill.indexOf(i.toLowerCase())){this.fyfStepConfig[e].selectedSkill.push(i),this.fyfStepConfig.selected_skills.push(i);var n=i+" skill selected";this.fyfProvider.addSelectionRemovalSronly(n),this.fyfProvider.focusSearch(),setTimeout(function(){o.fyfStepConfig.skills.value=""},150);var a=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==i.toLowerCase()});-1!=a&&this.stepData.suggestedSkills.splice(a,1)}this.fyfProvider.handleInputFieldLength()}else if(this.fyfStepConfig[e].value.length&&-1==t){var r=this.fyfStepConfig.skills.value,s=!1;if(this.stepData.skills.length)for(var l=this.stepData.skills,c=0,p=l;c<p.length;c++){var d=p[c];d.skill.toLowerCase()===r.toLowerCase()&&(this.fyfStepConfig.selected_skills.push(r),s=!0)}if(!s){var h=void 0,f=void 0;this.fyfStepConfig.selected_skills&&this.fyfStepConfig.selected_skills.length&&(this.fyfStepConfig.selected_skills=this.fyfStepConfig.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.selected_skills.indexOf(r.toLowerCase())&&(h=!0)),this.fyfStepConfig.profileData.skills&&this.fyfStepConfig.profileData.skills.length&&(this.fyfStepConfig.profileData.skills=this.fyfStepConfig.profileData.skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.profileData.skills.indexOf(r)&&(f=!0)),h||f||this.fyfStepConfig.typed_skills.push(r)}if(-1==this.fyfStepConfig[e].selectedSkill.indexOf(r)){this.fyfStepConfig[e].selectedSkill.push(r);var n=r+" skill selected";this.fyfProvider.addSelectionRemovalSronly(n),this.fyfProvider.focusSearch(),setTimeout(function(){o.fyfStepConfig.skills.value=""},150);var a=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==r.toLowerCase()});-1!=a&&this.stepData.suggestedSkills.splice(a,1)}this.fyfProvider.handleInputFieldLength()}break;case"recentTitles":if(this.stepData.recentTitles.length&&this.stepData.recentTitles[t]){var u=this.stepData.recentTitles[t].title;this.fyfStepConfig.recentTitle.value=u,this.fyfProvider.onEnter(this.stepData.recentTitles[t]),this.fyfStepConfig.selected_recentTitle=[u],this.fyfStepConfig.typed_recentTitle=[],this.fyfStepConfig.isClickOption=!0}else if(this.fyfStepConfig.recentTitle.value.length&&-1==t){var g=this.fyfStepConfig[e].value,s=!1;if(this.stepData.recentTitles.length)for(var m=this.stepData.recentTitles,y=0,v=m;y<v.length;y++){var b=v[y];b.title.toLowerCase()===g.toLowerCase()&&(this.fyfStepConfig.selected_recentTitle=[g],this.fyfStepConfig.typed_recentTitle=[],s=!0)}s||(this.fyfStepConfig.typed_recentTitle=[g],this.fyfStepConfig.selected_recentTitle=[])}break;case"locations":this.stepData.locations.length&&this.stepData.locations[t]&&(this.stepData.locations[t].standardlocation,this.fyfProvider.populateSelectedData(this.stepData.locations[t]))}},t.prototype.getActiveIndex=function(e){var t=this,o=-1;switch(e){case"skills":return this.stepData[e].forEach(function(i,n){i.skill==t.fyfStepConfig[e].value&&(o=n)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),o;case"recentTitles":return this.stepData[e].forEach(function(e,i){e.title==t.fyfStepConfig.recentTitle.value&&(o=i)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),o;case"locations":return this.stepData[e].forEach(function(e,i){e.location_display==t.fyfStepConfig.preferredLocationValue&&(o=i)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),o}},t.prototype.clearFieldValue=function(e){},t.prototype.setFocusField=function(e,t){switch(this.focusedField=e,e){case"skills":t?(this.focusedField=void 0,this.stepData.showSkillsDropdown=!1):this.stepData.showSkillsDropdown=!0;break;case"recentTitles":t?(this.focusedField=void 0,this.stepData.showRecentTitleDropdown=!1):this.fyfStepConfig.isClickOption||this.stepData.recentTitles.length||(this.stepData.showRecentTitleDropdown=!0);break;case"locations":t?(this.focusedField=void 0,this.stepData.showLocationDropdown=!1):this.stepData.showLocationDropdown=!0}},t.prototype.setActiveRadioChecked=function(e){var t=this,o=-1;return this.fyfStepConfig.workExperience.selectedExp&&this.stepData.workExperience.length&&this.stepData.workExperience.map(function(e,i){e.min==t.fyfStepConfig.workExperience.selectedExp.min&&(o=i)}),o},t.prototype.setRadioCheked=function(e){this.stepData.workExperience.length&&-1!=e&&(this.fyfStepConfig.workExperience.selectedExp=this.stepData.workExperience[e])},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"fyfInfo",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"fyfSteps",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==i.CommonService&&i.CommonService)&&g||Object,a.FindYourFitService,l.EventAggregator,"function"==typeof(m=void 0!==i.A11yAutoComplete&&i.A11yAutoComplete)&&m||Object,"function"==typeof(y=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&y||Object])],t);var g,m,y}(i.PhenomWidget);t.FindYourFit=g}),define("text!v1/ph-find-your-fit.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/email-job-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.name="",this.jobSeqNo="",this.siteType="external",this.referrerToken="",this.templateSiteType=""}return e}();t.EmailJobModel=o}),define("v1/ph-email-job-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"emailjob",jobDetailDDOKey:"jobDetail",ddoKeyShareDetails:"getSocialSharingDetails"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.emailThisJob=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e})},e.prototype.getSocialUrls=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.EmailJobService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job",["require","exports","aurelia-framework","ph-common","./ph-email-job-config","./ph-email-job-service","./email-job-model"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-email-job-v1",l=function(e){function t(t,o,i,n){var a=e.call(this,t,o,s)||this;return a.element=t,a.commonService=o,a.emailJobService=i,a.emailJobModel=n,a.isPopupReqd=!1,a.isErrorMsgReqd=!1,a.replaceJobSeqNo=!1,a.disableName=!1,a.siteTypeExternal=!1,a.showSubTitle=!1,a.isDialog=!1,a.showDialogPopup=!1,a.showErrorMsg=!1,a.errors={},a.emailDomains=[],a.bodyclass="",a.isEmailClientEnabled=!1,a.piiConsentError=!1,a}return __extends(t,e),t.prototype.attached=function(){var t=this;this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.isEmailClientEnabled||(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.getPiiConsentData(),e.prototype.subscribeToEvent.call(this,"show-email-job",function(e){!t.jobSeqNo&&e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.openEmailDialog()}),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(e){e.visibilityType&&"Internal/External"==e.visibilityType?t.jobSeqNo=e.jobId:e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.jobId=e.jobId}),e.prototype.subscribeToEvent.call(this,"updateJob",function(o){o.jobSeqNo&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo?t.jobSeqNo=o.jobId:o.jobSeqNo&&(t.jobSeqNo=o.jobSeqNo),t.jobSiteType=o.siteType,t.jobLocation=o.location)}),this.fetchJobSeqNo())},t.prototype.getPiiConsentData=function(){this.piiConsentData=this.commonService.getSiteSettings("piiConsentConfig")},t.prototype.getBodyClass=function(){this.bodyclass=document.body.className},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,s);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.replaceJobSeqNo&&t?this.jobSeqNo=t.data.job.jobId:this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.emailThisJob=function(){var t=this;if("internal"==this.commonService.getSiteType()){var o={jobSeqNo:this.jobSeqNo,jobId:this.jobId,medium:"email-share",campaign:"jobs-share",source:"email",siteType:"external",email:this.emailJobModel.email,jobSiteType:"internal"==this.jobSiteType?"external":this.jobSiteType,jobLocation:this.jobLocation,templateSiteType:this.commonService.getSiteType()};this.emailJobService.getSocialUrls(s,n.WidgetConfig.v1.ddoKeyShareDetails,o).then(function(o){e.prototype.hideLoader.call(t),o&&o.status&&"SUCCESS"==o.status.toUpperCase()&&o.data&&o.data.jdUrl&&(t.emailJobModel.referrerToken=o.data.referrerToken),t.emailJob()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})}else this.emailJob()},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.emailJob=function(){var t=this;if(this.hasPiiErrors(),!this.piiConsentError){if(this.jobSeqNo||this.fetchJobSeqNo(),this.emailJobModel.jobSeqNo=this.jobSeqNo,this.emailDomains=this.commonService.getSiteSettings("emailDomains"),this.errors.name={},this.errors.email={},this.disableName&&delete this.emailJobModel.name,this.emailDomains){for(var o=!1,i=0,a=this.emailDomains;i<a.length;i++){var r=a[i];if(this.validateEmail(this.emailJobModel.email,r)){o=!0;break}}this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?o?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}else{var l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?l.test(this.emailJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}(this.errors.name.error||this.errors.email.error)&&(this.hasErrors=!0,e.prototype.hideLoader.call(this)),this.hasErrors?setTimeout(function(){t.errors.name.error?t.element.querySelector(".ph-a11y-form-control-name").focus():!t.errors.name.error&&t.errors.email.error&&t.element.querySelector(".ph-a11y-form-control-email").focus()},50):(this.emailJobModel.templateSiteType=this.commonService.getSiteType(),this.jobSiteType&&("internal"==this.jobSiteType?this.emailJobModel.jobSiteType="external":this.emailJobModel.jobSiteType=this.jobSiteType),this.emailJobModel.jobLocation=this.jobLocation,this.emailJobService.emailThisJob(s,n.WidgetConfig.v1.ddoKey,this.emailJobModel).then(function(o){var i=t.element.querySelectorAll(".feedbackText")[0];if(o&&o.emailjob&&"success"==o.emailjob.status){var n={};n.trait15=t.emailJobModel.name?t.emailJobModel.name:"",n.trait27=t.emailJobModel.email,n.trait5=t.jobSeqNo,n.trait14=t.category,t.commonService.processTrackingEvent("email_job",void 0,n),e.prototype.hideLoader.call(t),t.showEmailSuccess=!0;var a=document.querySelector(".ph-a11y-email-submit"),r=t.element.querySelector(".success-hdlr button");a&&r&&e.prototype.openDialogPopup.call(t,"success-hdlr",a,r),t.emailJobModel.name="",t.emailJobModel.email=""}else{e.prototype.hideLoader.call(t),t.showEmailFailure=!0;var a=document.querySelector(".ph-a11y-email-submit"),r=t.element.querySelector(".failure-hdlr button");a&&r&&e.prototype.openDialogPopup.call(t,"failure-hdlr",a,r)}i&&i.setAttribute("tabindex","0"),setTimeout(function(){i&&i.focus()},50),t.isDialog&&(t.showDialogPopup=!0,t.emailJobModel.name="",t.emailJobModel.email="")},function(e){t.showEmailSuccess=!1,t.showEmailFailure=!1,t.closeEmailDialog()}))}},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.validateEmail=function(e,t){var o=e.toLowerCase().match("^(.+)@"+t.toLowerCase()+".com$");if(null==o)return!1;if(null!=o[1]){var i=/^\"?[\w-_\.]*\"?$/;return null!=o[1].match(i)}return!1},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.openEmailDialog=function(){if(this.isPopupReqd){this.showEmailDialog=!0;var t=document.getElementsByClassName("email")[0],o=this.element.querySelectorAll(".form-control")[0];t&&e.prototype.openDialogPopup.call(this,"modal",t,o),this.showEmailSuccess=!1,this.showEmailFailure=!1,this.getBodyClass();var i=this.bodyclass+" overflow-hidden";document.body.className=i}else{var n=document.querySelector('[as-element^="ph-email-job"]');if(n){var a=window.pageYOffset;if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var r=this.commonService.getNearestSectionElemOffsetTop(n,"bottom");a<r?this.commonService.smoothScroll(a,r,!0,30):this.commonService.smoothScroll(a,r,!1,30);var s=n.querySelector("input");s&&s.focus()}else{n.scrollIntoView(!1);var l=document.querySelectorAll(".ph-sticky-header"),c=0,p=window.scrollY,d=0;if(l.length){for(var h=0;h<l.length;h++)c+=l[h].offsetHeight;p&&c>window.innerHeight/2&&(d=n.offsetHeight-(window.innerHeight-c),window.scroll(0,p-d))}}}}},t.prototype.closeEmailDialog=function(){if(this.showEmailDialog=!1,this.showEmailSuccess=!1,this.showEmailFailure=!1,e.prototype.closeDialogPopup.call(this),this.errors.name={},this.errors.email={},document.body.classList&&document.body.classList.contains("overflow-hidden")&&document.body.classList.remove("overflow-hidden"),this.shareHandler){this.shareHandler({share:{name:"email"}});var t={jobSeqNo:this.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)}var o=this.element.querySelector(".ph-a11y-email-button");o&&o.focus()},t.prototype.closeFeedbackPopup=function(t){e.prototype.closeDialogPopup.call(this),t?this.closeEmailDialog():(this.errors.name={},this.errors.email={},this.errors.senderName={},this.emailJobModel.name="",this.emailJobModel.email="")},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobId",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopupReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Function)],t.prototype,"shareHandler",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"disableName",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"siteTypeExternal",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"showSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,a.EmailJobService,r.EmailJobModel])],t);var l}(i.PhenomWidget);t.EmailJob=l}),define("text!v1/ph-email-job.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-social-connect-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeySiteConfig:"siteConfig",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile",ddoKeySaveProfile:"saveProfile",ddoKeyGetNextPage:"getOnBoardingNextStep",ddoKeyGetIMLandingPage:"getIMLandingPage",ddoKeySocialConnectOptions:"socialConnectOptions",ddoKeyCreateConsentProfile:"createConsentProfile",ddoKeyJwtLogout:"jwtLogout"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SocialConnectService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect",["require","exports","aurelia-framework","ph-common","./ph-social-connect-config","./ph-social-connect-service"],function(e,t,o,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-social-connect-v1",s=function(e){function t(t,o,i,n,a){var s=e.call(this,t,o,r)||this;return s.element=t,s.commonService=o,s.socialConnectService=i,s.candidateLoginService=n,s.localStorage=a,s.fyfStepLandInfo={},s.piiconsent={},s.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",LINKEDIN:"linkedIn",GOOGLE:"google",LOGIN:"google-signin"},s.submitAction={NEXT:"next",PREV:"prev"},s.enabledSocial=["facebook","linkedin","live","google"],s.connectedState={},s.siteVariant="i",s.isLoggedIn=!1,s.showPopup=!1,s.externalEnabledSocial=[],s.internalEnabledSocial=[],s.providers={},s.redirectUri="",s.openMenuPopup=!1,s.privacyDataConsent=!1,s.privacyConsentReqFlag=!1,s.privacyConsentError=!1,s.privacyConsentPreCheck=!1,s.showLink=!1,s}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),"internal"==this.commonService.getSiteType()&&this.getOnBoardingStepData(),this.isPrivacyDataConsentCheckBoxRequired(),this.getEnabledSocial(),this.getConnectedData(),this.handleLoginPage(),this.getJwtToken(),this.privacyConsentError=!1,e.prototype.subscribeToEvent.call(this,"social-logout",function(){t.isLoggedIn=!1}),e.prototype.subscribeToEvent.call(this,"secure-url-click",function(e){t.togglePopup(e),t.redirectUri=e.redirectUri}),this.onBoardingStepId=localStorage.onBoardingStepId;var o=e.prototype.getQueryParam.call(this,"atsRedirectUrl")||"";this.atsInternalLogin=decodeURIComponent(o),window.location.hash&&(this.showLink=!0)},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox"),this.commonService.getSiteSettings("privacyDataConsentPreCheck")&&(this.privacyDataConsent=!0,this.privacyConsentPreCheck=!0)},t.prototype.profileLoginFlowChanged=function(e,t){this.profileLoginFlow=e,this.privacyConsentError=!1},t.prototype.piiconsentChanged=function(e,t){this.piiconsent=e},t.prototype.isPrivacySocialConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.togglePopup=function(t){var o,i;this.element.querySelector('[data-is-popup-view="true"]')&&(this.showPopup=!this.showPopup,this.showPopup?(e.prototype.trackWidgetClick.call(this,"signIn_click",{}),o=this.element.querySelector(".signin-link"),i=this.element.querySelector(".ph-a11y-sign-in"),e.prototype.openDialogPopup.call(this,"modal",o,i)):(e.prototype.trackWidgetClick.call(this,"signIn_popup_close_click",{}),e.prototype.closeDialogPopup.call(this)))},t.prototype.getOnBoardingStepData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetIMLandingPage;this.socialConnectService.makeDDORequest(r,t).then(function(t){e.onBoardingStepId=t.stepId||""},function(e){i.logger.debug(e)})},t.prototype.onBlurHandler=function(e,t){var o=this;return t?(this.blurTimers&&clearTimeout(this.blurTimers),this.openMenuPopup=!0):(this.blurTimers&&clearTimeout(this.blurTimers),this.blurTimers=setTimeout(function(){o.openMenuPopup=!1},300)),!0},t.prototype.getEnabledSocial=function(){var e=this,t=n.WidgetConfig.v1.ddoKeySocialConnectOptions,o=this.commonService.getSiteType();this.socialConnectService.makeDDORequest(r,t).then(function(t){t&&t.status&&"SUCCESS"==t.status.toUpperCase()?(e.enabledSocial=t.data,(t.data&&!t.data.external||!t.data.external.length)&&t.data[o]&&(e.enabledSocial.external=t.data[o]),
e.fyfStepLandInfo.socialOptions&&e.fyfStepLandInfo.socialOptions.length||(e.fyfStepLandInfo.socialOptions=[],e.enabledSocial&&e.enabledSocial.external&&e.enabledSocial.external.forEach(function(t){e.fyfStepLandInfo.socialOptions.push(t.name)})),e.rearrangeSocials()):(e.rearrangeSocials(),i.logger.debug("social config not found"))})},t.prototype.rearrangeSocials=function(){var t=this;setTimeout(function(){var o=t.element.querySelector("#social-container");if(o){for(var i=[],n=o.children.length,a=0;a<n;a++){var r=o.children[0];i[a]=r,o.removeChild(r)}t.enabledSocial.internal.forEach(function(e){var t=i.find(function(t){return t.id==e.name});t&&o.appendChild(t)})}e.prototype.hideLoader.call(t)},250)},t.prototype.handleLoginPage=function(){var e=this.commonService.getSiteSettings("oauth");e?this.providers=e:i.logger.debug("siteconfig data not available...")},t.prototype.getConnectedData=function(){var e=this;this.socialConnectService.makeDDORequest(r,n.WidgetConfig.v1.ddoKeyMergedProfile).then(function(t){t&&t.socialAccounts&&(e.mergedProfile=t,t.socialAccounts.forEach(function(t){e.connectedState[t.social]=t.status}))})},t.prototype.getLoacale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getJwtToken=function(){var t=this,o={};this.candidateLoginService.getValidateJwtToken(r,n.WidgetConfig.v1.ddoKeyValidateJwtToken,o).then(function(e){e.data.isValidToken&&(t.isLoggedIn=!e.data.isAnonymous)},function(o){e.prototype.hideLoader.call(t),new Error(o)})},t.prototype.dologin=function(t){var o=e.prototype.getQueryParam.call(this,"qpage")||"";o=decodeURIComponent(o);var n=e.prototype.getQueryParam.call(this,"page")||"",a=this.providers[t],r=this.getLoacale(),s=this.commonService.getLocale(),l=window.location.pathname,c=this.redirectUri||window.location.href;o||(l+=window.location.search);var p={page:l,protocol:window.location.protocol,localePath:r,qpage:o,pagename:n,locale:s,siteVariant:this.siteVariant,rurl:encodeURIComponent(c)},d=new URLSearchParams(window.location.search),h=d.get("RelayState")||"";h&&h.length&&(p.RelayState=h),t==this.providerKey.LOGIN&&(p.so="gs"),a?(a.redirectUriPath=this.commonService.getRootDomain()+a.redirectUri,a.state=JSON.stringify(p),this.redirectToProvider(a,t)):i.logger.debug("provider doesnt exist")},t.prototype.redirectToProvider=function(e,t){var o=this.providerKey,i=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case o.MICROSOFT:case o.LINKEDIN:i+="client_id="+encodeURIComponent(e.clientId)+"&";break;case o.GOOGLE:case o.LOGIN:i+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case o.FACEBOOK:i+="client_id="+encodeURIComponent(e.clientId)+"&"}t&&(i+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(i+="&scope="+encodeURIComponent(e.scope)),e.state&&(i+="&state="+encodeURIComponent(e.state)),window.location.href=i)},t.prototype.submit=function(e){if(e==this.submitAction.NEXT||e==this.submitAction.PREV){var t=n.WidgetConfig.v1.ddoKeyGetNextPage,o={};o.stepId=this.onBoardingStepId,o.action=e,this.socialConnectService.makeDDORequest(r,t,o).then(function(e){e.pageUrl?window.location.href=e.pageUrl:i.logger.debug("Error fetching page URL")},function(e){i.logger.debug(e)})}else i.logger.debug("Invalid action :: "+e)},t.prototype.doProfileLogin=function(e){var t=this;if(this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length){if(this.piiconsent.checkConsentError&&this.piiconsent.checkConsentError()&&"signUp"==this.profileLoginFlow)return void(this.piiconsent.handleError&&this.piiconsent.handleError())}else if(this.privacyConsentReqFlag&&(this.privacyConsentError=!1,!this.privacyDataConsent&&"signUp"==this.profileLoginFlow))return void(this.privacyConsentError=!0);var o={},i={};o.trait213=e.name,this.commonService.processTrackingEvent("social_login_click",void 0,o),this.redirectPage&&this.redirectPage.length&&(this.redirectUri="/");var a={redirectUri:this.redirectUri,name:e.name};this.fyfStepLandInfo&&this.fyfStepLandInfo.optIn&&(i.optIn=this.fyfStepLandInfo.optIn);var s=this.candidateLoginService.socialLoginUrl(r,e.userType,a,i),l=this.commonService.getSiteSettings("ignoreLinkedInStateParam");if("linkedIn"==e.name&&!l){var c;try{c=JSON.parse(this.getQueryParam(s,"state")||"{}"),Object.keys(c).forEach(function(e){c[e]=decodeURIComponent(c[e])})}catch(e){}this.socialConnectService.makeDDORequest(r,"storeStateParams",{stateParams:c}).then(function(e){e&&e.data?window.location.href=t.setQueryParam(s,"state",e.data):window.location.href=s})}if(this.fyfStepLandInfo&&"fyf"==this.fyfStepLandInfo.context&&this.localStorage.setItem("fyfStepLandInfo",this.fyfStepLandInfo),this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length&&"signUp"==this.profileLoginFlow){var p={profile:{}};this.piiconsent.consentData.forEach(function(e){e.type&&(p.profile[e.type]=!!e.isChecked)}),this.socialConnectService.makeDDORequest(r,n.WidgetConfig.v1.ddoKeyCreateConsentProfile,p).then(function(e){s&&(window.location.href=s)})}else("linkedIn"!=e.name||l)&&s&&(window.location.href=s)},t.prototype.getQueryParam=function(e,t){for(var o=e.substr(1),i=o.split("&"),n=0;n<i.length;n++){var a=i[n];if(a=a.split("="),a.length>1&&a[0]==t)return decodeURIComponent(a[1])}},t.prototype.setQueryParam=function(e,t,o){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+o+"$2"):e+n+t+"="+o},t.prototype.guestLogin=function(){var t=e.prototype.getQueryParam.call(this,"qpage")||"";t=decodeURIComponent(t);var o;if(t.length&&(o=this.commonService.getRootDomain()+t+"&qGuest=true"),t){var i={};i.trait213="guest",this.commonService.processTrackingEvent("social_login_click",void 0,i),window.location.href=o}},t.prototype.doProfileLogout=function(){var t=this;e.prototype.trackWidgetClick.call(this,"logout_click",{}),this.candidateLoginService.doLogout(r,n.WidgetConfig.v1.ddoKeyJwtLogout).then(function(o){o&&"success"==o.status?(t.isLoggedIn=!1,e.prototype.raiseEvent.call(t,"social-logout",{})):i.logger.debug("Failure ",o)})},t.prototype.getLocalWidgetBundle=function(){return{profileCount:"{{profileCount}} previous profiles",profileCountSingler:"{{profileCount}} previous profile",duplicateProfileInfo:"{{profileCount}} duplicate profiles found",facebook:"Sign in with Facebook",google:"Sign in with Google",linkedIn:"Sign in with LinkedIn",mergeCount:"Merge selected ({{profileCount}})","google-sign":"Sign in with Google",duplicateProfileInfoSingler:"{{profileCount}} duplicate profile found"}},t.prototype.handleSkip=function(e,t,o){this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfFuncRef&&this.fyfStepLandInfo.fyfFuncRef(e,t,o)},t.prototype.handleNextKeyup=function(e,t,o){return e&&e.length-1==t&&this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfNextStepFuncRef&&this.fyfStepLandInfo.fyfNextStepFuncRef(o),!0},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"fyfStepLandInfo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"redirectPage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"profileLoginFlow",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"piiconsent",void 0),t=__decorate([o.customElement(r),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==i.CommonService&&i.CommonService)&&s||Object,a.SocialConnectService,"function"==typeof(l=void 0!==i.CandidateLoginService&&i.CandidateLoginService)&&l||Object,"function"==typeof(c=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&c||Object])],t);var s,l,c}(i.PhenomWidget);t.SocialConnect=s}),define("text!v1/ph-social-connect.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-import-resume-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"siteConfig"}},t.ProviderKey={DropBox:"dropbox",GoogleDrive:"googledrive",OneDrive:"onedrive",LocalComputer:"localdrive",LocalComputerV2:"localdriveV2",LocalComputerV3:"localdriveV3"},function(e){e[e.Loaded=0]="Loaded",e[e.Errored=1]="Errored",e[e.InProgress=2]="InProgress"}(t.ScriptStatus||(t.ScriptStatus={}))});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-dropbox",["require","exports","aurelia-framework","./ph-import-resume-config","aurelia-event-aggregator"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://www.dropbox.com/static/api/2/dropins.js",devkey:"",clientId:"",scope:[],sid:"dropboxjs",state:null,viewId:"dropbox",errorRequest:5,amd:!1,attr:[{name:"data-app-key",refId:"clientId"}]},this.scriptState=i.ScriptStatus,this.pickerOptions={success:this.handlePickerSuccess.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"direct",multiselect:!1,extensions:[".bmp",".doc",".docx",".dot",".dotx",".gif",".gz",".htm",".html",".jpeg",".jpg",".msg",".odp",".ods",".odt",".pdf",".png",".ppt",".pptx",".rar",".rtf",".tif",".tiff",".txt",".wpd",".wri",".xls",".xlsx",".xlt",".xltx",".zip"]},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e[0],o=t.bytes/1048576,i={fileLocation:t.link,fileName:t.name,proceed:!1};o<=2&&(i.proceed=!0),this.eventAggregator.publish("fileAdded",i)},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,o=this.provider,i=document.getElementsByTagName("head")[0];if(!document.getElementById(o.sid)){var n=document.createElement("script");n.type="text/javascript",n.src=o.api,n.id=o.sid;for(var a=o.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,this.provider[l.refId])}n.async=!0,n.onload=function(i){o.state=!0,t.drive=Dropbox,e(!0)},n.onerror=function(){if(console.info("errored"),o.errorRequest){o.errorRequest--;var e=document.getElementById(o.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(o)},500),console.info("errored")}else o.state=null},i&&i.appendChild(n)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){this.provider.clientId=e?e.clientId:"zxqem6bqrgopvs0"},e.prototype.launchDrive=function(e){!0===this.provider.state&&this.drive.choose(this.pickerOptions)},e=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportDropBox=a});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-onedrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://js.live.net/v5.0/OneDrive.js",devkey:"",clientId:"",scope:[],sid:"onedrive-js",state:null,errorRequest:5,amd:!0,viewId:"onedrive",attr:[{name:"client-id",ref:"clientId"}]},this.scriptState=o.ScriptStatus,this.fileFormats=[],this.supporteFileFormats="bmp, doc, docx, dot, dotx, gif, gz, htm, html, jpeg, jpg, msg, odp, ods, odt, pdf, png, ppt, pptx, rar, rtf, tif, tiff, txt, wpd, wri, xls, xlsx, xlt, xltx, or zip",this.pickerOptions={clientId:"",action:"download",multiSelect:!1,success:this.handlePickerSuccess.bind(this),error:this.handlePickerErrored.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"downloadLink"},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e.values[0],o=t.size/1048576,i={fileLocation:t.link,fileName:t.fileName,proceed:!1};if(o<=2){i.proceed=!0;var n=i.fileName.split("."),a=n[n.length-1];this.supporteFileFormats.indexOf(a.toLowerCase())>=0?this.eventAggregator.publish("fileAdded",i):this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else this.eventAggregator.publish("fileErrored",{type:"exceeds"})},e.prototype.handlePickerErrored=function(){this.eventAggregator.publish("fileErrored",{type:"errored"})},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,o=this.provider,i=document.getElementsByTagName("head")[0],n=document.getElementById(o.sid);if(n){for(var a=o.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,this.provider[l.ref])}o.state=!0,this.drive=OneDrive,e(!0)}else{var c=document.createElement("script");c.type="text/javascript",c.src=o.api,c.id=o.sid;for(var a=o.attr,p=0,d=a;p<d.length;p++){var l=d[p];c.setAttribute(l.name,this.provider[l.ref])}c.async=!0,c.onload=function(i){o.state=!0,t.drive=OneDrive,e(!0)},c.onerror=function(){if(console.info("errored"),o.errorRequest){o.errorRequest--;var e=document.getElementById(o.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(o)},500),console.info("errored")}else o.state=null},i&&i.appendChild(c)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){e&&(this.provider.clientId=e.clientId,this.pickerOptions.clientId=e.clientId)},e.prototype.launchDrive=function(e){!0===this.provider.state?this.drive.open(this.pickerOptions):console.info("state:"+this.provider.state)},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[i.EventAggregator])],e)}();t.ImportOneDrive=a});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-googledrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://apis.google.com/js/client.js",devkey:"",clientId:"",scope:["https://www.googleapis.com/auth/drive"],sid:"googledrivejs",state:null,errorRequest:5,amd:!1,viewId:"googledrive",attr:[]},this.scriptState=o.ScriptStatus,this.pickerApiLoaded=!1,this.oauthToken=!1,this.eventAggregator=e}return e.prototype.loadScripts=function(e){var t=this,o=this.provider,i=document.getElementsByTagName("head")[0];if(!document.getElementById(o.sid)){var n=document.createElement("script");n.type="text/javascript",n.src=o.api,n.id=o.sid;for(var a=o.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,l.value)}n.async=!0,n.onload=function(t){o.state=!0,e(!0)},n.onerror=function(){if(console.info("errored"),o.errorRequest){o.errorRequest--;var e=document.getElementById(o.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(o)},500),console.info("errored")}else o.state=null},i&&i.appendChild(n)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.launchDrive=function(e){!0===this.provider.state?(gapi.auth.init(this.onAuthApiLoad.bind(this)),gapi.load("picker",{callback:this.onPickerApiLoad.bind(this)})):console.info("state:"+state)},e.prototype.onAuthApiLoad=function(){var e=this.provider;window.gapi.auth.authorize({client_id:e.clientId,scope:e.scope,immediate:!1},this.handleAuthResult.bind(this))},e.prototype.onPickerApiLoad=function(){this.pickerApiLoaded=!0},e.prototype.handleAuthResult=function(e){e&&!e.error&&(this.oauthToken=e.access_token,this.createPicker())},e.prototype.createPicker=function(){this.pickerApiLoaded&&this.oauthToken&&(new google.picker.View(google.picker.ViewId.DOCS).setMimeTypes("application/msword, application/pdf, application/rtf, text/plain, application/vnd.openxmlformats-officedocument.wordprocessingml.document, text/html, image/jpeg, image/png, image/jpg,application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/rar, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/zip, application/x-compressed-zip, image/bmp, application/vnd.openxmlformats-officedocument.wordprocessingml.template, image/gif, application/x-gzip, application/vnd.google-apps.photo, application/vnd.google.drive.ext-type.jpg, application/vnd.google.drive.ext-type.png"),(new google.picker.PickerBuilder).addViewGroup(new google.picker.ViewGroup(google.picker.ViewId.DOCS).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.PHOTOS)).enableFeature(google.picker.Feature.NAV_HIDDEN).setOAuthToken(this.oauthToken).setDeveloperKey(this.provider.devkey).setCallback(this.pickerCallback.bind(this)).build().setVisible(!0))},e.prototype.pickerCallback=function(e){var t=this,o="";if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var i=e[google.picker.Response.DOCUMENTS][0];o=i[google.picker.Document.URL];var n=i.sizeBytes/1048576,a={fileLocation:o,fileName:i.name,proceed:!1};if("file"==i.type||"photo"==i.type){var r=i.id,s=this.oauthToken;n<=10?(a.proceed=!0,gapi.client.request({path:"/drive/v3/files/"+r+"/permissions/",method:"POST",body:{role:"reader",type:"anyone"}}).execute(function(e){var o=new XMLHttpRequest;o.open("GET","https://www.googleapis.com/drive/v2/files/"+r),o.setRequestHeader("Authorization","Bearer "+s),o.addEventListener("load",function(){var e=JSON.parse(o.responseText);a.fileLocation=e.webContentLink,t.eventAggregator.publish("fileAdded",a)}),o.addEventListener("error",function(){t.eventAggregator.publish("fileErrored",{type:"common"})}),o.send()})):this.eventAggregator.publish("fileErrored",{type:"exceeds"})}else this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else e[google.picker.Response.ACTION]==google.picker.Action.CANCEL&&this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.addPickerData=function(e){e?(this.provider.clientId=e.clientId,this.provider.devkey=e.devkey):(this.provider.devkey="AIzaSyBFrajIgOC9E6vnLy9n1YheaHkzGX7x1Dc",this.provider.clientId="21747885378-4j2okdko0uuvqb4bacu2rvr1cjndt9l2.apps.googleusercontent.com")},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[i.EventAggregator])],e)}();t.ImportGoogleDrive=a});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdrive",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdrive",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;try{if(i&&document.querySelector(".ph-dropzone-area")){i.options.phDropzone=!1,i.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:""};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,this.dropzone&&this.dropzone.destroy(),t.clickable="#ph-dropzone",this.dropzone=new i(".ph-dropzone-area",t),this.dropzone.on("success",function(t,o){e.fileObj=t,e.fileObj.res=o,e.eventAggregator.publish("fileAddedLocalDrive",o)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var o={type:"cancel"};e.eventAggregator.publish("fileErrored",o)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(o,n,a,r){var s=o.size/1048576,l={type:"common"};if(s>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(o.type){var c=i.isValidFile(o,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}}catch(e){console.info(e.message)}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportLocalDrive=a});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV2",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV2",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileCommonUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;if(i&&document.querySelector(".ph-dropzone-areaV2")){i.options.phDropzone=!1,i.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,t.clickable="#ph-v2dropzone",this.dropzone&&this.dropzone.destroy(),this.dropzone=new i(".ph-dropzone-areaV2",t),this.dropzone.on("success",function(t,o){e.fileObj=t,e.fileObj.res=o,e.eventAggregator.publish("fileAddedLocalDrive",o)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var o={type:"cancel"};e.eventAggregator.publish("fileErrored",o)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(o,n,a,r){var s=o.size/1048576,l={type:"common"};if(s>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(o.type){var c=i.isValidFile(o,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportLocalDriveV2=a});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV3",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator","ph-common"],function(e,t,o,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.commonService=t,this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV3",attr:[]},this.maxFileSize=10,this.uploadingSronly=!1,this.fileObj={},this.profileMerge=!1,this.ctx={uploadUrl:"/uploadResumeS3andParse",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this,t={},o=this.element||document;if(i&&o.querySelector(".ph-dropzone-area")){i.options.phDropzone=!1,i.options.autoDiscover=!1,this.ctx=this.fileCtx||this.ctx;var n={url:this.commonService.getBaseDomain()+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(n.acceptedFiles=this.ctx.allowedFormats),this.ctx.hasOwnProperty("maxFiles")&&(n.maxFiles=this.ctx.maxFiles),n.maxFilesize=this.ctx.maxFileSize?this.ctx.maxFileSize:this.maxFileSize,this.fileCtx&&(n.params={dk:this.fileCtx.dk||"fileUpload"}),this.profileMerge&&(n.params?n.params.profileMerge=!0:(n.params={},n.params.profileMerge=!0)),n.clickable="#ph-dropzone",this.dropzone&&this.dropzone.destroy(),this.dropzone=new i(".ph-dropzone-area",n),this.dropzone.off("success").on("success",function(o,i){if(e.fileObj=o,e.fileObj.res=i,localStorage.processType?i.source=localStorage.processType:i.source="",i&&"success"==i.status)e.eventAggregator.publish("fileAddedLocalDrive",i),t.status="success",t.data=o;else{t.status="error";var n={type:"error"};t.data=n}e.eventAggregator.publish("fileErrored",n),e.handleFileUploadStaus(t)}),this.dropzone.off("addedfile").on("addedfile",function(o){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId}),t.status="addedfile",t.data=o,e.handleFileUploadStaus(t)}),this.dropzone.off("canceled").on("canceled",function(o){var i={type:"cancel"};e.eventAggregator.publish("fileErrored",i),t.status="canceled",t.data=o,e.handleFileUploadStaus(t)}),this.dropzone.off("uploadprogress").on("uploadprogress",function(o){e.fileObj=o,e.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},4e3),t.status="uploadprogress",t.data=o,e.handleFileUploadStaus(t)}),this.dropzone.off("complete").on("complete",function(o){e.fileObj=o,e.fileObj.res&&e.fileObj.res.status&&("503"==e.fileObj.res.status||"failure"==e.fileObj.res.status)&&(t.status="error",e.handleFileUploadStaus(t))}),this.dropzone.off("error").on("error",function(o,a,r,s){var l=e.ctx.maxFileSize?e.ctx.maxFileSize:e.maxFileSize,c=o.size/1048576,p={type:"common",name:o.name};if(c>l)p.type="exceeds",p.maxFileSize=l,p.name=o.name;else if(o.type){var d=i.isValidFile(o,n.acceptedFiles);d||(p.type="unsupported",p.name=o.name)}e.eventAggregator.publish("fileErrored",p),t.status="error",t.data=p,e.handleFileUploadStaus(t)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},e.prototype.handleBindableData=function(e){this.fileCtx=e.ctx,this.element=e.elem,this.profileMerge=e.profileMerge},e.prototype.handleFileUploadStaus=function(e){this.fileCtx&&this.fileCtx.funRef&&this.fileCtx.funRef(e)},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.EventAggregator,"function"==typeof(t=void 0!==a.CommonService&&a.CommonService)&&t||Object])],e);var t}();t.ImportLocalDriveV3=r});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-factory",["require","exports","./ph-import-resume-config","aurelia-framework","./ph-import-resume-onedrive","./ph-import-resume-dropbox","./ph-import-resume-googledrive","./ph-import-resume-localdrive","./ph-import-resume-localdriveV2","./ph-import-resume-localdriveV3"],function(e,t,o,i,n,a,r,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t,o,i,n,a){this.onedrive=e,this.dropbox=t,this.localdrive=o,this.localdriveV2=i,this.localdriveV3=n,this.googledrive=a}return e.prototype.getImporter=function(e){if(!e)return null;switch(e){case o.ProviderKey.OneDrive:return this.onedrive;case o.ProviderKey.GoogleDrive:return this.googledrive;case o.ProviderKey.DropBox:return this.dropbox;case o.ProviderKey.LocalComputer:return this.localdrive;case o.ProviderKey.LocalComputerV2:return this.localdriveV2;case o.ProviderKey.LocalComputerV3:return this.localdriveV3}},e.prototype.loadprovider=function(e){},e=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.ImportOneDrive,a.ImportDropBox,s.ImportLocalDrive,l.ImportLocalDriveV2,c.ImportLocalDriveV3,r.ImportGoogleDrive])],e)}();t.ImportFactory=p});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i
;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.ImportResumeService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume",["require","exports","aurelia-framework","ph-common","./ph-import-resume-config","./ph-import-resume-service","aurelia-event-aggregator","./ph-import-resume-factory"],function(e,t,o,i,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-import-resume-v1",c=function(e){function t(t,o,i,a,r){var s=e.call(this,t,o,l)||this;return s.element=t,s.commonService=o,s.importResumeService=i,s.eventAggregator=a,s.importer=r,s.profileMerge=!1,s.providerKey=n.ProviderKey,s.private=null,s.providerId="localdrive",s.labelName="Local computer",s}return __extends(t,e),t.prototype.getSiteConfig=function(){var t=this,o=this.commonService.getSiteSettings("filePicker")||{};if(Object.keys(o).length||"localdriveV3"==this.providerId){if(this.pickerData=o[this.providerId]||{},this.providerId&&(this.driver=this.importer.getImporter(this.providerId),this.driver)){if(this.driver.addPickerData(this.pickerData),this.fileCtx&&this.driver.handleBindableData){var i={};i.ctx=this.fileCtx,i.elem=this.element,this.driver.handleBindableData(i)}else if(this.driver.handleBindableData){var i={};i.profileMerge=this.profileMerge,this.driver.handleBindableData(i)}this.driver.loadScripts(function(e){t.enableDrive=e})}e.prototype.hideLoader.call(this)}},t.prototype.chooseResume=function(e,t){var o=this;this.eventAggregator.publish("filePickerInitiated",{view:this.providerId}),setTimeout(function(){t&&o.providerId==t?o.driver.launchDrive(e):t||o.driver.launchDrive(e)},10)},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.getSiteConfig(),this.eventAggregator.subscribe("ATTACH_LINK",function(e){var o=e.providerType;o&&t.chooseResume("",o)})},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"profileMerge",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"successImport",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"errorImport",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"fileCtx",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"providerId",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"labelName",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,a.ImportResumeService,r.EventAggregator,s.ImportFactory])],t);var c}(i.PhenomWidget);t.ImportResume=c}),define("text!v1/ph-import-resume.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-import-resume-v1/attachment/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-v2dropzone" href="javascript:void(0)" method="POST" class="dropzone" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/default/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-dropzone" href="javascript:void(0)" method="POST" class="dropzone ${ (enableDrive === true)  ? \'active\': \'disabled\'}" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/googledrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Google Drive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite googledrive-icon-holder"></span>\n        </div>\n        <div class="right-content">Google Drive</div>\n        </a>\n        \x3c!--<a href="javascript:void(0)" click.trigger="chooseResume(provider.oneDrive)" class="${canOneDrive ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="icon-box dropbox-icon">\n            <ppc-content type="icon">\n            </ppc-content>\n        </div>\n        <div class="text-box">\n            Choose from OneDrive\n        </div>\n    </a>--\x3e\n</template>'}),define("text!v1/views/ph-import-resume-v1/dropbox/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Dropbox">\n        <div class="left-icon-holder">\n            <span class="icon-sprite dropbox-icon-holder"></span>\n        </div>\n        <div class="right-content">Dropbox</div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-default/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone active" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Browse My Device</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-dropbox/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Dropbox</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-googledrive/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Google drive</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/onedrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite microsoft-icon-holder"></span>\n        </div>\n        <div class="right-content">Microsoft OneDrive</div>\n        </a>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-subscribe-similarjobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"subscribeSimilarjobs",ddoKeyATSProfileURL:"atsProfileURL",jobDetailDDOKey:"jobDetail",ddoKeySocialProfile:"mergedProfile",ddoKeymasterFrequency:"masterFrequencyV1",ddoKeySubscribedStatus:"subscribeSimilarStatus",ddoKeyValidateToken:"validateToken",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile",ddoKeyuserAlertSettings:"userAlertSettings",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKey2:"subscribeSimilarjobsV2"}}}),define("v1/ph-subscribe-similarjobs-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.jobSeqNo="",this.name="",this.frequency="2",this.alertFrequency={},this.userSubType="",this.profile={}}return e}();t.SubscribeSimilarJobsModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-subscribe-similarjobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.subscribe=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e})},e.prototype.getProfile=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SubscribeSimilarjobsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-subscribe-similarjobs",["require","exports","aurelia-framework","ph-common","./ph-subscribe-similarjobs-config","./ph-subscribe-similarjobs-service","./ph-subscribe-similarjobs-model","aurelia-event-aggregator"],function(e,t,o,i,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-subscribe-similarjobs-v1",c=function(e){function t(t,o,i,n,a){var r=e.call(this,t,o,l)||this;return r.element=t,r.commonService=o,r.eventAggregator=i,r.subscribeSimilarjobsService=n,r.subscribeSimilarJobsModel=a,r.isErrorMsgReqd=!1,r.checkSubscribed=!1,r.hideIfNoEmail=!1,r.showErrorMsg=!1,r.errors={},r.showEmailSuccess=!1,r.showEmailFailure=!1,r.popUpMessage=!0,r.subscribedFlag=!1,r.emailFeatureFlag=!1,r.userProfile={},r.isNonJwtTokenTenant=!1,r.consentRequired="0",r.acceptedConsent=!1,r.masterFrequency=[],r.frequencyObj={},r.isEmailEditable=!0,r.isUserLoggedIn=!1,r.statusCode=-1,r.isEmailReqd=!1,r.replaceJobSeqNo=!1,r.isDialog=!1,r.showDialogPopup=!1,r.piiConsentError=!1,r.piiConsentContext={},r.consentPrefill=!0,r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.fetchJobSeqNo(),this.isNonJwtTokenClient(),this.validateToken(),this.validateJwtToken(),this.getPiiConsentData(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.isNonJwtTokenTenant||this.getProfile(),this.isEmailReqd&&this.getEmail(),this.hideIfNoEmail&&this.profileEmailCheck(),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(o){t.jobSeqNo=o.jobSeqNo,e.prototype.showContainer.call(t),t.getSubscribedStatus()}),this.getSubscribedStatus(),this.getMasterFrequency()},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.subscribeSimilarjobsService.makeDDORequest(l,t).then(function(o){if(o&&o.status&&"success"==o.status&&o.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=o),e.piiConsentData=o.data,e.handleConsentData();else{var i=e.commonService.getSiteSettings("piiConsentConfig");i&&(e.piiConsentData=JSON.parse(JSON.stringify(i)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.subscribe.bind(this),this.piiConsentContext.widgetRef=this)},t.prototype.getMasterFrequency=function(){var e=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeymasterFrequency,{}).then(function(t){t&&"success"==t.status&&(e.masterFrequency=t.data,e.getSelectedFrequency())})},t.prototype.getSelectedFrequency=function(){var t=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyuserAlertSettings,{}).then(function(o){o&&o.data&&(t.subscribeSimilarJobsModel.frequency=o.data.alertFrequency||t.subscribeSimilarJobsModel.frequency,t.frequencyObj=t.getFrequencyObject(t.subscribeSimilarJobsModel.frequency),t.subscribeSimilarJobsModel.displayFrequency=t.frequencyObj.literalkey),e.prototype.hideLoader.call(t)},function(o){e.prototype.handleError.call(t,"")})},t.prototype.getFrequencyObject=function(e){for(var t in this.masterFrequency)if(this.masterFrequency[t].key===e)return this.masterFrequency[t]},t.prototype.isNonJwtTokenClient=function(){if(this.commonService.getRefNum){var e=this.commonService.getSiteSettings("tokenConfiguredTenants"),t=this.commonService.getRefNum();e&&e.refNums&&e.refNums.length&&-1!=e.refNums.indexOf(t)?this.isNonJwtTokenTenant=!0:this.isNonJwtTokenTenant=!1}},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,l);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.validateToken=function(){var e=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateToken,{}).then(function(t){t&&t.access_token&&(e.isUserLoggedIn=!0,e.isEmailEditable=!1,e.subscribeSimilarJobsModel.email=t.user_name)},function(e){new Error(e)})},t.prototype.validateJwtToken=function(){var e=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken).then(function(t){"success"==t.status&&t.data&&(e.isNonJwtTokenTenant?t.data.isSiteLogin&&(e.isUserLoggedIn=t.data.isValidToken):e.isUserLoggedIn=t.data.isValidToken,t.data.userSubType&&(e.subscribeSimilarJobsModel.userSubType=t.data.userSubType))},function(e){new Error(e)})},t.prototype.getProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.subscribeSimilarjobsService.getProfile(l,n.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(o){o&&o.email&&(t.userProfile=o,t.subscribeSimilarJobsModel.email=t.userProfile.email,t.piiConsentData&&t.piiConsentData.length&&t.consentPrefill&&t.piiConsentData.forEach(function(e){t.userProfile&&t.userProfile[e.type]&&(e.isChecked=!0)})),e.prototype.hideLoader.call(t)})},t.prototype.profileEmailCheck=function(){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:return t=n.WidgetConfig.v1.ddoKeyMergedProfile,[4,this.subscribeSimilarjobsService.makeDDORequest(l,t)];case 1:return o=i.sent(),o&&o.email||e.prototype.hideContainer.call(this),[2]}})})},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.subscribe=function(){var t=this,o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.subscribeSimilarJobsModel.jobSeqNo=this.jobSeqNo,this.subscribeSimilarJobsModel.email?o.test(this.subscribeSimilarJobsModel.email)?"1"!=this.consentRequired||this.acceptedConsent?this.hasErrors=!1:(this.hasErrors=!0,this.errors.email="",this.errors.consent="E103"):(this.hasErrors=!0,this.errors.email="E102",this.errors.consent=""):(this.hasErrors=!0,this.errors.email="E101",this.errors.consent=""),this.hasPiiErrors(),this.piiConsentError&&!this.hasErrors)return this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(!0),void e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{});if(this.hasErrors)e.prototype.hideLoader.call(this),setTimeout(function(){var e=t.element.querySelector(".ph-a11y-subscribe-box");e&&e.focus()},50);else{e.prototype.unhideLoader.call(this);var i=this.element.querySelectorAll(".feedbackText")[0];this.subscribeSimilarJobsModel.profile={},this.subscribeSimilarJobsModel.profile.email=this.subscribeSimilarJobsModel.email,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(t.subscribeSimilarJobsModel.profile[e.type]=!!e.isChecked)}),this.subscribeSimilarjobsService.subscribe(l,n.WidgetConfig.v1.ddoKey2,this.subscribeSimilarJobsModel).then(function(o){if("success"==o.subscribeSimilarjobsV2.status)if(t.showEmailSuccess=!0,void 0!=o.subscribeSimilarjobsV2.emailFeature&&o.subscribeSimilarjobsV2.emailFeature)t.popUpMessage=!1,t.emailFeatureFlag=!0;else{t.popUpMessage=!0,t.emailFeatureFlag=!1;var n=t.element.querySelector(".success-hdlr"),a=t.element.querySelector(".ph-a11y-submit");n&&e.prototype.openDialogPopup.call(t,"success-hdlr",a),n&&n.hasAttribute("role")&&n.removeAttribute("role")}else if(t.statusCode=o.subscribeSimilarjobsV2.code,t.showEmailFailure=!0,void 0!=o.subscribeSimilarjobsV2.emailFeature&&o.subscribeSimilarjobsV2.emailFeature)t.popUpMessage=!1,t.emailFeatureFlag=!0;else{t.popUpMessage=!0,t.emailFeatureFlag=!1;var n=t.element.querySelector(".failure-hdlr"),a=t.element.querySelector(".ph-a11y-submit");n&&e.prototype.openDialogPopup.call(t,"failure-hdlr",a),n&&n.hasAttribute("role")&&n.removeAttribute("role")}e.prototype.hideLoader.call(t),t.emailFeatureFlag||(i&&i.setAttribute("tabindex","0"),setTimeout(function(){i&&i.focus()},50),t.checkSubscribed||(t.isDialog?(t.subscribeSimilarJobsModel.email="",t.showDialogPopup=!0):setTimeout(function(){t.closeSubscribeDialog(),t.subscribeSimilarJobsModel.email=""},2500)))},function(o){new Error(o),e.prototype.hideLoader.call(t)})}},t.prototype.closeSubscribeDialog=function(){this.showEmailSuccess=!1,this.showEmailFailure=!1,this.popUpMessage=!0,this.checkSubscribed=!1,this.subscribedFlag=!1,e.prototype.closeDialogPopup.call(this)},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.internalSubscribe=function(){var t=this;if(this.subscribeSimilarJobsModel.jobSeqNo=this.jobSeqNo,"1"!=this.consentRequired||this.acceptedConsent?(this.errors={},this.hasErrors=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.consent="E103"),this.hasErrors)e.prototype.hideLoader.call(this);else{var o=this.element.querySelectorAll(".feedbackText")[0];this.subscribeSimilarJobsModel.email?this.subscribeSimilarjobsService.subscribe(l,n.WidgetConfig.v1.ddoKey,this.subscribeSimilarJobsModel).then(function(o){"success"==o.subscribeSimilarjobs.status?(void 0!=o.subscribeSimilarjobs.emailFeature&&o.subscribeSimilarjobs.emailFeature?(t.popUpMessage=!1,t.emailFeatureFlag=!0):(t.popUpMessage=!0,t.emailFeatureFlag=!1),t.showEmailSuccess=!0):(e.prototype.hideLoader.call(t),void 0!=o.subscribeSimilarjobs.emailFeature&&o.subscribeSimilarjobs.emailFeature?(t.popUpMessage=!1,t.emailFeatureFlag=!0):(t.popUpMessage=!0,t.emailFeatureFlag=!1),t.showEmailFailure=!0),e.prototype.hideLoader.call(t)},function(o){new Error(o),e.prototype.hideLoader.call(t)}):(this.popUpMessage=!0,this.emailFeatureFlag=!1,this.showEmailFailure=!0),o.setAttribute("tabindex","0"),setTimeout(function(){o.focus()},50)}},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.getSubscribedStatus=function(){var e=this;if(this.checkSubscribed&&this.jobSeqNo){var t={};t.jobSeqNo=this.jobSeqNo;var o=n.WidgetConfig.v1.ddoKeySubscribedStatus;this.subscribeSimilarjobsService.makeDDORequest(l,o,t).then(function(t){t.status&&"SUCCESS"===t.status.toUpperCase()&&t.data&&(e.subscribedFlag=!0)})}},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getEmail=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyATSProfileURL).then(function(t){t&&"success"==t.status&&(e.subscribeSimilarJobsModel.email=t.username||"",e.subscribeSimilarJobsModel.name=t.firstName||"")},function(t){e.handleError()})},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"checkSubscribed",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"hideIfNoEmail",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"consentRequired",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isEmailEditable",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isEmailReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,s.EventAggregator,a.SubscribeSimilarjobsService,r.SubscribeSimilarJobsModel])],t);var c}(i.PhenomWidget);t.SubscribeSimilarjobs=c}),define("text!v1/ph-subscribe-similarjobs.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-subscribe-similarjobs-v1/default/view.html",["module"],function(e){e.exports='<template>\n\t<div class="phs-subscribe-jobs-area ph-widget-box">\n        <div ph-loading-img="show-loader.bind: showLoader"></div>\n        <div class="widget-container">\n            <div class="phs-widget-heading">\n              <h2><ppc-content> Get notified for similar jobs</ppc-content> </h2>\n              <p> <ppc-content> You\'ll receive updates once a week </ppc-content> </p>\n              </ppc-content>\n            </div>\n            <div class="content-block">\n                <form role = "form" submit.delegate = "subscribe()">\n                    <div class="form-group has-feedback">           \n                        <label class="sr-only" for="notifiedEmail"><ppc-content> Enter Email address </ppc-content> </label>  \n                        <input type="text" value.bind = "subscribeSimilarJobsModel.email" class="form-control" name="" id="notifiedEmail" placeholder="you@email.com" autocomplete="off"/>\n                        <a class="form-control-feedback" \n                            href="javascript:void(0)" \n                            click.delegate="subscribe()"\n                            ph-tevent="similar_jobs_subscribe"\n                            data-ph-tevent-attr-trait5="${jobSeqNo}"\n                            data-ph-tevent-attr-trait14="${category}"\n                            data-ph-tevent-attr-trait27="${subscribeSimilarJobsModel.email}"\n                            ><ppc-content> Activate </ppc-content> </a>\n                        <span class="error" show.bind="hasErrors && errors.email == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\n                        <span class="error" show.bind="hasErrors && errors.email == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div show.bind="showEmailSuccess" class="success-hdlr">\n            <div class="modal-backdrop fade in" click.delegate="closeSubscribeDialog()"></div>\n            <div class="hdlr-block">\n                <ppc-content type="icon">\n                    <i class="icon icon-check"></i>\n                </ppc-content>\n                <h3>Success!</h3>\n                <p>successfully subscribed for similar jobs</p>\n            </div>\n        </div>\n    </div>\n</template>\n'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-profile-recommendations-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKeyProfile:"profileRecommendations",ddoKeySocialProfile:"getSocialProviderProfile",ddoKeyBrowsing:"browserRecomContent",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}}),define("v2/ph-profile-recommendations-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.recomContentReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null,size:5},this.recomJobsReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null}}return e}();t.ProfileRecommendationModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e,this.isLoggedIn=!1}return e.prototype.getprofileContent=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getProfile=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return(e||{})[t]})},e.prototype.getValidateJwtToken=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return(e||{})[t]})},e.prototype.getJobSatusList=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getRecommendedTrackCtx=function(){var e=this.commonService,t=e.recommendationTrackingConfig,o=e.phenomAppManager,i=o.getCountry(),n=o.getLocale(),a="us"!=i,r={};for(var s in t)if(t.hasOwnProperty(s))if(Array.isArray(t[s]))t[s].forEach(function(t){var o=[],s=[i,n,t.storageKey].join("_");if(o[0]=e.localStorageAPI.getItem(s),a){var l=["us","en_us",t.storageKey].join("_");o[1]=e.localStorageAPI.getItem(l),o=o[0].concat(o[1])}else r[t.storageKey]=o[0]});else{var l=[],c=[i,n,t[s].storageKey].join("_");if(l[0]=e.localStorageAPI.getItem(c),a){var p=["us","en_us",t[s].storageKey].join("_");l[1]=e.localStorageAPI.getItem(p),l[0].concat(l[1])}else r[t[s].storageKey]=l[0]}return r},e.prototype.updateUser=function(e){var t=e||{},o=t.data||{};this.isLoggedIn=o.isValidToken||!1},
e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.ProfileRecommendationsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations",["require","exports","aurelia-framework","ph-common","./ph-profile-recommendations-config","./ph-profile-recommendations-service","./ph-profile-recommendations-model","aurelia-event-aggregator"],function(e,t,o,i,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="v2",c="ddoKeyBrowsing",p="ph-profile-recommendations-"+l,d={Profile:"profile",Browsing:"browsing"},h="linkedInProfileObj",f="linkedin_recommended_job_click",u=function(e){function t(t,o,i,a,r,s,d){var u=e.call(this,t,o,p)||this;return u.commonService=o,u.contentService=i,u.urlManager=a,u.contentModel=r,u.eventAggregator=s,u.localStorage=d,u.profileOnly="1",u.jobTeaser=!1,u.jobCaption=!1,u.addMultiLingualRecom=!1,u.recomJobCategories=[],u.user={isLoggedIn:null,userId:"",userType:"",socialProvider:"",isSocialLogin:null,isSiteLogin:null},u.getBrowsingContent=function(t){e.prototype.unhideLoader.call(u);var o,i=u.contentModel.recomJobsReqObj;o=u.addMultiLingualRecom?u.contentService.getRecommendedTrackCtx():u.commonService.getRecommendedTrackCtx();for(var a in o)i[a]=o[a];t&&(i.userProfile=u.commonService.getSpecificTrackCtx(h)),u.maxJobs&&(i.recoSize=u.maxJobs),u.contentService.getprofileContent(p,n.WidgetConfig[l][c],i).then(function(t){if(e.prototype.hideLoader.call(u),t){var o=t.jobRecommendations.data&&t.jobRecommendations.data.recommendedJobs;o&&0!=o.length?e.prototype.fetchJobStatus.call(u):(o=[],e.prototype.handleError.call(u,"")),u.jobResults=o,u.onDataChange(f)}},function(t){new Error(t),e.prototype.hideLoader.call(u),e.prototype.handleError.call(u,"")})},u.getJwtToken(),u}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.eventAggregator.subscribe("getUserProfileData",function(e){t.getJwtToken()})},t.prototype.handleProfileView=function(e){switch(e){case d.Profile:this.getProfileContent();break;case d.Browsing:this.getBrowsingContent()}},t.prototype.getJwtToken=function(){var t=this,o={};this.contentService.getValidateJwtToken(p,n.WidgetConfig[l].ddoKeyValidateJwtToken,o).then(function(e){t.updateState(e),t.handlePage()},function(o){e.prototype.hideLoader.call(t),new Error(o)})},t.prototype.handlePage=function(){"1"==this.profileOnly?this.user.isLoggedIn||this.user.isSocialLogin?this.handleProfileView(d.Profile):e.prototype.hideContainer.call(this):(this.recommendationType=this.user.isLoggedIn?d.Profile:d.Browsing,this.handleProfileView(this.recommendationType))},t.prototype.getProfileContent=function(){var t=this;e.prototype.unhideLoader.call(this),this.contentService.getprofileContent(p,n.WidgetConfig[l].ddoKeyProfile,{}).then(function(o){if(e.prototype.hideLoader.call(t),o=o.data){var i=o&&o.results;i&&i.length?(e.prototype.fetchJobStatus.call(t),e.prototype.showContainer.call(t)):(i=[],e.prototype.handleError.call(t,"")),t.jobResults=i,e.prototype.onDataChange.call(t),t.recomJobCategories=o.linkedInCategoryWidget;var n={};n.jobs=t.jobResults||[],n.categories=t.recomJobCategories||[],t.eventAggregator.publish("ph:profileRecomData",n)}},function(o){e.prototype.onError.call(t,""),e.prototype.hideLoader.call(t)})},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},t.prototype.updateState=function(e){var t=e||{},o=t.data||{};this.user.isLoggedIn=o.isValidToken||!1,this.user.userId=o.userId||"",this.user.userType=o.userType||"",this.user.socialProvider=o.socialProvider||"",this.user.isSiteLogin=o.isSiteLogin||!1,this.user.isSocialLogin=o.isSocialLogin||!1},t.prototype.getLoacalePath=function(e){return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getUrlWithLocale=function(t,o,i,n){t&&t.setAttribute&&t.setAttribute("ph-click-ctx",o),t&&t.getAttribute&&t.getAttribute("ph-tevent")&&(e.prototype.subscribeToTrackingEvents.call(this,t),t.setAttribute("ph-tref",(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0)),t.setAttribute("ph-tag",e.prototype.tagName),this.commonService.storePageTrackEventData(t.getAttribute("ph-tref"),i));var a=this.getLoacalePath(i.locale),r=phApp.urlMap[o];if(r)return phApp.baseDomain+a+this.urlManager.getUrl(o,i,n,r)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"recommendationType",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"profileOnly",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"jobTeaser",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"jobCaption",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"addMultiLingualRecom",void 0),t=__decorate([o.customElement(p),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==i.CommonService&&i.CommonService)&&u||Object,a.ProfileRecommendationsService,"function"==typeof(g=void 0!==i.UrlManager&&i.UrlManager)&&g||Object,r.ProfileRecommendationModel,s.EventAggregator,"function"==typeof(m=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&m||Object])],t);var u,g,m}(i.PhenomJobWidget);t.ProfileRecommendations=u}),define("text!v2/ph-profile-recommendations.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v2/views/ph-profile-recommendations-v2/default/view.html",["module"],function(e){e.exports='<template>\n        <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n        <div class="phs-widget-block-area ph-widget-box" show.bind="!showLoader && jobResults.length">\n            <div class="widget-container">\n                <div class="phs-widget-heading">\n                    <h2>\n                        <ppc-content key="widgetHeadingText" data-ph-at-id="heading-text">\n                            Profile recommendations\n                        </ppc-content>\n                    </h2>\n                </div>\n                <section class="ph-widget" instance-id="3vyn19">\n                        <div as-element="ph-refer-friend-v1" mode.bind="referMode" profile.bind="referJob" close-function.bind="handleReferClose">\n                                </div>  \n                    </section>\n                <div class="content-block">\n                    <section class="ph-widget" instance-id="1gd0h6">\n                        <div as-element="ph-email-job-v1" class="ph-email-job-v1-default-default" data-widget="ph-email-job-v1" job-seq-no.bind="eachJob.jobSeqNo"\n                            category.bind="eachJob.category" view="default" is-popup-reqd="true" instance-id="1gd0h6">\n                        </div>\n                    </section>\n                    <ul data-ph-at-id="jobs-list" data-ph-at-widget-data-count="${jobResults.length}">\n                        <li class="jobs-list-item" repeat.for="eachJob of jobResults" show.bind="maxDisplayCount > $index" data-ph-at-id="jobs-list-item">\n                            <a ph-tevent="recommended_job_click" ref="linkEle" href="${getUrl(linkEle, \'job\', eachJob)}" class="job-link-linkedin">\n                                <div class="information">\n                                    <div repeat.for="eachAttr of jobFields">\n                                        <h2 class="job-title" if.bind="eachJob.title && eachAttr.name.indexOf(\'title\') != -1">\n                                            <b if.bind="eachAttr.settings.label">\n                                                <i class="icon ${eachAttr.settings.icon}" if.bind="eachAttr.settings.icon && eachAttr.settings.icon.length"></i>\n                                                ${widgetBundle[\'title\'] | pht} :</b> ${eachJob.title}\n                                        </h2>\n                                        <span class="job-location" if.bind="eachAttr.name.indexOf(\'location\') != -1 && !eachJob.multi_location || eachJob.multi_location.length == 1 || eachJob.multi_location.length == 0">\n                                            <b if.bind="eachAttr.settings.label">\n                                                <i class="icon ${eachAttr.settings.icon}" if.bind="eachAttr.settings.icon && eachAttr.settings.icon.length"></i>\n                                                ${widgetBundle[\'location\'] | pht} :</b> ${eachJob.location}\n                                        </span>\n                                        <span class="${job-eachAttr.name}" if.bind="eachJob[eachAttr.name] && ([\'title\',\'postedDate\',\'expiryDate\',\'multi_location\',\'descriptionTeaser\',\'location\'].indexOf(eachAttr.name) == -1)">\n                                            <b if.bind="eachAttr.settings.label">\n                                                <i class="icon ${eachAttr.settings.icon}" if.bind="eachAttr.settings.icon && eachAttr.settings.icon.length"></i>\n                                                ${widgetBundle[eachAttr.name] | pht}</b> : ${eachJob[eachAttr.name]}\n                                        </span>\n                                        <span class="job-postdate" if.bind="eachJob.postedDate  && eachAttr.name.indexOf(\'postedDate\')!= -1">\n                                            <span>\n                                                <b if.bind="eachAttr.settings.label">\n                                                    <i class="icon ${eachAttr.settings.icon}" if.bind="eachAttr.settings.icon && eachAttr.settings.icon.length"></i>\n                                                    ${widgetBundle[\'postedDate\'] | pht}\n                                                </b>\n                                            </span>\n                                            ${eachJob.postedDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\n                                        </span>\n                                        <span class="job-expirydate" if.bind="eachAttr.name.indexOf(\'expiryDate\')!= -1 && eachJob.expiryDate">\n                                            <b if.bind="eachAttr.settings.label">\n                                                <i class="icon ${eachAttr.settings.icon}" if.bind="eachAttr.settings.icon && eachAttr.settings.icon.length"></i>\n                                                ${widgetBundle[\'expiryDate\'] | pht}\n                                            </b> : ${eachJob.expiryDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\n                                        </span>\n    \n                                        <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\')!= -1">\n                                            <li>\n                                                <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\n                                                    data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\n                                                    class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen"\n                                                    tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\n                                                    id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}"\n                                                    aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\n                                                    data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\n                                                    <span>\n                                                        <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\n                                                    </span> ${eachJob.multi_location.length}\n                                                    <span>\n                                                        <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\n                                                    </span>\n                                                    <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\n                                                </button>\n                                                <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\n                                                    <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\n                                                        data-ph-at-job-location-text="${eachLocation}">\n                                                        ${eachLocation}\n                                                    </li>\n                                                </ul>\n                                            </li>\n                                        </ul>\n                                        <p class="job-description" if.bind="eachJob.descriptionTeaser && eachAttr.name.indexOf(\'descriptionTeaser\')!= -1" innerhtml.bind="eachJob.descriptionTeaser | sanitizeHTML"\n                                            data-ph-at-id="jobdescription-text"></p>\n                                    </div>\n                                    <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\') != -1">\n                                        <li>\n                                            <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\n                                                data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\n                                                class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0"\n                                                role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\n                                                id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}"\n                                                aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\n                                                data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\n                                                <span>\n                                                    <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\n                                                </span> ${eachJob.multi_location.length}\n                                                <span>\n                                                    <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\n                                                </span>\n                                                <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\n                                            </button>\n                                            \x3c!--dropView used to toggle toggleMultiLocationView based on item click: js dependent --\x3e\n                                            <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\n                                                <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\n                                                    data-ph-at-job-location-text="${eachLocation}">\n                                                    ${eachLocation}\n                                                </li>\n                                            </ul>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </a>\n                            <div class="job-actions"> \n                                <div repeat.for="eachAction of jobActions">\n                                    <div if.bind="eachAction.name == \'applyNow\'">\n                                        <a ph-tevent="from_data_attribute" data-ph-tevent-name="${eachJob.actionEventName}" href.bind="eachJob.actionUrl" target.bind="eachJob.externalApply!=\'undefind\' && eachJob.externalApply && !clickTojd ? \'_blank\' : \'_self\'"\n                                            class="btn plain-button apply-btn" data-ph-at-id="apply-link" data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}"\n                                            data-ph-tevent-attr-trait14="${eachJob.category}">\n                                            <ppc-content key="jobApplyActionLink" data-ph-at-id="apply-text">Apply Now</ppc-content>\n                                        </a>\n                                    </div>\n                                    <div if.bind="eachAction.name == \'shareJob\'">\n                                            <section class="ph-widget" instance-id="6ty93l">\n                                                    <div as-element="ph-social-share-v3" detail-obj.bind="eachJob"\n                                                    share-option="google-plus,facebook,twitter,linkedin" instance-id="6ty93l">\n                                                    </div>\n                                                </section>\n                                                <section class="ph-widget" instance-id="1gd0h6">\n                                                    <div as-element="ph-email-job-v1" class="ph-email-job-v1-default-default" data-widget="ph-email-job-v1" view="default" is-popup-reqd="true" \n                                                    instance-id="1gd0h6">\n                                                    </div>\n                                                </section>\n                                        <section class="ph-widget" instance-id="6ty93l">\n                                            <div as-element="ph-social-share-v2" class="ph-social-share-v2-default-default" data-widget="ph-social-share-v2" view="default"\n                                                current-job-obj.bind="eachJob" instance-id="6ty93l">\n                                            </div>\n                                        </section>\n                                    </div>\n                                    <div if.bind="eachAction.name == \'refer\'">\n                                            <button class="btn plain-button refer-friend-button" click.delegate="handleReferJob(eachJob)" data-ph-at-id="refer-friend-button" aria-label="Refer ${job.title}" role="button" key-role="btnRole" aria-expanded="${showPopup ? \'true\' : \'false\'}" aria-haspopup="true">\n                                                    <ppc-content key="referButtonText" data-ph-at-id="refer-friend-button-text">\n                                                        Refer\n                                                    </ppc-content>\n                                                    <i class="icon ${eachAction.settings.icon}" if.bind="eachAction.settings.icon && eachAction.settings.icon.length" aria-hidden="true"></i>\n                                                </button>\n                                    </div>\n                                    <div if.bind="eachAction.name == \'addToCart\'">\n                                        <div class="savejob-checkbox">\n                                            <label for="save-${eachJob.jobSeqNo}" class="${eachJob.inProgress ? \'disabled\' : \'\'}">\n                                                <input type="checkbox" id="save-${eachJob.jobSeqNo}" disabled.bind="eachJob.inProgress" ph-tevent="job_added_to_jobcart"\n                                                    checked.bind="eachJob.isJobSaved" change.delegate="handleSaveJob(eachJob)" title="${eachJob.isJobSaved === false ? \'Save Job\': \'Saved Job\'}">\n                                                <span class="label-content" if.bind="eachJob.isJobSaved === false">\n                                                    <i class="icon icon-star-empty"></i>\n                                                    <ppc-content key="literal-1487954993542-22">Save</ppc-content>\n                                                </span>\n                                                <span class="label-content" if.bind="eachJob.isJobSaved === true">\n                                                    <i class="icon icon-star"></i>\n                                                    <ppc-content key="literal-1487954993542-23">Saved</ppc-content>\n                                                </span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                    <div if.bind="eachAction.name == \'removeFromCart\'">\n                                        <a href="javascript:void(0)" click.delegate="deleteJobFromCart(eachJob)" class="favourite" data-ph-at-id="job-remove-link">\n                                            <i class="icon icon-delete">Delete</i>\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                    <div class="phs-widget-footer" if.bind="seemoretext" data-ph-at-id="navigation">\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeMore\'"\n                            click.trigger="seemore()" title="See more recommended jobs" key-title="seemore-link-title" data-ph-at-id="seemore-link">\n                            <ppc-content key="seeMoreText" data-ph-at-id="seemore-text">See more </ppc-content>\n                            <i class="icon icon-down-arrow" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === false"\n                            click.trigger="seeLess()" title="See less recommended jobs" key-title="seeless-link-title" data-ph-at-id="seeless-link">\n                            <ppc-content key="seeLessText" data-ph-at-id="seeless-text">See less </ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeNext\'"\n                            click.trigger="seeNext()" title="See next recommended jobs" key-title="seenext-link-title" data-ph-at-id="seenext-link">\n                            <ppc-content key="seeNextText" data-ph-at-id="seenext-text">See next</ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeEvenMore\'"\n                            click.trigger="seeEvenMore()" title="See even more recommended jobs" key-title="seeevenmore-link-title"\n                            data-ph-at-id="seeevenmore-link">\n                            <ppc-content key="seeEvenMoreText" data-ph-at-id="seeevenmore-text">See even more</ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="no-data-view" show.bind="showErrorMsg" data-ph-at-id="nodata-block">\n                    <p>\n                        <ppc-content key="noRecomJobsInfoText" data-ph-at-id="nodata-text">\n                            No recommendations found\n                        </ppc-content>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-people-also-viewed-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"peopleAlsoViewed",jobDetailDDOKey:"jobDetail"}}}),define("v2/ph-people-also-viewed-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.pavReqObj={jobSeqNo:"",size:"5"}}return e}();t.PeopleAlsoViewedModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-people-also-viewed-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.commonService=e,this.getPAVJobs=function(e,o,i){return t.commonService.getDDO(e,o,i).then(function(e){return e})}}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.PeopleAlsoViewedService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-people-also-viewed",["require","exports","aurelia-framework","ph-common","./ph-people-also-viewed-config","./ph-people-also-viewed-service","./ph-people-also-viewed-model"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v2",l="ddoKey",c="jobDetailDDOKey",p="ph-people-also-viewed-"+s,d="job_click",h=function(e){function t(t,o,i,a){var r=e.call(this,t,o,p)||this;return r.commonService=o,r.pavService=i,r.pavModel=a,r.pavJobs=[],r.jobResults=[],r.fetchJobSeqNo=function(){if(r.jobSeqNo&&null!=r.jobSeqNo&&r.jobSeqNo.length>0)r.getPAVJobs();else{var t=r.commonService.getCachedDDO(n.WidgetConfig[s][c],p);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(r.jobSeqNo=t.data.job.jobSeqNo,r.getPAVJobs()):(e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,""))}},r.getPAVJobs=function(){e.prototype.unhideLoader.call(r);var t=r.pavModel.pavReqObj;r.jobSeqNo&&(t.jobSeqNo=r.jobSeqNo),r.pavService.getPAVJobs(p,n.WidgetConfig[s][l],t).then(function(t){e.prototype.hideLoader.call(r),t&&t.peopleAlsoViewed&&t.peopleAlsoViewed.data.results?r.jobResults=t.peopleAlsoViewed.data.results||[]:(e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,"")),r.onDataChange(d)},function(t){new Error(t),e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,"")})},r}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.fetchJobSeqNo()},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),t=__decorate([o.customElement(p),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==i.CommonService&&i.CommonService)&&h||Object,a.PeopleAlsoViewedService,r.PeopleAlsoViewedModel])],t);var h}(i.PhenomJobWidget);t.PeopleAlsoViewed=h}),define("text!v2/ph-people-also-viewed.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v2/views/ph-people-also-viewed-v2/default/view.html",["module"],function(e){
e.exports='<template>\r\n        <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\r\n        <div class="phs-widget-block-area ph-widget-box" show.bind="!showLoader && jobResults.length">\r\n            <div class="widget-container">\r\n                <div class="phs-widget-heading">\r\n                    <h2>\r\n                        <ppc-content key="widgetHeadingText" data-ph-at-id="heading-text">\r\n                            People also viewed\r\n                        </ppc-content>\r\n                    </h2>\r\n                </div>\r\n                <div class="content-block">\r\n                    <div as-element="ph-refer-friend-v1" data-widget="ph-refer-friend-v1" class="ph-refer-friend-v1-default-default" instance-id="6iy90l">\r\n                            \r\n                    </div>\r\n                    <ul data-ph-at-id="jobs-list" data-ph-at-widget-data-count="${jobResults.length}">\r\n                        <li class="jobs-list-item" repeat.for="eachJob of jobResults" show.bind="maxDisplayCount > $index" data-ph-at-id="jobs-list-item">\r\n                            <a ph-tevent="recommended_job_click" ref="linkEle" href="${getUrl(linkEle, \'job\', eachJob)}" class="job-link-linkedin">\r\n                                <div class="information">\r\n                                    <h2 class="job-title" if.bind="eachJob.title">\r\n                                        Job Title : ${eachJob.title}\r\n                                    </h2>\r\n                                    <div repeat.for="eachAttr of jobAttrs">\r\n                                        <span class="job-location" if.bind="eachAttr.name.indexOf(\'location\') != -1">\r\n                                            <b>Job Location</b> : ${eachJob.location}\r\n                                        </span>\r\n                                        <span class="job-category" if.bind="ea">${eachJob.category}</span>\r\n                                        <span class="job-industry" if.bind="eachJob.industry && eachAttr.name.indexOf(\'industry\')!= -1">\r\n                                            <b>Industry:</b> : ${eachJob.industry}\r\n                                        </span>\r\n                                        <span class="job-id" if.bind="eachJob.jobId &&  eachAttr.name.indexOf(\'jobId\')!= -1">\r\n                                            <span>\r\n                                                <ppc-content key="jobIdText" data-ph-at-id="jobid-text">\r\n                                                    <b>Job ID:</b>\r\n                                                </ppc-content>\r\n                                            </span>\r\n                                            ${eachJob.jobId}\r\n                                        </span>\r\n                                        <span class="job-type" show.bind="eachJob.name.type && eachAttr.indexOf(\'type\')!= -1">\r\n                                            <span>\r\n                                                <ppc-content key="jobtype" data-ph-at-id="jobtype-text">\r\n                                                    Job Type:\r\n                                                </ppc-content>\r\n                                            </span>\r\n                                            ${eachJob.type}\r\n                                        </span>\r\n                                        <span class="job-category" show.bind="eachJob.category && eachAttr.name.indexOf(\'category\')!= -1">\r\n                                                <span>\r\n                                                    <ppc-content key="jobCategory" data-ph-at-id="jobCategory-text">\r\n                                                        Job Category: \r\n                                                    </ppc-content>\r\n                                                </span>\r\n                                                ${eachJob.category}\r\n                                            </span>\r\n                                        <span class="job-postdate" if.bind="eachJob.postedDate  && eachAttr.name.indexOf(\'postedDate\')!= -1">\r\n                                            <span>\r\n                                                <ppc-content key="jobPostedDate1" data-ph-at-id="jobposteddate-text">\r\n                                                    <b> Posted on: </b>\r\n                                                </ppc-content>\r\n                                            </span>\r\n                                            ${eachJob.postedDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\r\n                                        </span>\r\n                                        <span class="job-expirydate" if.bind="eachAttr.name.indexOf(\'expiryDate\')!= -1 && eachJob.expiryDate">\r\n                                            <b>Job Expiry Date</b> : ${eachJob.expiryDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\r\n                                        </span>\r\n        \r\n                                        <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\')!= -1">\r\n                                            <li>\r\n                                                <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\r\n                                                 data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\r\n                                                 class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\r\n                                                 id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\r\n                                                 data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\r\n                                                    <span>\r\n                                                        <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\r\n                                                    </span> ${eachJob.multi_location.length}\r\n                                                    <span>\r\n                                                        <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\r\n                                                    </span>\r\n                                                    <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\r\n                                                </button>\r\n                                                <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\r\n                                                    <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\r\n                                                     data-ph-at-job-location-text="${eachLocation}">\r\n                                                        ${eachLocation}\r\n                                                    </li>\r\n                                                </ul>\r\n                                            </li>\r\n                                        </ul>\r\n                                    </div>\r\n                                    <p class="job-description" innerhtml.bind="eachJob.descriptionTeaser | sanitizeHTML" data-ph-at-id="jobdescription-text"></p>\r\n                                    <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\') != -1">\r\n                                        <li>\r\n                                            <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\r\n                                             data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\r\n                                             class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\r\n                                             id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\r\n                                             data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\r\n                                                <span>\r\n                                                    <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\r\n                                                </span> ${eachJob.multi_location.length}\r\n                                                <span>\r\n                                                    <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\r\n                                                </span>\r\n                                                <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\r\n                                            </button>\r\n                                            \x3c!--dropView used to toggle toggleMultiLocationView based on item click: js dependent --\x3e\r\n                                            <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\r\n                                                <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\r\n                                                 data-ph-at-job-location-text="${eachLocation}">\r\n                                                    ${eachLocation}\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            </a>\r\n                            <div repeat.for="eachAction of jobActions">\r\n                                <div if.bind="eachAction.name == \'applyNow\'">\r\n                                    <a ph-tevent="from_data_attribute" data-ph-tevent-name="${eachJob.actionEventName}" href.bind="eachJob.actionUrl" target.bind="eachJob.externalApply!=\'undefind\' && eachJob.externalApply && !clickTojd ? \'_blank\' : \'_self\'"\r\n                                     class="btn plain-button apply-btn" data-ph-at-id="apply-link" data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" data-ph-tevent-attr-trait14="${eachJob.category}">\r\n                                        <ppc-content key="jobApplyActionLink" data-ph-at-id="apply-text">Apply Now</ppc-content>\r\n                                    </a>\r\n                                </div>\r\n                                <div if.bind="eachAction.name == \'shareJob\'">\r\n                                    <section class="ph-widget" instance-id="6ty93l">\r\n                                        <div as-element="ph-social-share-v3" detail-obj.bind="eachJob"\r\n                                        share-option="google-plus,facebook,twitter,linkedin" instance-id="6ty93l">\r\n                                        </div>\r\n                                    </section>\r\n                                    <section class="ph-widget" instance-id="1gd0h6">\r\n                                        <div as-element="ph-email-job-v1" class="ph-email-job-v1-default-default" data-widget="ph-email-job-v1" view="default" is-popup-reqd="true" \r\n                                        instance-id="1gd0h6">\r\n                                        </div>\r\n                                    </section>\r\n                                </div>\r\n                                <div if.bind="eachAction.name == \'refer\'">\r\n                                    <button class="refer-friend-button" click.delegate="handleReferJob()" data-ph-at-id="refer-friend-button" aria-label="Refer ${job.title}"\r\n                                        role="button" key-role="btnRole" aria-expanded="${showPopup ? \'true\' : \'false\'}" aria-haspopup="true">\r\n                                        <ppc-content key="referButtonText" data-ph-at-id="refer-friend-button-text">\r\n                                            REFER\r\n                                        </ppc-content>\r\n                                    </button>\r\n                                </div>\r\n                                <div if.bind="eachAction.name == \'addToCart\'">\r\n                                    <div class="savejob-checkbox" if.bind="bulkcart == true">\r\n                                        <label for="save-${eachJob.jobSeqNo}" class="${eachJob.inProgress ? \'disabled\' : \'\'}">\r\n                                            <input type="checkbox" id="save-${eachJob.jobSeqNo}" disabled.bind="eachJob.inProgress" ph-tevent="job_added_to_jobcart"\r\n                                                checked.bind="eachJob.isJobSaved" change.delegate="handleSaveJob(eachJob)" title="${eachJob.isJobSaved === false ? \'Save Job\': \'Saved Job\'}">\r\n                                            <span class="label-content" if.bind="eachJob.isJobSaved === false">\r\n                                                <i class="icon icon-star-empty"></i>\r\n                                                <ppc-content key="literal-1487954993542-22">Save</ppc-content>\r\n                                            </span>\r\n                                            <span class="label-content" if.bind="eachJob.isJobSaved === true">\r\n                                                <i class="icon icon-star"></i>\r\n                                                <ppc-content key="literal-1487954993542-23">Saved</ppc-content>\r\n                                            </span>\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                                <div if.bind="eachAction.name == \'removeFromCart\'">\r\n                                    <a href="javascript:void(0)" click.delegate="deleteJobFromCart(eachJob)" class="favourite" data-ph-at-id="job-remove-link">\r\n                                        <i class="icon icon-delete">Delete</i>\r\n                                    </a>\r\n                                </div>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="phs-widget-footer" if.bind="seemoretext" data-ph-at-id="navigation">\r\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeMore\'"\r\n                         click.trigger="seemore()" title="See more recommended jobs" key-title="seemore-link-title" data-ph-at-id="seemore-link">\r\n                            <ppc-content key="seeMoreText" data-ph-at-id="seemore-text">See more </ppc-content>\r\n                            <i class="icon icon-down-arrow" aria-hidden="true"></i>\r\n                        </a>\r\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === false"\r\n                         click.trigger="seeLess()" title="See less recommended jobs" key-title="seeless-link-title" data-ph-at-id="seeless-link">\r\n                            <ppc-content key="seeLessText" data-ph-at-id="seeless-text">See less </ppc-content>\r\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                        </a>\r\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeNext\'"\r\n                         click.trigger="seeNext()" title="See next recommended jobs" key-title="seenext-link-title" data-ph-at-id="seenext-link">\r\n                            <ppc-content key="seeNextText" data-ph-at-id="seenext-text">See next</ppc-content>\r\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                        </a>\r\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeEvenMore\'"\r\n                         click.trigger="seeEvenMore()" title="See even more recommended jobs" key-title="seeevenmore-link-title" data-ph-at-id="seeevenmore-link">\r\n                            <ppc-content key="seeEvenMoreText" data-ph-at-id="seeevenmore-text">See even more</ppc-content>\r\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="no-data-view" show.bind="showErrorMsg" data-ph-at-id="nodata-block">\r\n                    <p>\r\n                        <ppc-content key="noRecomJobsInfoText" data-ph-at-id="nodata-text">\r\n                            No recommendations found\r\n                        </ppc-content>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-find-your-fit-container-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"uploadCvMergeFlow",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeySocialProfile:"mergedProfileV2",ddoKeyEagerLoad:"eagerLoadFyfSession",ddoKeyDeleteResume:"removeProfile",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyLogout:"jwtLogout",ddoKeyStepConfig:"fyfConfig",ddoKeyFetchFitScore:"fetchFitScore",jobDetailDDOKey:"jobDetail",ddoKeyFitScoreSettings:"fitScoreSettings",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyLocations:"fyfLocations",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKeyResumeTempResume:"removeTempResume"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e?e[t]:{}})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.FindYourFitContainerService=n});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++){t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};define("v1/ph-resume-info-confirmation",["require","exports","./ph-find-your-fit-container-config"],function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,o){this.jobTitles={},this.workExperience={},this.preferredLocation={},this.skills={},this.experienceData=[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}],this.fyf=e,this.elementTag=t,this.element=o,this.populateResumeData(this.fyf.profileData),this.populateStepData(this.fyf.stepData)}return e.prototype.populateResumeData=function(e){this.getResumeTitles(e),this.getResumeWorkExperience(e),this.getResumeSkills(e),this.getResumeLocations(e)},e.prototype.populateStepData=function(e){var t=this;e&&e.steps&&e.steps.forEach(function(e){t.fyf.resumeConformationSteps&&e.stepType&&t.fyf.resumeConformationSteps.includes(e.stepType)&&(t[e.stepType]=t[e.stepType]||{},t[e.stepType]=__assign({},t[e.stepType],e)),"recentTitle"==e.stepType&&(t.jobTitles=t.jobTitles||{},t.jobTitles=__assign({},t.jobTitles,e))})},e.prototype.getResumeTitles=function(e){var t=this;this.jobTitles={},this.jobTitles.selectedTitles=[],e&&e.jobTitles?e.jobTitles.forEach(function(e){t.pushData(t.jobTitles.selectedTitles,e)}):e&&e.experience&&e.experience.forEach(function(e){e&&e.jobTitle&&t.pushData(t.jobTitles.selectedTitles,e.jobTitle)})},e.prototype.getResumeWorkExperience=function(e){var t=this;if(this.workExperience={},e&&e.workExperience)this.experienceData.forEach(function(o){e.workExperience.displayName==o.displayName&&(t.workExperience.selectedExp=o)});else if(e&&e.experience){var o=0;e.experience.forEach(function(e){if(e&&e.startDate&&e.endDate){var i=t.getWorkDurationInMonths(e.startDate,e.endDate);i>0&&(o+=i)}}),o>0&&(o=Math.floor(o/12)||0,this.experienceData.forEach(function(e){o>=e.min&&o<=e.max&&(t.workExperience.selectedExp=e)}))}},e.prototype.getResumeSkills=function(e){var t=this;this.skills={},this.skills.selectedSkills=[],e.skills&&e.skills.forEach(function(e){t.pushData(t.skills.selectedSkills,e)}),this.fetchSuggestedSkills()},e.prototype.getResumeLocations=function(e){var t=this;this.preferredLocation={},this.preferredLocation.selectedLocations=[],this.preferredLocation.preferredLocations=[],e&&e.preferredLocation?e.preferredLocation.forEach(function(e){e.location_display&&-1==t.preferredLocation.selectedLocations.indexOf(e.location_display)&&(t.preferredLocation.preferredLocations.push(location),t.preferredLocation.selectedLocations.push(e.location_display))}):e&&e.experience&&e.experience.forEach(function(e){if(e&&e.location){var o={},i=t.getLocationName(e.location,!0),n=t.getLocationName(e.location);n&&i&&(o.location_display=i,o.standardlocation=n,o.latlong={},-1==t.preferredLocation.selectedLocations.indexOf(i)&&(t.preferredLocation.preferredLocations.push(o),t.preferredLocation.selectedLocations.push(i)))}})},e.prototype.getLocationName=function(e,t){var o="";return(e.city||e.state||e.country)&&(e.city&&(o+=this.toTitleCase(e.city)),e.state&&(o=o?o+","+(t?" ":""):o,o+=this.toTitleCase(e.state)),e.country&&(o=o?o+","+(t?" ":""):o,o+=this.toTitleCase(e.country))),o},e.prototype.toTitleCase=function(e){return e=e||"",e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},e.prototype.getWorkDurationInMonths=function(e,t){var o=0;try{var i=0,n=0;e.year&&t.year&&(i=parseInt(t.year)-parseInt(e.year)),e.month&&t.month&&(n=parseInt(t.month)-parseInt(e.month))<0&&(i--,n+=12),i>0&&(n+=12*i),o=n}catch(e){}return o},e.prototype.getJobTitles=function(){var e=this,t=this.jobTitles.value;if(t.length){var i={};return i.keywords=t,i.size=this.jobTitles&&this.jobTitles.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,o.WidgetConfig.v1.ddoKeyRecentTitles,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.jobTitles.searchTitles=t.data.results:e.jobTitles.searchTitles=[],e.jobTitles.showDropDown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.jobTitles.searchTitles},function(e){new Error(e)})}},e.prototype.fetchSkills=function(){var e=this,t=this.skills.value||"";if(t.length){var i={},n=this.skills.selectedSkills||[];return i.keywords=t,i.size=this.skills&&this.skills.size||10,i.addedSkills=n.length?n:[],this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,o.WidgetConfig.v1.ddoKeySkills,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.skills.skillsList=t.data.results:e.skills.skillsList=[],e.skills.showSkillsDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.skills.skillsList},function(e){new Error(e)})}},e.prototype.fetchSuggestedSkills=function(){var e=this,t={};t.titles=this.jobTitles.selectedTitles||[],t.categories=this.fyf.profileData&&this.fyf.profileData.categories||[],t.skills=this.skills.selectedSkills||[],t.size=7,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,o.WidgetConfig.v1.ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.skills=e.skills||{},e.skills.suggestedSkills=t.data.results)})},e.prototype.selectSuggestions=function(e,t){var o=this;if(this.skills.selectedSkills=this.skills.selectedSkills||[],-1==this.skills.selectedSkills.indexOf(e)){this.pushData(this.skills.selectedSkills,e,!0),this.pushData(this.skills.selected_skills,e);var i=e+" skill added";if(this.fyf.addSelectionRemovalSronly(i),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var n=this.element.querySelectorAll("#suggested-skills li");t<this.skills.suggestedSkills.length-1?n[t+1]&&n[t+1].firstElementChild&&setTimeout(function(){n[t+1].firstElementChild.focus()},200):n[t-1]&&n[t-1].firstElementChild&&setTimeout(function(){n[t-1].firstElementChild.focus()},200)}setTimeout(function(){o.skills.suggestedSkills.splice(t,1)},200)}},e.prototype.fetchLocations=function(){var e=this,t=this.preferredLocation.value||"";if(t.length){var i=this.preferredLocation&&this.preferredLocation.locationKey||"city",n=i.split(","),a={};return a.keywords=t,a.size=this.preferredLocation&&this.preferredLocation.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,o.WidgetConfig.v1.ddoKeyLocations,a).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.preferredLocation.locationsList=[],t.data.results.forEach(function(t,o){n.find(function(e){return e.trim()==t.type})&&e.preferredLocation.locationsList.push(t)})):e.preferredLocation.locationsList=[],e.preferredLocation.showLocationDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.preferredLocation.locationsList})}},e.prototype.pushData=function(e,t,o){if(e){var i=!1;e.forEach(function(e){e&&t&&e.trim().toLowerCase()==t.trim().toLowerCase()&&(i=!0)}),!i&&(o?e.unshift(t):e.push(t))}},e.prototype.getIndex=function(e,t){var o=-1;return e&&e.forEach(function(e,i){e.title==t&&(o=i)}),o},e.prototype.loadPreviousStep=function(){var e=this.fyf.activeStepIndex-2;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])},e.prototype.loadNextStep=function(){var e=this,t=this.getPayloadBasedOnStep();t&&Object.keys(t).length?(this.fyf.unhideLoader(),t.editType="mergeProfile",t.flowType="upload_resume",this.fyf.resumeInfoSaveError=!0,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,o.WidgetConfig.v1.ddoKeyCiProfileUpdate,t).then(function(t){t&&"success"==t.status?e.next():e.fyf.resumeInfoSaveError=!0,e.fyf.hideLoader()},function(t){new Error(t),e.fyf.hideLoader()})):this.next()},e.prototype.next=function(){if(this.fyf.resumeConformationSteps&&this.fyf.activeStepIndex==this.fyf.resumeConformationSteps.length)this.fyf.closeResumeInfoPopup(!0);else{var e=this.fyf.activeStepIndex;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])}},e.prototype.getPayloadBasedOnStep=function(){var e={};return"jobTitles"==this.fyf.activeStep?(e.profile={},e.stepType="jobTitles",e.profile.jobTitles=this.jobTitles.selectedTitles||[]):"skills"==this.fyf.activeStep?(e.profile={},e.stepType="skills",e.profile.skills=this.skills.selectedSkills||[]):"workExperience"==this.fyf.activeStep?this.workExperience.selectedExp&&Object.keys(this.workExperience.selectedExp).length&&(e.profile={},e.stepType="workExperience",e.profile.workExperience=this.workExperience.selectedExp):"preferredLocation"==this.fyf.activeStep&&(e.profile={},e.stepType="preferredLocation",e.profile.preferredLocation=this.preferredLocation.preferredLocations||[]),e},e.prototype.getFieldOptions=function(e){var t="";switch(e){case"jobTitles":return t=this.jobTitles.value||"",t.length?this.getJobTitles():(this.jobTitles.searchTitles=[],[]);case"skills":return t=this.skills.value||"",t.length?this.fetchSkills():(this.skills.skillsList=[],[]);case"preferredLocation":return t=this.preferredLocation.value||"",t.length?this.fetchLocations():(this.preferredLocation.locationsList=[],this.preferredLocation.locationsList)}},e.prototype.getActiveIndex=function(e){var t=this,o=-1;switch(e){case"jobTitles":return o=this.getIndex(this.jobTitles.searchTitles,this.jobTitles.value),this.fyf.updateResults(),o;case"skills":return o=this.getIndex(this.skills.skillsList,this.skills.value),this.fyf.updateResults(),o;case"preferredLocation":return this.preferredLocation.locationsList&&this.preferredLocation.locationsList.forEach(function(e,i){e.location_display==t.preferredLocation.value&&(o=i)}),this.fyf.updateResults(),o}},e.prototype.setFieldValue=function(e,t){var o=this;switch(e){case"jobTitles":var i=this.jobTitles;if(i.value="",i.searchTitles.length&&i.searchTitles[t]){var n=i.searchTitles[t].title;i.searchTitles[t].isTitleSelected=!0,i.selectedTitles=i.selectedTitles||[],this.pushData(i.selectedTitles,n,!0),i.showDropDown=!1,i.selected_jobTitles=i.selected_jobTitles||[],this.pushData(i.selected_jobTitles,n);var a=n+" title added";this.fyf.addSelectionRemovalSronly(a)}else if(i.value&&-1==t){var r=!1;if(i.searchTitles.length)for(var s=0,l=i.searchTitles;s<l.length;s++){var c=l[s];c.title.toLowerCase()===i.value.toLowerCase()&&(c.isTitleSelected=!0,this.pushData(i.selectedTitles,i.value,!0),i.selected_jobTitles=i.selected_jobTitles||[],this.pushData(i.selected_jobTitles,i.value),r=!0)}var a=i.value+" title added";this.fyf.addSelectionRemovalSronly(a),r||(this.pushData(i.selectedTitles,i.value,!0),i.typed_jobTitles=i.typed_jobTitles||[],this.pushData(i.typed_jobTitles,i.value))}break;case"skills":var p=void 0;if(this.skills.skillsList.length&&this.skills.skillsList[t]){if(p=this.skills.skillsList[t].skill,this[e].value=this[e].skillsList[t].skill,this[e].selectedSkills&&-1==this[e].selectedSkills.indexOf(p.toLowerCase())){this[e].selectedSkills.unshift(p),this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(p);var a=p+" skill added";this.fyf.addSelectionRemovalSronly(a),setTimeout(function(){o.skills.value=""
},150)}}else if(this[e].value.length&&-1==t){var d=this.skills.value,r=!1;if(this.skills.skillsList.length)for(var h=this.skills.skillsList,f=0,u=h;f<u.length;f++){var g=u[f];g.skill.toLowerCase()===d.toLowerCase()&&(this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(d),r=!0)}if(!r){var m=void 0;this.skills.selected_skills&&this.skills.selected_skills.length&&(this.skills.selected_skills=this.skills.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.skills.selected_skills.indexOf(d.toLowerCase())&&(m=!0)),m||(this.skills.typed_skills=this.skills.typed_skills||[],this.skills.typed_skills.push(d))}if(-1==this[e].selectedSkills.indexOf(d)){this[e].selectedSkills.unshift(d);var a=d+" skill added";this.fyf.addSelectionRemovalSronly(a),setTimeout(function(){o.skills.value=""},150)}var y=this.skills.suggestedSkills&&this.skills.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==d.toLowerCase()});-1!=y&&this.skills.suggestedSkills&&this.skills.suggestedSkills.splice(y,1)}this.fetchSuggestedSkills(),this[e].showSkillsDropdown=!1;break;case"preferredLocation":if(this.preferredLocation.locationsList.length&&this.preferredLocation.locationsList[t]){var v=this.preferredLocation.locationsList[t];this.populateSelectedData(e,v)}}},e.prototype.populateSelectedData=function(e,t){switch(e){case"preferredLocation":var o={},i=this.preferredLocation.selectedLocations||[];if(-1==i.indexOf(t.location_display)){o.standardlocation=t.standardlocation||"",o.location_display=t.location_display||"",o.latlong=t.latlong||{},this.preferredLocation.preferredLocations=this.preferredLocation.preferredLocations||[],this.preferredLocation.preferredLocations.unshift(o);var n=t.location_display+"location added";this.fyf.addSelectionRemovalSronly(n),this.preferredLocation.selectedLocations=this.preferredLocation.selectedLocations||[],this.preferredLocation.selectedLocations.unshift(t.location_display),t.isLocationSelected=!0}else{var a=i.indexOf(t.location_display);this.preferredLocation.preferredLocations[a]=t}this.preferredLocation.value="",this.preferredLocation.showLocationDropdown=!1}},e.prototype.removeSelectedData=function(e,t){var o=this;switch(e){case"jobTitles":var i=this.jobTitles.selectedTitles[t]+" title removed";if(this.fyf.addSelectionRemovalSronly(i),1==this.jobTitles.selectedTitles.length)this.fyf.focusElement(".ph-a11y-job-title input",200);else{var n=this.element.querySelectorAll("#selected-titles li");t<this.jobTitles.selectedTitles.length-1?n[t+1].firstElementChild&&setTimeout(function(){n[t+1].firstElementChild.focus()},200):n[t-1].firstElementChild&&setTimeout(function(){n[t-1].firstElementChild.focus()},200)}var a=this.jobTitles.searchTitles&&this.jobTitles.searchTitles.findIndex(function(e){return e.title&&e.title.trim().toLowerCase()==o.jobTitles.selectedTitles[t]&&o.jobTitles.selectedTitles[t].trim().toLowerCase()});if(setTimeout(function(){o.jobTitles.selectedTitles.splice(t,1)},200),-1!=a&&this.jobTitles.searchTitles&&(this.jobTitles.searchTitles[a].isTitleSelected=!1),this.jobTitles.selected_jobTitles&&this.jobTitles.selected_jobTitles.length){var r=this.jobTitles.selected_jobTitles.findIndex(function(e){return e==o.jobTitles.selectedTitles[t]});-1!=r&&this.jobTitles.selected_jobTitles.splice(r,1)}if(this.jobTitles.typed_jobTitles&&this.jobTitles.typed_jobTitles.length){var r=this.jobTitles.typed_jobTitles.findIndex(function(e){return e==o.jobTitles.selectedTitles[t]});-1!=r&&this.jobTitles.typed_jobTitles.splice(r,1)}break;case"skills":var s=this.skills.skillsList&&this.skills.skillsList.findIndex(function(e){return e.skill==o.skills.selectedSkills[t]});-1!=s&&this.skills.skillsList&&(this.skills.skillsList[s].isSkillSelected=!1);var l=this.skills.selectedSkills[t]+" skill removed";if(this.fyf.addSelectionRemovalSronly(l),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var c=this.element.querySelectorAll("#selected-skills li");t<this.skills.selectedSkills.length-1?c[t+1].firstElementChild&&setTimeout(function(){c[t+1].firstElementChild.focus()},200):c[t-1].firstElementChild&&setTimeout(function(){c[t-1].firstElementChild.focus()},200)}if(setTimeout(function(){o.skills.selectedSkills.splice(t,1)},200),this.skills.selected_skills&&this.skills.selected_skills.length){var p=this.skills.selected_skills.findIndex(function(e){return e==o.skills.selectedSkills[t]});-1!=p&&this.skills.selected_skills.splice(p,1)}if(this.skills.typed_skills&&this.skills.typed_skills.length){var p=this.skills.typed_skills.findIndex(function(e){return e==o.skills.selectedSkills[t]});-1!=p&&this.skills.typed_skills.splice(p,1)}break;case"preferredLocation":var d=this.preferredLocation.selectedLocations[t]+" location removed";if(this.fyf.addSelectionRemovalSronly(d),1==this.preferredLocation.selectedLocations.length)this.fyf.focusElement(".preferred-location-block input",200);else{var h=this.element.querySelectorAll("#selected-locations li");t<this.preferredLocation.selectedLocations.length-1?h[t+1].firstElementChild&&setTimeout(function(){h[t+1].firstElementChild.focus()},200):h[t-1].firstElementChild&&setTimeout(function(){h[t-1].firstElementChild.focus()},200)}var f=this.preferredLocation.locationsList&&this.preferredLocation.locationsList.findIndex(function(e){return e.location_display==o.preferredLocation.selectedLocations[t]});setTimeout(function(){o.preferredLocation.preferredLocations.splice(t,1),o.preferredLocation.selectedLocations.splice(t,1)},200),-1!=f&&this.preferredLocation.locationsList&&(this.preferredLocation.locationsList[f].isLocationSelected=!1)}},e}();t.ResumeInfoConfirmation=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-container-config","./ph-find-your-fit-container-service","aurelia-event-aggregator","./ph-resume-info-confirmation"],function(e,t,o,i,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-find-your-fit-container-v1",c="edit_profile_information",p="resume_upload_click",d="upload_new_file_click",h="getUserProfileData",f={upload_resume_flow:"upload_resume",find_your_fit:"find_your_fit",candidate_profile:"candidateProfile"},u="fyf_options_closed",g={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},m=["categories","subcategories","preferredLocation","skills","recentTitle","workExperience"],y=["jobTitles","skills","workExperience","preferredLocation"],v=function(e){function t(t,o,i,n,a){var r=e.call(this,t,o,l)||this;return r.element=t,r.commonService=o,r.findYourFitContainerService=i,r.eventAggregator=n,r.localStorage=a,r.fileCtx={},r.isDialogOpen=!1,r.isLoggedIn=!1,r.isAnonymous=!1,r.isSiteLogin=!1,r.resumeData={},r.profileData={},r.currentStep="chooseStep",r.isDropdownOpen=!1,r.uploadResumeStatus=!0,r.mergeRequired=!1,r.isActiveSession=!1,r.isFyfEnabled=!1,r.fyfInfoData={},r.resumeUploadFlow=!1,r.isDeleteResume=!1,r.isSocialLogin=!1,r.contactDetails={},r.contactDetailsErrorObj={},r.isContactDetailsConfigured=!1,r.contactDetailsPopup=!1,r.contactDetailsFailure=!1,r.contactDetailsFirstTime=!1,r.isOptInChoosen=!1,r.isProfileJobsAvailable=void 0,r.isFileSupported=!1,r.stepsData={},r.fyfSocialOptions={},r.isProfileSyncUpdateFirstTime=!1,r.disableUploadResumeFlow=!1,r.disableSocialLogin=!1,r.trackingLocally=!0,r.subscriptions=[],r.isCandidateHomeEnabled=!1,r.candidatePopupData={},r.candidateLoginPopup=!1,r.isProfileDataExists=!1,r.userState="",r.showMatchScoreButton=!1,r.jobFits={},r.enabledFits={},r.jobSeqNo="",r.fitLevel=void 0,r.fitData={},r.showFitData=!1,r.jobFitsSettConfig={},r.isJobFitEnabled=!1,r.uploadSronly=!1,r.uploadingSronly=!1,r.gdprConsent=!1,r.savePersonalInfo=!1,r.userConsentPopup=!1,r.acceptTerms=!1,r.termsError=!1,r.avoidBackDropFirstTime=!0,r.chooseSteps=!1,r.hideUserConsentCheckbox=!1,r.limitExceeded=!0,r.maxFileSize=2,r.resumeInfoConfirmation=!1,r.resumeInfoPopup=!1,r.activeStep="",r.activeStepIndex=0,r.resumeConformationSteps=[],r.previousActiveStep="",r.resultUpdated=!1,r.selectionRemovalSrText="",r.selectionRemovalSronly=!1,r.resumeInfoSaveError=!1,r.piiConsentError=!1,r.isDisabled=!1,r.consentPrefill=!0,r.handleDropdownOutsideScope=function(){var e=r.handleOutsideScopeEvents(event,"action-area");void 0!=e&&(r.isDropdownOpen=e)},r.closePopup=function(t){var o={widgetTag:l},i=r.profileData&&r.profileData.resumeName&&r.profileData.resumeName.split(".").pop();if(i&&(o.fileType=i),e.prototype.trackWidgetClick.call(r,c,o),r.isDialogOpen=!1,"uploadResume"==r.currentStep&&e.prototype.trackWidgetClick.call(r,u,{}),"find_your_fit"==t&&(r.isUserLoggedIn(),r.flowType=t,e.prototype.trackWidgetClick.call(r,u,{})),r.element.removeEventListener("keyup",r.handleEscape),r.contactDetailsPopup&&r.isAnonymous)return r.isCandidateHomeEnabled&&r.triggerSignUpPopup(!0),!r.isCandidateHomeEnabled&&!r.disableSocialLogin&&r.showSocialLoginPopup(),r.contactDetailsPopup=!1,void(r.contactDetailsFirstTime=!1);if(!r.uploadResumeStatus)return r.uploadResumeStatus=!0,r.isFileSupported=!1,e.prototype.closeDialogPopup.call(r),void(!r.isLoggedIn&&r.element.querySelector(".ph-popup-area")&&(r.currentStep="uploadResume",r.handleDialogModal()));r.destroyEventListeners(),r.currentStep="chooseStep";var n=r.element.querySelector(".user-profile-info");n&&n.removeAttribute("aria-hidden"),e.prototype.focusElement.call(r,".ph-a11y-start-btn",250),r.candidateLoginPopup&&(e.prototype.focusElement.call(r,".candidateHomeSignUp",100),r.candidateLoginPopup=!1),r.contactDetailsPopup=!1,r.isDropdownOpen=!1,r.isDeleteResume=!1,r.isFyfEnabled=!1,e.prototype.closeDialogPopup.call(r)},r.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||(r.resumeInfoPopup?r.closeResumeInfoPopup():r.userConsentPopup?r.closeUserConsentPopup():r.closePopup())},r.handleFileUploadStaus=function(t){e.prototype.unhideLoader.call(r),r.uploadResumeStatus||e.prototype.closeDialogPopup.call(r),"uploadResume"==r.currentStep&&r.element.querySelector(".ph-popup-area")&&(r.currentStep=""),r.uploadResumeStatus=!0,r.isFileSupported=!1,r.limitExceeded=!1,r.isDropdownOpen=!1,t&&"addedfile"==t.status&&"uploadResume"==r.currentStep?(r.handleUploadingSronly(),e.prototype.trackWidgetClick.call(r,p,{})):t&&"addedfile"==t.status&&(r.handleUploadingSronly(),e.prototype.trackWidgetClick.call(r,d,{})),t&&"success"==t.status&&t.data&&t.data.res?(r.resumeData=t.data,r.mergeRequired=!1,r.gdprConsent?r.triggerUserConsentPopup():(r.getCvMergeData(),r.destroyEventListeners(),r.getFlowType(f.upload_resume_flow))):(t&&"error"==t.status||"canceled"==t.status)&&(e.prototype.hideLoader.call(r),t.data&&"unsupported"==t.data.type&&(r.isFileSupported=!0),t.data&&"exceeds"==t.data.type&&(r.limitExceeded=!0),r.popupToShowUploadFailed())},r.closeDropDown=function(e,t){return"Enter"==e.key||13===e.keyCode||13===e.which?void(r.isDropdownOpen=!1):"keyup"==e.type||"focus"==e.type?(r.isDropdownOpen=!0,void clearTimeout(r.sortByTimer)):void(t?r.isDropdownOpen=!0:(r.sortByTimer&&clearTimeout(r.sortByTimer),r.sortByTimer=setTimeout(function(){r.isDropdownOpen&&(r.isDropdownOpen=!1)},250)))},r.handleOutsideScopeEvents=function(e,t){var o,i,n=e.target,a=!1;if(e.keyCode===g.RETURN||e.keyCode==g.TAB||void 0==e.keyCode)for(;n;)if(n=n.parentElement,!(i=n&&n.className)||i.constructor!=Array&&i.constructor!=String)n||(a=!0);else if(null==n||-1==i.indexOf(t))a=!0;else if(i.indexOf(t)>=0){a=!1;break}return(a||e.keyCode==g.ESC)&&(o=!1),o},r.destroyEventListeners=function(){var e=r.element.querySelector(".ph-a11y-after-close-focus-elem");e&&e.removeEventListener("click",r.closePopup,!0),document.removeEventListener("keyup",r.handleDropdownOutsideScope,!0)},r.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;r.isProfileSyncUpdateFirstTime||r.isLoggedIn||"contactInfo"==t.stepType||(r.flowType=f.find_your_fit,r.isProfileSyncUpdateFirstTime=!0,r.handleFyfStepFlow({context:f.find_your_fit,isLastStep:!0})),t&&"contactInfo"==t.stepType?r.isUserLoggedIn():(r.eventAggregator.publish(h,{context:"profile_Recom_jobs"}),r.commonService.raiseCustomEvent(h,{context:"profile_Recom_jobs"})),r.isLoggedIn||(r.isProfileSyncUpdateFirstTime=!1)},r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.subscribeToEventForExternalDepends(),this.getPiiConsentData();var o=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,l);o&&o.data&&o.data.job&&o.data.job.jobSeqNo&&(this.jobSeqNo=o.data.job.jobSeqNo),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.subscriptions.push(this.eventAggregator.subscribe(h,function(o){if("find_your_fit"==o.context&&(o.isLastStep||o.isFirstStep)&&t.handleFyfStepFlow(o),"candidateProfile"==o.context&&t.handleFyfStepFlow(o,o.widgetContext),"upload_resume"==o.context&&!t.savePersonalInfo&&t.gdprConsent){t.currentStep="chooseStep";var i=t.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(t,i,100)}})),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",function(e){e.jobs&&e.jobs.length?t.isProfileJobsAvailable=!0:t.isProfileJobsAvailable=!1})),document.addEventListener("ph:profileRecomData",function(e){e.detail&&e.detail.jobs&&e.detail.jobs.length?t.isProfileJobsAvailable=!0:t.isProfileJobsAvailable=!1});var i=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=i&&i.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(e){t.flowType="candidateProfile",t.profileData.profile=e,t.isAnonymous=!1})),this.flowType=this.commonService.getSessionParam("flowType"),this.maxFileSize=this.getResumeFileSize()||2,this.fileCtx={uploadUrl:"/fileCommonUpload",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:"",dk:"fileUpload",funRef:this.handleFileUploadStaus,funRefForClose:this.closeDropDown,maxFiles:1,maxFileSize:this.maxFileSize},this.isUserLoggedIn().then(function(e){t.avoidBackDropFirstTime=!1;var o=t.localStorage.getItem("fyfStepLandInfo");o&&(o.success||!o.success&&!t.isSocialLogin)?t.handleFindYourFit():o&&t.localStorage.removeItem("fyfStepLandInfo")}),document.addEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.addEventListener("keyup",this.handleDropdownOutsideScope,!0),this.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1,this.fyfInfoData.isOptInChoosen=this.isOptInChoosen,this.isOptinChanged();var a=this.element.getAttribute("fyf-steps");a?(this.stepsData=JSON.parse(a),this.fetchingFyfRootKeyValues(this.stepsData)):this.fetchFyfConfiguration(),this.trackingLocally=!0,this.userState=this.commonService.getSegmentedUserState&&this.commonService.getSegmentedUserState(),this.userState&&setTimeout(function(){t.handleDoubleContextIssue()},50)},t.prototype.handleDoubleContextIssue=function(){var e=this.element.querySelectorAll(".upload-resume-tile-container .resume-info .phs-heading");if(e.length>1){var t=e[0].querySelector("ppc-content"),o=t&&t.getAttribute("key"),i=e[1].querySelector("ppc-content"),n=i&&i.getAttribute("key");o&&n&&o===n&&e[0].classList.add("hide")}},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitContainerService.makeDDORequest(l,t).then(function(o){if(o&&o.status&&"success"==o.status&&o.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=o),e.piiConsentData=o.data;else{var i=e.commonService.getSiteSettings("piiConsentConfig");i&&(e.piiConsentData=JSON.parse(JSON.stringify(i)))}e.piiConsentData&&e.piiConsentData.length&&(e.gdprConsent=!0)})},t.prototype.fetchFyfConfiguration=function(){var e=this;this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(t){t&&t.data&&(e.stepsData=t.data,e.fetchingFyfRootKeyValues(t.data))})},t.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("jobWidgetFits")||{};if(this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l].jobFits||t.jobFits||{},this.jobFitsSettConfig=t.settings||{},this.getJobFits(),this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length)return new Promise(function(e,t){e({})});var o={},i={},a=void 0;return this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyFitScoreSettings,{avoidWidgetHideOnFail:!0}).then(function(t){o=t,o&&o.data&&(e.jobFitsSettConfig=o.data.settings||{},o.data.widgets&&o.data.widgets[l]&&(i=o.data.widgets[l],a=i.jobFits),e.jobFits=a||o.data.jobFits||{}),e.getJobFits()})},t.prototype.getJobFits=function(){var e=this;if(!this.jobFits||!this.jobFits.fits||!this.jobFits.fits.length){var t=this.commonService.getSiteSettings("jobWidgetFits")||{};this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l]||t||{}}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.display_name]=t}),this.jobFits.fits.length&&(this.showMatchScoreButton=!0,this.isJobFitEnabled=!0,this.getFitData())},t.prototype.getFitData=function(){var e=this,t={jobIdentifierList:[],outputFields:[],size:1};this.jobSeqNo&&t.jobIdentifierList.push(this.jobSeqNo),this.jobFits&&this.jobFits.fits.length?(this.jobFits&&this.jobFits.settings&&this.jobFits.settings.requiredFields&&this.jobFits.settings.requiredFields.length&&this.jobFits.settings.requiredFields.forEach(function(e){t.outputFields.push(e)}),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyFetchFitScore,t).then(function(t){if(e.showFitData=!0,t&&t.data&&t.data.jobFitScores){var o=t.data.jobFitScores;e.fitData=o[e.jobSeqNo],e.fitLevel=e.fitData&&e.fitData.fitLevel}})):this.showFitData=!0},t.prototype.fetchingFyfRootKeyValues=function(e){var t=this;if(this.stepsData.socialOptions&&"string"==typeof this.stepsData.socialOptions)try{this.stepsData.socialOptions=JSON.parse(this.stepsData.socialOptions)}catch(e){}this.fyfSocialOptions.socialOptions=e.socialOptions?e.socialOptions:"",this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent),e.gdprConsent&&"true"==e.gdprConsent?this.gdprConsent=!0:e.gdprConsent&&"partial"==e.gdprConsent?(this.gdprConsent=!0,this.savePersonalInfo=!0,this.hideUserConsentCheckbox=!0):this.gdprConsent=!1,this.resumeInfoConfirmation=!(!e.resumeInfoConfirmation||"true"!=e.resumeInfoConfirmation),this.resumeInfoConfirmation&&(this.gdprConsent=this.gdprConsent||!0,this.stepsData.steps&&(this.resumeConformationSteps=this.resumeConformationSteps||[],this.stepsData.steps.forEach(function(e){e.stepType&&(y.includes(e.stepType)||"recentTitle"==e.stepType)&&(t.resumeConformationSteps.includes(e.stepType)||"recentTitle"!=e.stepType?t.resumeConformationSteps.push(e.stepType):t.resumeConformationSteps.push("jobTitles"))})))},t.prototype.handleFyfStepFlow=function(t,o){var i=this;this.flowType=t.context,this.isFyfEnabled=!1,this.isDropdownOpen=!1;var n;o?this.isUserLoggedIn().then(function(){i.currentStep="chooseStep","fyf"!=o&&"fyf_container"!=o||(n=".ph-a11y-after-close-focus-elem",e.prototype.focusElement.call(i,n,500))}):this.isUserLoggedIn(t)},t.prototype.isOptinChanged=function(){this.fyfInfoData.isOptInChoosen=this.isOptInChoosen},t.prototype.isUserLoggedIn=function(t){var o=this;return this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(i){if(i.data&&i.data.isValidToken){o.jobSeqNo&&o.fetchFitScoreConfig();var n=i.data.isValidToken;o.isAnonymous=i.data.isAnonymous,n&&!o.isAnonymous&&o.isCandidateHomeEnabled&&(o.getFlowType("candidateProfile"),o.flowType="candidateProfile"),o.isActiveSession=i.data.isActiveSession,o.isSocialLogin=i.data.isSocialLogin,o.isSiteLogin=i.data.isSiteLogin,o.getProfileData(n,t),o.resumeUploadFlow&&o.eventAggregator.publish(h,{context:"upload_resume"}),o.commonService.raiseCustomEvent(h,{context:"upload_resume"})}else o.isOptInChoosen=!1,t&&o.handleFyfStepState(t),e.prototype.hideLoader.call(o);return i},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.handleFyfStepState=function(t){if(t.isFirstStep&&"Start"==t.isFirstStep&&!this.disableUploadResumeFlow)this.chooseUploadOrQuest();else{this.currentStep="chooseStep";var o=this.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(this,o,50)}"chooseStep"!=this.currentStep&&this.element.querySelector(".ph-popup-area")||(this.isDialogOpen=!1,e.prototype.closeDialogPopup.call(this))},t.prototype.checkIfProfileDataExits=function(e){var t=this;this.isProfileDataExists=!1,m.forEach(function(o){"workExperience"==o?e[o]&&Object.keys(e[o]).length&&(t.isProfileDataExists=!0):e[o]&&e[o].length&&(t.isProfileDataExists=!0)})},t.prototype.getProfileData=function(t,o){var i=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(n){n&&i.populateProfileData(n,t),i.checkForEmail(),o&&i.handleFyfStepState(o),i.resumeUploadFlow&&(i.gdprConsent&&i.savePersonalInfo||!i.gdprConsent)?i.resumeInfoConfirmation?i.handleResumeInfoFlow():i.handleAfterUploadFlow():i.resumeInfoConfirmation&&i.resumeUploadFlow?i.handleResumeInfoFlow(!0):(i.resumeUploadFlow=!1,i.contactDetailsPopup=!1,i.isDropdownOpen=!1,i.isDeleteResume=!1,!i.isLoggedIn&&(i.isFyfEnabled=!1)),e.prototype.hideLoader.call(i)},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.handleResumeInfoFlow=function(e){this.populateContactDetails(!0);var t="contactDetails";e&&(t=this.resumeConformationSteps[0]),t?(this.resumeInfo=new s.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(t)):this.handleResumeFlowAfterSubmit(),this.resumeUploadFlow=!1,this.contactDetailsPopup=!1,this.isDropdownOpen=!1},t.prototype.populateContactDetails=function(e){this.contactDetails=e?{}:this.contactDetails||{},Object.keys(this.contactDetails).length||(this.profileData.firstName&&(this.contactDetails.name=this.profileData.firstName),this.profileData.email&&(this.contactDetails.email=this.profileData.email),this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:""))},t.prototype.checkForEmail=function(){this.profileData.email&&this.profileData.email.length||(this.isContactDetailsConfigured=!0,this.contactDetailsErrorObj.phone={},this.contactDetailsErrorObj.phone.validField=!1,this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:"",this.phoneFieldValidation()))},t.prototype.populateProfileData=function(e,t){this.profileData=e,this.profileData.firstName&&this.profileData.lastName&&(this.profileData.firstName=this.profileData.firstName+" "+this.profileData.lastName),this.isContactDetailsConfigured=!1,this.contactDetails={},this.flowType=this.flowType||this.profileData.flowType,t&&this.isSiteLogin&&!this.profileData.flowType?this.isLoggedIn=!1:this.isLoggedIn=t,this.isSocialLogin&&!this.flowType&&(this.flowType="find_your_fit"),this.socialProvider=e.socialProvider,this.checkIfProfileDataExits(this.profileData),this.isLoggedIn&&this.profileData.optIn&&(this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.consentPrefill&&this.piiConsentData.forEach(function(t){e&&e[t.type]&&(t.isChecked=!0)}),this.profileData.consentProfile&&(this.isLoggedIn=!1)},t.prototype.handleAfterUploadFlow=function(){var e=this;this.profileData.email&&this.profileData.email.length?this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup():(this.currentStep="",this.contactDetailsPopup=!0,this.showSuccessPopup(),setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},100)),this.contactDetailsFirstTime=!0,this.resumeUploadFlow=!1},t.prototype.handleUploadingSronly=function(){var e=this;this.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},1e3)},t.prototype.getCvMergeData=function(){var t=this,o={};this.resumeData&&this.resumeData.res&&"success"==this.resumeData.res.status&&this.resumeData.res.profile?(e.prototype.unhideLoader.call(this),o.profile=this.resumeData.res.profile,o.flowType=f.upload_resume_flow,this.gdprConsent&&(o.ignorePsInfo=!this.savePersonalInfo),this.profileData.profile||(this.profileData.profile={}),this.profileData.profile.hasOwnProperty("optIn")||this.gdprConsent||(o.profile.optIn=this.isOptInChoosen,this.profileData.profile.optIn=this.isOptInChoosen),this.gdprConsent&&(o.profile.optIn=this.savePersonalInfo),this.piiConsentData&&this.piiConsentData.length&&!this.piiConsentError&&(delete o.ignorePsInfo,this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKey,o).then(function(o){o&&"success"==o.status?(o.flowType&&(t.flowType=o.flowType),o.data&&o.data.merge?(t.mergeRequired=o.data.merge,e.prototype.hideLoader.call(t)):(t.isUserLoggedIn(),t.resumeUploadFlow=!0),t.uploadSronly=!0,setTimeout(function(){t.uploadSronly=!1},1e3)):(t.popupToShowUploadFailed(),e.prototype.hideLoader.call(t))},function(o){new Error(o),e.prototype.hideLoader.call(t)})):this.popupToShowUploadFailed()},t.prototype.handleDialogModal=function(){this.isDialogOpen=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.showSuccessPopup=function(){var e=this.element.querySelector(".user-profile-info");e&&e.setAttribute("aria-hidden","true"),this.handleDialogModal()},t.prototype.addModalPopup=function(t,o){var i=this;setTimeout(function(){var n="string"==typeof t?i.element.querySelector(t):t,a="string"==typeof o?i.element.querySelector(o):o;i.element.addEventListener("keyup",i.handleEscape),e.prototype.openDialogPopup.call(i,"ph-a11y-modal-area",n,a,void 0,void 0,void 0,!0)},0)},t.prototype.popupToShowUploadFailed=function(){this.uploadResumeStatus=!1,this.handleDialogModal()},t.prototype.toggleDropDown=function(){this.isDropdownOpen=!this.isDropdownOpen},t.prototype.handleFindYourFit=function(t){var o=this;if(this.destroyEventListeners(),this.isFyfEnabled=!0,this.currentStep="",this.getFlowType(f.find_your_fit),setTimeout(function(){o.element.querySelector(".ph-popup-area")&&(o.handleDialogModal(),o.fyfInfoData.stepPosition="0")},250),t&&"editProfile"==t){var i={widgetTag:"ph-find-your-fit-v1"};e.prototype.trackWidgetClick.call(this,c,i)}else t&&"profileQues"==t&&e.prototype.trackWidgetClick.call(this,"profile_questions_click",{})},t.prototype.chooseUploadOrQuest=function(t){var o=this;this.disableUploadResumeFlow?this.handleFindYourFit("profileQues"):(this.currentStep="uploadResume",t&&this.element.querySelector(".ph-popup-area")?this.handleDialogModal():(this.chooseSteps=!0,setTimeout(function(){o.chooseSteps=!1},2e3)),"event"!=t&&"popup"!=t||e.prototype.trackWidgetClick.call(this,"create_profile_click",{}),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",300))},t.prototype.getFlowType=function(e){var t={};t.flowType=e,this.commonService.getDDO(l,n.WidgetConfig.v1.ddoKeyEagerLoad,t).then(function(e){})},t.prototype.openDeletePopup=function(){this.isDeleteResume=!0,this.isDropdownOpen=!1,this.handleDialogModal()},t.prototype.deleteResume=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(o){if(o&&"success"==o.status){e.prototype.trackWidgetClick.call(t,"resume_remove_click",{}),t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,e.prototype.closeDialogPopup.call(t),t.isLoggedIn=!1,t.isAnonymous=!1,t.isActiveSession=!1,t.resumeData={},t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,e.prototype.focusElement.call(t,".ph-a11y-start-btn",100),setTimeout(function(){e.prototype.closeDialogPopup.call(t)},100);var i={};i.jobs=[],i.categories=[],t.eventAggregator.publish(h,i),t.commonService.raiseCustomEvent(h,i),t.jobSeqNo&&t.isJobFitEnabled&&(t.showMatchScoreButton=!0),t.showFitData=!1,t.raiseEventForExternalDepends(),t.getFlowType("")}else o&&"failure"==o.status&&(t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,e.prototype.closeDialogPopup.call(t),e.prototype.focusElement.call(t,".ph-a11y-after-close-focus-elem",150));e.prototype.hideLoader.call(t)},function(o){new Error(o),e.prototype.hideLoader.call(t)})},t.prototype.fieldValidation=function(e){switch(e){case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation();break;case"name":this.nameFieldValidation()}},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.contactDetails.email?e.test(this.contactDetails.email)?(this.contactDetailsErrorObj.email.error=!1,this.contactDetailsErrorObj.email.validField=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E102",this.contactDetailsErrorObj.email.error=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E101",this.contactDetailsErrorObj.email.error=!0)},t.prototype.phoneFieldValidation=function(){this.contactDetailsErrorObj.phone={};var e=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,3})|(\(?\d{2,3}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;if(this.contactDetails.phone){var t=this.contactDetails.phone.replace(/\./g,"");e.test(t)?(this.contactDetailsErrorObj.phone.validField=!0,this.contactDetailsErrorObj.phone.error=!1):(this.contactDetailsErrorObj.phone.code="E101",this.contactDetailsErrorObj.phone.error=!0,this.hasErrors=!0,this.contactDetailsErrorObj.phone.validField=!1)}},t.prototype.nameFieldValidation=function(){this.contactDetailsErrorObj.name={},this.contactDetails.name?(this.contactDetailsErrorObj.name.validField=!0,this.contactDetailsErrorObj.name.error=!1):(this.hasErrors=!0,this.contactDetailsErrorObj.name.validField=!1,this.contactDetailsErrorObj.name.error=!0)},t.prototype.validation=function(){this.hasErrors=!1,this.resumeInfoConfirmation&&this.nameFieldValidation(),this.emailFieldValidation(),this.phoneFieldValidation()},t.prototype.configureMoreDetails=function(){var t=this;if(this.validation(),this.hasErrors)setTimeout(function(){
t.resumeInfoConfirmation&&t.contactDetailsErrorObj.name.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-name",0):t.contactDetailsErrorObj.email.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-email",0):!t.contactDetailsErrorObj.email.error&&t.contactDetailsErrorObj.phone.error&&e.prototype.focusElement.call(t,".ph-a11y-form-control-config-phone",0)},50);else{e.prototype.unhideLoader.call(this);var o={};o.profile={},o.editType="mergeProfile",o.stepType="contactInfo",o.profile.email=this.contactDetails.email,this.contactDetails.phone&&(o.profile.phone=this.contactDetails.phone),this.resumeInfoConfirmation&&this.contactDetails.name&&(o.profile.name=this.contactDetails.name),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyCiProfileUpdate,o).then(function(o){if(o&&"success"==o.status)if(t.contactDetailsFailure=!1,t.isContactDetailsConfigured=!1,t.contactDetailsFirstTime=!1,t.profileData.email=t.contactDetails.email,t.resumeInfoPopup)t.changeActiveStep(t.resumeConformationSteps[0]);else{t.isCandidateHomeEnabled&&t.triggerSignUpPopup(),t.isCandidateHomeEnabled||(t.contactDetailsPopup=!1),t.isCandidateHomeEnabled||t.disableSocialLogin?t.closePopup():t.showSocialLoginPopup();var i={};i.jobs=[],i.categories=[],t.eventAggregator.publish(h,i),t.commonService.raiseCustomEvent(h,i)}else t.contactDetailsFailure=!0;e.prototype.hideLoader.call(t)})}},t.prototype.showSocialLoginPopup=function(){this.currentStep="userSignIn",this.showSuccessPopup()},t.prototype.openContactDetailsPopup=function(){var e=this;this.handleDialogModal(),this.contactDetailsPopup=!0,this.contactDetailsFailure=!1,this.contactDetailsFirstTime=!1,setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},200)},t.prototype.resetProfile=function(t){var o=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(e){e&&"success"==e.status&&!t?(o.jobSeqNo&&o.isJobFitEnabled&&(o.showMatchScoreButton=!0),o.showFitData=!1,o.raiseEventForExternalDepends(),o.isProfileSyncUpdateFirstTime=!1):e&&"success"==e.status&&o.getFlowType("")}),this.doSocialLogout()},t.prototype.doSocialLogout=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyLogout,{}).then(function(o){o&&"success"==o.status?t.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(o){if(e.prototype.hideLoader.call(t),o.data&&!o.data.isValidToken){t.isLoggedIn=o.data.isValidToken,t.isAnonymous=o.data.isAnonymous||!1,t.isActiveSession=o.data.isActiveSession||!1,t.isSocialLogin=o.data.isSocialLogin||!1,t.element.querySelector(".ph-popup-area")&&(t.currentStep="chooseStep"),t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,t.fyfInfoData.isOptInChoosen=t.isOptInChoosen,e.prototype.focusElement.call(t,".ph-a11y-start-btn",250);var i={};i.jobs=[],i.categories=[],t.eventAggregator.publish(h,i),t.commonService.raiseCustomEvent(h,i)}},function(e){new Error(e)}):e.prototype.hideLoader.call(t),e.prototype.raiseEvent.call(t,"social-logout",{})})},t.prototype.raiseEventForExternalDepends=function(){var e=new CustomEvent("ph:bot:removeProfile",{bubbles:!0,detail:{removeProfile:!0}});document.dispatchEvent(e)},t.prototype.triggerSignUpPopup=function(e){this.candidatePopupData={closeSelector:this.element.querySelector(".candidateHomeSignUp")||this.element.querySelector(".ph-a11y-after-close-focus-elem"),triggerPopup:!0,context:"fyf_container",profile:this.profileData,widgetRef:this},e&&this.contactDetailsFirstTime&&(this.candidatePopupData.resumeUploaded=!0),this.candidateLoginPopup=!0},t.prototype.triggerUserConsentPopup=function(){this.userConsentPopup=!0,this.termsError=!1,this.piiConsentError=!1,this.acceptTerms=!1,!this.hideUserConsentCheckbox&&(this.savePersonalInfo=!1),!this.consentPrefill&&this.piiConsentData&&this.piiConsentData.forEach(function(e){e&&(e.isChecked=!1)}),this.isButtonDisabled(),this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)})},t.prototype.closeUserConsentPopup=function(t){var o=this;this.userConsentPopup=!1,this.termsError=!1,e.prototype.closeDialogPopup.call(this),t||(this.element.querySelector(".ph-popup-area")?this.currentStep="chooseStep":(this.currentStep="",setTimeout(function(){o.currentStep="uploadResume"},0)),this.removeTempResume(),setTimeout(function(){e.prototype.focusElement.call(o,"#ph-dropzone"),e.prototype.hideLoader.call(o)},0))},t.prototype.removeTempResume=function(){var e=this.resumeData&&this.resumeData.res&&this.resumeData.res.profile&&this.resumeData.res.profile.resumeIdentifier||"";e&&this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyResumeTempResume,{resumeIdentifier:e}).then(function(e){})},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.submitResume=function(){var t=!1;this.hasPiiErrors(),t=this.piiConsentData&&this.piiConsentData.length?!this.piiConsentError:this.acceptTerms,t?(this.getCvMergeData(),this.destroyEventListeners(),this.getFlowType(f.upload_resume_flow),this.closeUserConsentPopup(!0)):(this.termsError=!0,!(this.piiConsentData&&this.piiConsentData.length)&&e.prototype.focusElement.call(this,".ph-a11y-terms-check-box",50))},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},t.prototype.subscribeToEventForExternalDepends=function(){var e=this;document.addEventListener("ph:site:removeProfile",function(t){e.resetProfile(!0)}),document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.removeEventListener("ph:site:removeProfile",this.resetProfile,!0),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.getResumeFileSize=function(){return this.commonService.getSiteSettings("resumeUploadFileSizeLimit")},t.prototype.triggerResumeInfoPopup=function(e){var t=this;this.resumeInfoPopup=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus"),setTimeout(function(){t.changeActiveStep(e)},50)},t.prototype.changeActiveStep=function(t){this.activeStep&&"cancel"!=this.activeStep&&(this.previousActiveStep=this.activeStep),this.activeStep=t,this.resumeInfo&&this.resumeInfo[this.previousActiveStep]&&(this.resumeInfo[this.previousActiveStep].value=""),t&&this.resumeConformationSteps&&-1!=this.resumeConformationSteps.indexOf(t)?this.activeStepIndex=this.resumeConformationSteps.indexOf(t)+1:this.activeStepIndex=0,e.prototype.focusElement.call(this,".ph-a11y-resume-heading",100)},t.prototype.closeResumeInfoPopup=function(t){if("cancel"!=this.activeStep&&!t)return void this.changeActiveStep("cancel");this.handleResumeFlowAfterSubmit(),this.resumeInfoPopup=!1,this.element.removeEventListener("keyup",this.handleEscape),e.prototype.closeDialogPopup.call(this)},t.prototype.addSelectionRemovalSronly=function(e){var t=this;this.selectionRemovalSrText=e,this.selectionRemovalSronly=!0,setTimeout(function(){t.selectionRemovalSronly=!1},100)},t.prototype.updateResults=function(){var e=this;this.resultUpdated=!0,setTimeout(function(){e.resultUpdated=!1},100)},t.prototype.handleResumeFlowAfterSubmit=function(){if(this.destroyEventListeners(),this.savePersonalInfo)this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup();else{this.currentStep="chooseStep";var t=this.element.querySelector(".user-profile-info");t&&t.removeAttribute("aria-hidden"),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",250)}},t.prototype.editResumeInfo=function(){this.populateContactDetails(),this.isDropdownOpen=!1;var e="contactDetails";!this.savePersonalInfo&&this.gdprConsent&&(e=this.resumeConformationSteps[0]),e&&(this.resumeInfo=this.resumeInfo||new s.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(e))},t.prototype.continueSitePersonalization=function(){},t.prototype.getFieldOptions=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getFieldOptions(e)},t.prototype.getActiveIndex=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getActiveIndex(e)},t.prototype.setFieldValue=function(e,t){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.setFieldValue(e,t)},t.prototype.clearFieldValue=function(){},t.prototype.handleSkip=function(t){this.resumeInfo.skills.suggestedSkills.length&&t?e.prototype.focusElement.call(this,"#suggested-skills-heading",0):this.activeStepIndex>1?e.prototype.focusElement.call(this,"#previous-popup-btn",0):e.prototype.focusElement.call(this,"#next-popup-btn",0)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(v=void 0!==i.CommonService&&i.CommonService)&&v||Object,a.FindYourFitContainerService,r.EventAggregator,"function"==typeof(b=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&b||Object])],t);var v,b}(i.PhenomWidget);t.FindYourFitContainer=v}),define("text!v1/ph-find-your-fit-container.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-find-your-fit-container-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-category-overview-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"categories",ddoKeyMasterData:"categoryMasterData",landingpageddoKey:"getBusinessRules",ddoKeyMasterDatav2:"categoryMasterDataV2",imVariantsConfigInfo:"imVariantsConfigInfo"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-category-overview-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.getDefaultImg=function(e){return this.commonService.getImageUrl(e)},e.prototype.getCategories=function(e,t){return this.commonService.getDDO(e,t,{field:"category",sub_field:"internalCategoryId"}).then(function(e){return e.categories&&e.categories.data&&e.categories.data.category})},e.prototype.getLandingPageCategories=function(e,t,o){var i=this,n={field:"category",sub_field:"internalCategoryId",condition:o.landingPageCondition,rk:o.rk};return new Promise(function(o,a){var r=i.commonService.getCachedDDO("eagerLoadCategories",e);r?o(r.data.category):i.commonService.getDDO(e,t,n).then(function(e){o(e.categories&&e.categories.data&&e.categories.data.category)})})},e.prototype.getSubCategories=function(e,t,o,i){return this.commonService.getDDO(e,t,o).then(function(e){return e[t].data.category[i]||[]})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CategoryOverviewService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(n,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v3/ph-category-overview",["require","exports","aurelia-framework","ph-common","./ph-category-overview-config","aurelia-event-aggregator","./ph-category-overview-service"],function(e,t,o,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v3",l="ph-category-overview-"+s,c="imVariantsConfigInfo",p=function(e){function t(t,o,i,a,r){var p=e.call(this,t,o,l)||this;return p.element=t,p.commonService=o,p.categoryOverviewService=i,p.localStorage=a,p.eventAggregator=r,p.mode="all",p.cardsPerSlide=4,p.cardsPerRow=3,p.rowCount=2,p.modeOptions={},p.type="category",p.categoryClass="",p.showErrorMsg=!1,p.isKeyPress=!1,p.isKeyPressEnabled=!1,p._defaultModeOptions={autoPlay:!1,interval:5e3,next:!0,prev:!0,indicators:!0,pauseOnHover:!1,loop:!1,viewMoreMode:"evenMore",navPosition:"center"},p._changeSlide=!0,p.cardStyleClassSuffix=3,p.gridColSize=12,p.viewEvenMoreCount=!0,p.activeCategory={},p.hideViewAll=!0,p.hideViewEvenMore=!0,p.hideViewNext=!0,p.hideLess=!0,p.placeVal="",p.subscriptions=[],p.jobTypesConditions={Internal:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("Internal")',External:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("External")'},p.imInit=function(){return __awaiter(p,void 0,void 0,function(){var t,o,i;return __generator(this,function(a){switch(a.label){case 0:return[4,this.categoryOverviewService.makeDDORequest(l,n.WidgetConfig[s][c],{})];case 1:return t=a.sent(),e.prototype.hideLoader.call(this),t.status&&"success"==t.status&&t.data&&t.data.values&&t.data.values.length&&-1!=(o=t.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(i=t.data.values[o].types)&&1==i.length&&(this.jobsType="internal"==i[0]?"Internal":"External"),this.init(),[2]}})})},p}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this._updateModeOptions(),this.handleMouseHover(),this.entriesPerSlide=this.cardsPerSlide,this.asDependent&&e.prototype.hideContainer.call(this)},t.prototype.created=function(){var t=this;this.localStorage.getItem("categories")||this.localStorage.setItem("categories",[]),"internal"==this.commonService.getSiteType()?this.imInit():this.init(),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.searchKeyword=o.searchKeyword,t.placeVal=o.placeVal,e.prototype.showContainer.call(t)}))},t.prototype.init=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length?(this.landingPageCondition=this.jobTypesConditions[this.jobsType],this.getLandingPageCategories()):this.rk&&this.rk.length?this.getLandingPageKey().then(function(t){t&&t.data&&t.data[e.rk]?(e.landingPageCondition=t.data[e.rk].condition,e.getLandingPageCategories()):e.handleError("")}):this.type&&"subCategory"==this.type?this.getSubCategories():this.getCategories()},t.prototype.getLandingPageKey=function(){if(this.rk&&this.rk.length>0){var e={},t={};return t.landingPageKeys=[this.rk],e.pageIdentifier=t,this.categoryOverviewService.getLandingpageKey(l,n.WidgetConfig[s].landingpageddoKey,e)}},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getLandingPageCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={landingPageCondition:this.landingPageCondition,rk:this.rk};this.categoryOverviewService.getLandingPageCategories(l,n.WidgetConfig[s].ddoKey,o).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getDefaultImg=function(e){return this.categoryOverviewService.getDefaultImg(e)},t.prototype.getCategories=function(){var t=this;e.prototype.unhideLoader.call(this),this.categoryOverviewService.getCategories(l,n.WidgetConfig[s].ddoKey).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getSubCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={};o.field="category",o.sub_field="subCategory",this.categoryOverviewService.getSubCategories(l,n.WidgetConfig[s].ddoKey,o,this.category).then(function(e){t.getCategoryMasterData(e,t.type)})},t.prototype.getCategoryMasterData=function(t,o){var i=this;"subCategory"==o?(this.categories=t,this.categoryViewModel=this.categories,this.cardStyleClassSuffix=this.gridColSize/this.cardsPerRow,this.handleCategoryView(),"slider"==this.mode&&(e.prototype.getSlideData.call(this),this.modeOptions.autoPlay&&this.autoplay()),this.categories.forEach(function(e){e.key||(e.key=e.category)}),e.prototype.hideLoader.call(this)):this.categoryOverviewService.getCategoryMasterData(l,n.WidgetConfig[s].ddoKeyMasterDatav2).then(function(o){var n,a,r=[],s=[];if(o=o||{},o&&o.orderType&&"default"!=o.orderType?"custom"==o.orderType&&(n=o.categories||[],a=t||[]):(n=t||[],a=o.categories||[]),n.length){var l=void 0,c=void 0,p=void 0,d=void 0,h=void 0;for(c=0;c<n.length;c++)r.push(n[c].internalId);for(p=0;p<a.length;p++)s.push(a[p].internalId);for(d=0;d<r.length;d++)if(n[d].isRemoveEle=!0,-1!=(l=s.indexOf(r[d]))){n[d].isRemoveEle=!1,h=a[l];for(var f in h)(void 0==n[d][f]&&h.hasOwnProperty(f)||h.hasOwnProperty(f)&&!n[d].hasOwnProperty(f))&&(n[d][f]=h[f]);var u=(i.category||"").toLowerCase(),g=(h.category||"").toLowerCase();u==g&&(i.activeCategory=n[d])}if(!i.showEmptyCategories&&"default"!=o.orderType){for(var m=[],y=0;y<n.length;y++)n[y].isRemoveEle||m.push(n[y]);n=m}n.length&&(i.categoryStaticContent=n,i.categories=n,i.categoryViewModel=n,i.cardStyleClassSuffix=i.gridColSize/i.cardsPerRow,i.handleCategoryView(),"slider"==i.mode&&(e.prototype.getSlideData.call(i),i.modeOptions.autoPlay&&i.autoplay()),i.categories.forEach(function(e){e.key||(e.key=e.category)}))}(o||o.categories||o.categories.length)&&(i.categoryViewModel.length||i.showEmptyCategories)||i.handleError(""),e.prototype.hideLoader.call(i)})},t.prototype.autoplay=function(){var t=this;this.modeOptions.autoPlay&&(this._timeout=setTimeout(function(){t._changeSlide&&(t.currSlide>=0&&t.currSlide<t.totalSlides-1?(e.prototype.goToNextSlide.call(t),t.autoplay()):t.currSlide==t.totalSlides-1&&t.modeOptions.loop&&(t.currSlide=-1,e.prototype.goToNextSlide.call(t),t.autoplay()))},this.modeOptions.interval||5e3))},t.prototype.handleMouseHover=function(){var e=this;("slider"!=this.mode||this.modeOptions.pauseOnHover)&&(this.element.addEventListener("mouseenter",function(t){e._changeSlide=!1}),this.element.addEventListener("mouseleave",function(t){e._changeSlide=!0,clearTimeout(e._timeout),e.currSlide>=0&&e.currSlide<e.totalSlides&&e.autoplay()}))},t.prototype.handleCategoryView=function(){var e=this.setCategoryCount();this.categoryViewModel.length&&"showMore"==this.mode&&this.categoryViewModel.length>e&&this.setShowMoreInitialStates(this.modeOptions.viewMoreMode)},t.prototype._updateModeOptions=function(){for(var e in this._defaultModeOptions)this._defaultModeOptions.hasOwnProperty(e)&&!this.modeOptions.hasOwnProperty(e)&&(this.modeOptions[e]=this._defaultModeOptions[e])},t.prototype.setShowMoreInitialStates=function(e){var t=this.setCategoryCount();this.categoryViewModel=this.categories.slice(0,t),"all"==e?this.hideViewAll=!1:"evenMore"==e?(this.hideViewEvenMore=!1,this.viewEvenMoreCount=!0):"viewNext"==e&&(this.hideViewNext=!1)},t.prototype.setCategoryCount=function(){return this.cardsPerRow*this.rowCount},t.prototype.viewLess=function(){var e=this;setTimeout(function(){e.setShowMoreInitialStates(e.modeOptions.viewMoreMode),e.hideLess=!0,!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access="showMore"]')&&e.element.querySelector('[data-access="showMore"]').focus()},150))},150)},t.prototype.viewAll=function(){var t=this.categories.length-(this.categories.length-this.categoryViewModel.length);this.categoryViewModel=this.categories,this.hideViewAll=!0,this.hideLess=!1,e.prototype.focusElement.call(this,'[data-access-list-item="'+t+'"]',150)},t.prototype.viewEvenMoreOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewNextOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewLessOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewEvenMore=function(){var e=this;setTimeout(function(){if(e.viewEvenMoreCount)e.viewNext(),e.viewEvenMoreCount=!1;else if(e.isKeyPress||!e.isKeyPressEnabled){e.isKeyPress=!1;var t=e.categories.length-(e.categories.length-e.categoryViewModel.length);setTimeout(function(){e.element.querySelector('[data-access-list-item="'+t+'"]'),e.element.querySelector('[data-access-list-item="'+t+'"]')&&e.element.querySelector('[data-access-list-item="'+t+'"]').focus()},150),e.categoryViewModel=e.categories,e.hideViewEvenMore=!0,e.hideLess=!1}},150)},t.prototype.viewNext=function(){var e=this;setTimeout(function(){var t=e.setCategoryCount(),o=e.categoryViewModel.length;!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access-list-item="'+o+'"]')&&e.element.querySelector('[data-access-list-item="'+o+'"]').focus()},150));var i=e.categories.length-e.categoryViewModel.length;t<i?(i=t,e.categoryViewModel=e.categories.slice(0,e.categoryViewModel.length+i)):(e.categoryViewModel=e.categories,e.hideViewNext=!0,e.hideViewEvenMore=!0,e.hideLess=!1)},150)},t.prototype.getContextData=function(){return this.categories},t.prototype.goToNextSlide=function(){this.currSlide==this.totalSlides-1&&this.modeOptions.loop&&(this.currSlide=-1),e.prototype.goToNextSlide.call(this)},t.prototype.goToPrevSlide=function(){0==this.currSlide&&this.modeOptions.loop&&(this.currSlide=this.totalSlides),e.prototype.goToPrevSlide.call(this)},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getUrl=function(t,o,i,n,a){if(this.rk&&this.rk.length&&(n="&rk="+this.rk),"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length){var r=e.prototype.getUrl.call(this,t,o,i,n,a);return r=-1!=r.indexOf("?")?r+"&qkvisibilityType="+this.jobsType+"&s=1":r+"?qkvisibilityType="+this.jobsType+"&s=1"}return e.prototype.getUrl.call(this,t,o,i,n,a)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileHoverImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideBlurb",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideJobCount",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerSlide",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerRow",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"rowCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideWhenEmpty",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"modeOptions",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"type",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"categoryClass",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"asDependent",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showEmptyCategories",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"rk",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(p=void 0!==i.CommonService&&i.CommonService)&&p||Object,r.CategoryOverviewService,"function"==typeof(d=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&d||Object,a.EventAggregator])],t);var p,d}(i.PhenomWidget);t.CategoryOverview=p}),define("text!v3/ph-category-overview.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v2/ph-similar-jobs","v1/ph-consent-popup","v3/ph-social-share","v2/ph-cookie-popup","v1/ph-job-details","v1/ph-candidate-login","v1/ph-location-map","v1/ph-find-your-fit","v1/ph-email-job","v1/ph-social-connect","v1/ph-import-resume","v1/ph-subscribe-similarjobs","v2/ph-profile-recommendations","v2/ph-people-also-viewed","v1/ph-find-your-fit-container","v3/ph-category-overview"]}),define("main",["require","exports","./environment","./components"],function(e,t,o,i){"use strict";function n(e){e.use.standardConfiguration().plugin("ph-common").globalResources(i.default),o.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),n=0;n<t.length;n++){var a=t[n];if(a){var r=a.getAttribute("type");if(!r||"static"!=r){var s=a.innerHTML,l=a.getAttribute("as-element"),c=a.getAttribute("view")||"default";s&&s.trim().length&&(pht[l+"-"+c]=s.trim()),a.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({longStackTraces:!1,warnings:{wForgottenReturn:!1}}),t.configure=n}),document&&document.body&&document.body.setAttribute("aurelia-app","main");